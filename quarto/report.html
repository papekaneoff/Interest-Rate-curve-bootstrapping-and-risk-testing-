<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pape Kane">
<meta name="dcterms.date" content="2026-02-17">

<title>Interest Rate Curve Bootstrapping &amp; Risk Testing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="report_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="report_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap-bd30ae4c112608896e07e8a2aebce0b9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #1F4E79;
      }
</style>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
</script>
<script type="module">import "https://cdn.plot.ly/plotly-3.3.0.min"</script>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Interest Rate Curve Bootstrapping &amp; Risk Testing</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Pape Kane </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Msc Student, Computer Science and Physics teacher
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 17, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="block-title">Abstract</div>
      <p>This project constructs and analyses the U.S. Treasury zero-coupon yield curve using bootstrapping techniques applied to market data obtained from FRED. We implement spline interpolation and Nelson‚ÄìSiegel parametric fitting, derive forward and swap rates, and assess bond portfolio sensitivity through duration, convexity, and key rate measures. Stress testing and Monte Carlo VaR simulations are conducted to evaluate interest rate risk under various shock scenarios. Principal Component Analysis (PCA) is applied to historical yield curve movements to identify level, slope, and curvature factors. Finally, we extend the framework with a machine learning forecasting module. The project provides a fully reproducible quantitative fixed-income framework linking term structure modelling to practical risk management.</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#interest-rate-curve-bootstrapping-risk-testing" id="toc-interest-rate-curve-bootstrapping-risk-testing" class="nav-link active" data-scroll-target="#interest-rate-curve-bootstrapping-risk-testing"><span class="header-section-number">1</span> Interest Rate Curve Bootstrapping &amp; Risk Testing</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">1.1</span> Introduction</a></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review"><span class="header-section-number">1.2</span> Literature Review</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions"><span class="header-section-number">1.3</span> Research Questions</a></li>
  <li><a href="#resources-implementation" id="toc-resources-implementation" class="nav-link" data-scroll-target="#resources-implementation"><span class="header-section-number">1.4</span> Resources &amp; Implementation</a></li>
  </ul></li>
  <li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition"><span class="header-section-number">2</span> Data Acquisition</a>
  <ul class="collapse">
  <li><a href="#u.s.-treasury-yields-fred" id="toc-u.s.-treasury-yields-fred" class="nav-link" data-scroll-target="#u.s.-treasury-yields-fred"><span class="header-section-number">2.1</span> U.S. Treasury Yields (FRED)</a></li>
  <li><a href="#data-limitations" id="toc-data-limitations" class="nav-link" data-scroll-target="#data-limitations"><span class="header-section-number">2.2</span> Data Limitations</a></li>
  </ul></li>
  <li><a href="#theoretical-framework" id="toc-theoretical-framework" class="nav-link" data-scroll-target="#theoretical-framework"><span class="header-section-number">3</span> Theoretical Framework</a>
  <ul class="collapse">
  <li><a href="#zero-coupon-bond-pricing" id="toc-zero-coupon-bond-pricing" class="nav-link" data-scroll-target="#zero-coupon-bond-pricing"><span class="header-section-number">3.1</span> Zero-Coupon Bond Pricing</a></li>
  </ul></li>
  <li><a href="#bootstrapping-the-zero-curve" id="toc-bootstrapping-the-zero-curve" class="nav-link" data-scroll-target="#bootstrapping-the-zero-curve"><span class="header-section-number">4</span> Bootstrapping the Zero Curve</a>
  <ul class="collapse">
  <li><a href="#mathematical-formulation" id="toc-mathematical-formulation" class="nav-link" data-scroll-target="#mathematical-formulation"><span class="header-section-number">4.1</span> Mathematical Formulation</a></li>
  </ul></li>
  <li><a href="#curve-interpolation" id="toc-curve-interpolation" class="nav-link" data-scroll-target="#curve-interpolation"><span class="header-section-number">5</span> Curve Interpolation</a>
  <ul class="collapse">
  <li><a href="#cubic-spline" id="toc-cubic-spline" class="nav-link" data-scroll-target="#cubic-spline"><span class="header-section-number">5.1</span> Cubic Spline</a></li>
  <li><a href="#nelsonsiegel-parametric-curve" id="toc-nelsonsiegel-parametric-curve" class="nav-link" data-scroll-target="#nelsonsiegel-parametric-curve"><span class="header-section-number">5.2</span> Nelson‚ÄìSiegel Parametric Curve</a></li>
  </ul></li>
  <li><a href="#forward-swap-rates" id="toc-forward-swap-rates" class="nav-link" data-scroll-target="#forward-swap-rates"><span class="header-section-number">6</span> Forward &amp; Swap Rates</a>
  <ul class="collapse">
  <li><a href="#forward-rate-derivation" id="toc-forward-rate-derivation" class="nav-link" data-scroll-target="#forward-rate-derivation"><span class="header-section-number">6.1</span> Forward Rate Derivation</a></li>
  </ul></li>
  <li><a href="#bond-pricing-risk-measures" id="toc-bond-pricing-risk-measures" class="nav-link" data-scroll-target="#bond-pricing-risk-measures"><span class="header-section-number">7</span> Bond Pricing &amp; Risk Measures</a>
  <ul class="collapse">
  <li><a href="#bond-pricing-from-zero-curve" id="toc-bond-pricing-from-zero-curve" class="nav-link" data-scroll-target="#bond-pricing-from-zero-curve"><span class="header-section-number">7.1</span> Bond Pricing from Zero Curve</a></li>
  <li><a href="#modified-duration" id="toc-modified-duration" class="nav-link" data-scroll-target="#modified-duration"><span class="header-section-number">7.2</span> Modified Duration</a></li>
  <li><a href="#convexity" id="toc-convexity" class="nav-link" data-scroll-target="#convexity"><span class="header-section-number">7.3</span> Convexity</a></li>
  </ul></li>
  <li><a href="#stress-testing" id="toc-stress-testing" class="nav-link" data-scroll-target="#stress-testing"><span class="header-section-number">8</span> Stress Testing</a>
  <ul class="collapse">
  <li><a href="#parallel-shift" id="toc-parallel-shift" class="nav-link" data-scroll-target="#parallel-shift"><span class="header-section-number">8.1</span> Parallel Shift</a></li>
  <li><a href="#scenario-grid" id="toc-scenario-grid" class="nav-link" data-scroll-target="#scenario-grid"><span class="header-section-number">8.2</span> Scenario Grid</a></li>
  </ul></li>
  <li><a href="#monte-carlo-value-at-risk" id="toc-monte-carlo-value-at-risk" class="nav-link" data-scroll-target="#monte-carlo-value-at-risk"><span class="header-section-number">9</span> Monte Carlo Value-at-Risk</a></li>
  <li><a href="#principal-component-analysis" id="toc-principal-component-analysis" class="nav-link" data-scroll-target="#principal-component-analysis"><span class="header-section-number">10</span> Principal Component Analysis</a>
  <ul class="collapse">
  <li><a href="#mathematical-framework" id="toc-mathematical-framework" class="nav-link" data-scroll-target="#mathematical-framework"><span class="header-section-number">10.1</span> Mathematical Framework</a></li>
  </ul></li>
  <li><a href="#extension-machine-learning-yield-curve-forecasting" id="toc-extension-machine-learning-yield-curve-forecasting" class="nav-link" data-scroll-target="#extension-machine-learning-yield-curve-forecasting"><span class="header-section-number">11</span> Extension: Machine Learning Yield Curve Forecasting</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">12</span> Conclusion</a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography"><span class="header-section-number">13</span> Bibliography</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="report.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="report.pptx"><i class="bi bi-file-slides"></i>Powerpoint</a></li></ul></div></nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="interest-rate-curve-bootstrapping-risk-testing" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Interest Rate Curve Bootstrapping &amp; Risk Testing</h1>
<section id="introduction" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1.1</span> Introduction</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° Why does the yield curve matter?
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you lend money for 1 year vs.&nbsp;10 years, you expect a different return. The <strong>yield curve</strong> captures exactly that: how interest rates vary across maturities. Central banks, banks, insurers, and asset managers watch it daily, because it drives the price of virtually every financial instrument, from mortgages to derivatives.</p>
</div>
</div>
<p>Interest rate modelling sits at the very heart of modern finance. Every bond, every swap, every mortgage-backed security, their values all depend fundamentally on one thing: the term structure of interest rates. This project tackles that problem head-on by building a complete framework for constructing, analysing, and stress-testing the U.S. Treasury yield curve.</p>
<p>The motivation is straightforward. If you‚Äôre managing a pension fund with billions in fixed-income assets, you need to know what happens when the Federal Reserve raises rates by 75 basis points. If you‚Äôre an insurer with long-dated liabilities stretching 30 years into the future, you need to discount those cash flows at the right rate today, and understand how sensitive your balance sheet is to curve reshapings. If you‚Äôre a derivatives desk pricing interest rate swaps, you need forward rates that are arbitrage-free and dynamically consistent with the spot curve.</p>
<p>We start from the raw data published daily by the Federal Reserve Economic Data (FRED) platform: Treasury yields at four key maturities (1Y, 2Y, 5Y, 10Y). From these four observable points, we reconstruct the full zero-coupon yield curve using bootstrapping, a recursive procedure that ensures no riskless arbitrage opportunities exist. We then fit smooth interpolation functions, both non-parametric (cubic splines) and parametric (Nelson‚ÄìSiegel), allowing us to extract rates at any intermediate maturity needed for pricing.</p>
<p>Once the curve is built, the real work begins: risk analysis. We compute duration and convexity to quantify first- and second-order sensitivities to parallel shifts. We stress-test the curve under extreme scenarios, parallel shocks, steepeners, flatteners, and measure portfolio value-at-risk using Monte Carlo simulation with 2 000 simulated interest rate paths. We decompose historical yield curve movements using Principal Component Analysis (PCA), isolating the three fundamental drivers of curve dynamics: level shifts, slope changes, and curvature adjustments.</p>
<p>Finally, we push the framework one step further. Using the time series of daily yield changes we‚Äôve already prepared for PCA, we build a machine learning forecasting module based on a Random Forest regressor. The model learns patterns in how short-term rates predict longer-term movements, giving us a simple but powerful tool for projecting the curve forward in time.</p>
<p><strong>The objective is clear:</strong> build a reproducible, extensible quantitative framework that bridges textbook theory with the tools used daily by practitioners in asset management, banking, and actuarial science.</p>
<hr>
</section>
<section id="literature-review" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="literature-review"><span class="header-section-number">1.2</span> Literature Review</h2>
<p>The term structure of interest rates has been extensively studied in financial economics, with foundational work establishing both the theoretical basis for arbitrage-free pricing and empirical regularities in yield curve dynamics.</p>
<p><strong>Bootstrapping and arbitrage-free pricing.</strong> The construction of zero-coupon curves from coupon-bearing instruments was formalized by McCulloch (1971) and Nelson and Siegel (1987), who introduced the parametric curve that bears their names. The bootstrapping procedure ensures consistency with the no-arbitrage condition: discount factors must be such that no combination of bonds can generate riskless profit (Jarrow 2009).</p>
<p><strong>Yield curve factor structure.</strong> Empirical research consistently finds that yield curve movements are driven by a small number of common factors. Litterman and Scheinkman (1991) applied Principal Component Analysis to U.S. Treasury yields and identified three dominant factors, level, slope, and curvature, which collectively explain over 95% of variation. This finding has been replicated across markets and time periods (Ang and Piazzesi 2003; Diebold and Li 2006).</p>
<p><strong>Duration, convexity, and risk measures.</strong> Macaulay (1938) introduced duration as a measure of interest rate sensitivity, later refined by Hicks (1939) into modified duration. Convexity, the second-order correction for non-linearity in the price-yield relationship, was developed to improve hedging strategies in volatile markets (Fabozzi 2007).</p>
<p><strong>Machine learning in yield curve forecasting.</strong> While traditional econometric models have dominated term structure forecasting (Diebold and Li 2006), recent work has explored machine learning approaches. Bianchi, B√ºchner, and Tamoni (2021) demonstrate that Random Forests can capture non-linear dependencies in rate dynamics, though they emphasize the challenge of non-stationarity and structural breaks.</p>
<p>This literature provides the foundation for our analysis. Our contribution lies in integrating these components into a single, reproducible framework with modern computational tools (Quarto, Python, Plotly) suitable for both academic instruction and professional application.</p>
</section>
<section id="research-questions" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="research-questions"><span class="header-section-number">1.3</span> Research Questions</h2>
<p>This project investigates how to construct, analyze, and manage interest rate risk using U.S. Treasury data. The analysis is guided by the following questions:</p>
<ul>
<li><p>How can we construct an arbitrage-free zero-coupon yield curve from observed market rates using bootstrapping?</p></li>
<li><p>What are the differences between non-parametric (cubic spline) and parametric (Nelson‚ÄìSiegel) interpolation methods?</p></li>
<li><p>How do duration and convexity quantify bond portfolio sensitivity to interest rate shocks?</p></li>
<li><p>How much of yield curve variation is explained by level, slope, and curvature factors?</p></li>
<li><p>Can machine learning models successfully forecast short-term interest rate movements, or do structural breaks limit their usefulness?</p></li>
<li><p>What are the practical implications for portfolio management and stress testing?</p></li>
</ul>
</section>
<section id="resources-implementation" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="resources-implementation"><span class="header-section-number">1.4</span> Resources &amp; Implementation</h2>
<p>All computational routines are centralized in the module <code>rates.py</code>, which provides:</p>
<ul>
<li><strong>Data loading and cleaning</strong> to standardize FRED CSV files</li>
<li><strong>Bootstrapping and interpolation</strong> for zero-coupon curve construction</li>
<li><strong>Risk measure computation</strong> (duration, convexity, forward rates, swap rates)</li>
<li><strong>Stress testing and simulation</strong> (parallel shifts, scenario grids, Monte Carlo VaR)</li>
<li><strong>PCA decomposition</strong> to extract level/slope/curvature factors</li>
<li><strong>Interactive visualization</strong> using Plotly</li>
</ul>
<p>By consolidating these components in a single module, the project ensures reproducibility and a clean separation between computation and presentation.</p>
<p><strong>AI assistance disclosure.</strong> AI tools (Claude, GPT-4) were used to debug Python errors, improve code readability, and clarify technical writing. All modeling choices and statistical interpretations were made manually by the author.</p>
<hr>
</section>
</section>
<section id="data-acquisition" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data Acquisition</h1>
<section id="u.s.-treasury-yields-fred" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="u.s.-treasury-yields-fred"><span class="header-section-number">2.1</span> U.S. Treasury Yields (FRED)</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is FRED?
</div>
</div>
<div class="callout-body-container callout-body">
<p>FRED (Federal Reserve Economic Data) is the Federal Reserve‚Äôs open data platform. It provides daily U.S. Treasury yields for all standard maturities, freely accessible and widely used as the reference source in quantitative finance.</p>
</div>
</div>
<p>We work with U.S. Treasury yields downloaded from FRED, covering four key maturities: <strong>1-year, 2-year, 5-year, and 10-year</strong>. These aren‚Äôt randomly chosen, they span the full term structure in a way that captures short-term monetary policy expectations (1Y), medium-term growth and inflation views (2Y, 5Y), and long-run equilibrium rates (10Y). Together, they give us enough anchor points to reconstruct the entire curve through interpolation.</p>
<p>The data runs from February 2021 through February 2026, giving us roughly 1 250 trading days, about five years of history. That‚Äôs long enough to capture the full post-pandemic monetary policy cycle: the near-zero rate environment of 2021, the historic Fed hiking campaign of 2022‚Äì2023 (the fastest tightening cycle in four decades), and the stabilization phase we‚Äôre living through now in early 2026. This period is particularly valuable for risk modelling because it includes both extreme volatility and quieter regimes.</p>
<p>Each CSV file from FRED arrives with two columns: <code>observation_date</code> and the ticker symbol (e.g., <code>DGS10</code> for the 10-year rate). We standardize these to <code>date</code> and <code>rate</code>, convert from percentage format (e.g., 3.45) to decimal (0.0345), and attach maturity labels. Any missing values, usually around federal holidays when the bond market is closed, are dropped. The result is a clean, tidy DataFrame ready for analysis.</p>
<div id="50c57707" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>sys.path.append(<span class="bu">str</span>(Path().resolve().parent))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> src.rates <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load_us_treasury_from_csv(<span class="st">"../data"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> data[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>zero_rates <span class="op">=</span> extract_zero_rates_at_date(data, latest_date)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latest available date:"</span>, latest_date.date())</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Zero rates snapshot:"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mat, rate <span class="kw">in</span> zero_rates.items():</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>mat<span class="sc">:&gt;2}</span><span class="ss">Y : </span><span class="sc">{</span>rate<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Latest available date: 2026-02-10

Zero rates snapshot:
   1Y : 3.400%
   2Y : 3.450%
   5Y : 3.700%
  10Y : 4.160%</code></pre>
</div>
</div>
<p>What we see here is the current state of the market as of the most recent trading day in our dataset. Notice the upward slope: the 10-year rate sits 76 basis points above the 1-year rate. This is what bond traders call a ‚Äúpositive term premium‚Äù, investors demand higher compensation for locking up their money longer, reflecting both inflation risk and uncertainty about future Fed policy.</p>
<p>It‚Äôs worth pausing to appreciate how much information is embedded in these four numbers. The 1-year rate effectively tells us where the market thinks the Federal Funds rate will average over the next twelve months. The 10-year rate incorporates expectations about growth, inflation, and risk premiums stretching out to 2036. The slope between them, steepness or flatness, has historically been one of the best recession predictors: when the curve inverts (short rates above long rates), recessions tend to follow within 12‚Äì18 months. We‚Äôre not inverted now, which is consistent with the consensus view that the U.S. economy is stabilizing rather than contracting.</p>
<blockquote class="blockquote">
<p><strong>Observation:</strong> The yield curve is currently <strong>upward sloping</strong>, reflecting a typical term premium, investors demand higher rates for longer maturities. This is the ‚Äúnormal‚Äù shape in non-recessionary environments.</p>
</blockquote>
</section>
<section id="data-limitations" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="data-limitations"><span class="header-section-number">2.2</span> Data Limitations</h2>
<p>While FRED provides high-quality, reliable data, several limitations should be acknowledged:</p>
<p><strong>Limited maturity coverage.</strong> We observe only four discrete maturities. Pricing bonds at intermediate tenors requires interpolation, which introduces model risk. The choice between spline and Nelson‚ÄìSiegel affects derived forward rates and valuations.</p>
<p><strong>Constant maturity construction.</strong> FRED rates are synthetic ‚Äúconstant maturity‚Äù yields derived from actively traded securities with varying actual maturities, introducing small approximation errors compared to zero-coupon strip prices.</p>
<p><strong>Missing data on non-trading days.</strong> The dataset excludes weekends and federal holidays. PCA daily returns are computed on business days only.</p>
<p><strong>No credit risk or liquidity premiums.</strong> FRED yields reflect only the ‚Äúrisk-free‚Äù term structure. Actual portfolios contain corporate bonds and other securities with credit spreads not captured here.</p>
<p><strong>Structural breaks and non-stationarity.</strong> The 2021‚Äì2026 period includes unprecedented monetary policy shifts. Models trained on this data may fail to generalize if future Fed policy differs structurally, a fundamental challenge in financial forecasting.</p>
<hr>
</section>
</section>
<section id="theoretical-framework" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Theoretical Framework</h1>
<section id="zero-coupon-bond-pricing" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="zero-coupon-bond-pricing"><span class="header-section-number">3.1</span> Zero-Coupon Bond Pricing</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is a discount factor?
</div>
</div>
<div class="callout-body-container callout-body">
<p>A discount factor <span class="math inline">\(DF(T)\)</span> answers a simple question: <em>how much is 1 dollar receivable in <span class="math inline">\(T\)</span> years worth today?</em> If rates are 4%, a dollar in 10 years is worth roughly $0.676 today. The lower the discount factor, the higher the implied interest rate.</p>
</div>
</div>
<p>The price of a coupon bond is the sum of all future cash flows, each discounted to today:</p>
<p><span class="math display">\[
P = \sum_{t=1}^{T-1} C \cdot DF(t) + (C + F)\cdot DF(T)
\]</span></p>
<p>where <span class="math inline">\(C\)</span> is the annual coupon, <span class="math inline">\(F\)</span> is the face value, and <span class="math inline">\(DF(t)\)</span> is the discount factor at maturity <span class="math inline">\(t\)</span>.</p>
<p>The discount factor is linked to the <strong>zero rate</strong> <span class="math inline">\(r_T\)</span> through:</p>
<p><span class="math display">\[
DF(T) = \frac{1}{(1+r_T)^T} \qquad \Longrightarrow \qquad r_T = DF(T)^{-1/T} - 1
\]</span></p>
<hr>
</section>
</section>
<section id="bootstrapping-the-zero-curve" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Bootstrapping the Zero Curve</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is bootstrapping?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Bootstrapping is an iterative procedure: starting from the shortest maturity, we extract the discount factor that makes the bond price consistent with the market. We then use that result to move to the next maturity. The output is a <strong>set of zero rates</strong>, pure, coupon-free rates for each horizon, constructed to be arbitrage-free.</p>
</div>
</div>
<section id="mathematical-formulation" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="mathematical-formulation"><span class="header-section-number">4.1</span> Mathematical Formulation</h2>
<p>Consider a coupon-bearing bond with maturity <span class="math inline">\(T\)</span>, annual coupon <span class="math inline">\(C = c \cdot F\)</span> (where <span class="math inline">\(c\)</span> is the coupon rate and <span class="math inline">\(F\)</span> is face value), and market price <span class="math inline">\(P\)</span>. The no-arbitrage condition requires:</p>
<p><span class="math display">\[
P = \sum_{t=1}^{T-1} C \cdot DF(t) + (C + F) \cdot DF(T)
\]</span></p>
<p>If we have already bootstrapped discount factors <span class="math inline">\(DF(1), DF(2), \ldots, DF(T-1)\)</span> from shorter maturities, we can solve for <span class="math inline">\(DF(T)\)</span> by rearranging:</p>
<p><span class="math display">\[
DF(T) = \frac{P - \displaystyle\sum_{t=1}^{T-1} C \cdot DF(t)}{C + F}
\]</span></p>
<p>This is the <strong>bootstrapping recursion</strong>. Once we have <span class="math inline">\(DF(T)\)</span>, we recover the zero rate via:</p>
<p><span class="math display">\[
r(T) = DF(T)^{-1/T} - 1 = \left( \frac{1}{DF(T)} \right)^{1/T} - 1
\]</span></p>
<p><strong>Arbitrage-free property:</strong> If market prices are internally consistent, this procedure guarantees that no combination of bonds can generate riskless profit. Any deviation would create an arbitrage opportunity that would be instantly exploited away.</p>
<div id="ba206d25" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> data[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>zero_rates <span class="op">=</span> extract_zero_rates_at_date(data, latest_date)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>dfs <span class="op">=</span> zero_to_discount_factors(zero_rates)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> pd.DataFrame({</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Maturity (Y)"</span>: <span class="bu">list</span>(zero_rates.keys()),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Zero Rate (%)"</span>: [<span class="ss">f"</span><span class="sc">{</span>r<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">"</span> <span class="cf">for</span> r <span class="kw">in</span> zero_rates.values()],</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Discount Factor"</span>: [<span class="ss">f"</span><span class="sc">{</span>dfs[T]<span class="sc">:.4f}</span><span class="ss">"</span> <span class="cf">for</span> T <span class="kw">in</span> zero_rates.keys()],</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>summary</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Maturity (Y)</th>
<th data-quarto-table-cell-role="th">Zero Rate (%)</th>
<th data-quarto-table-cell-role="th">Discount Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1</td>
<td>3.400</td>
<td>0.9671</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2</td>
<td>3.450</td>
<td>0.9344</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>5</td>
<td>3.700</td>
<td>0.8339</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>10</td>
<td>4.160</td>
<td>0.6653</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>This procedure ensures <strong>arbitrage-free construction</strong> of the zero curve: no riskless profit is possible from combinations of these instruments.</p>
<hr>
</section>
</section>
<section id="curve-interpolation" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Curve Interpolation</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° Why interpolate?
</div>
</div>
<div class="callout-body-container callout-body">
<p>We only observe rates at 4 maturities (1Y, 2Y, 5Y, 10Y). But pricing a bond maturing in 3 or 7 years requires rates at those tenors too. Interpolation fills the gaps, the question is <em>how</em> to do it smoothly and economically.</p>
</div>
</div>
<section id="cubic-spline" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="cubic-spline"><span class="header-section-number">5.1</span> Cubic Spline</h2>
<p>A <strong>natural cubic spline</strong> fits a smooth, piecewise polynomial curve that passes exactly through each observed point. It minimises curvature (second-derivative) globally, producing the smoothest possible interpolation.</p>
<div id="b30b3ca4" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>spline_curve <span class="op">=</span> interpolate_zero_curve_spline(zero_rates)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstrate interpolation at intermediate maturities</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Cubic Spline Interpolation:"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 2Y rate : </span><span class="sc">{</span>zero_rates[<span class="dv">2</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Interpolated 3Y  : </span><span class="sc">{</span>spline_curve(<span class="dv">3</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 5Y rate : </span><span class="sc">{</span>zero_rates[<span class="dv">5</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Interpolated 7Y  : </span><span class="sc">{</span>spline_curve(<span class="dv">7</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 10Y rate: </span><span class="sc">{</span>zero_rates[<span class="dv">10</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Cubic Spline Interpolation:
  Observed 2Y rate : 3.450%
  Interpolated 3Y  : 3.520%
  Observed 5Y rate : 3.700%
  Interpolated 7Y  : 3.886%
  Observed 10Y rate: 4.160%</code></pre>
</div>
</div>
</section>
<section id="nelsonsiegel-parametric-curve" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="nelsonsiegel-parametric-curve"><span class="header-section-number">5.2</span> Nelson‚ÄìSiegel Parametric Curve</h2>
<p>The <strong>Nelson‚ÄìSiegel</strong> model imposes economic structure on the curve. Its four parameters each have a direct interpretation:</p>
<p><span class="math display">\[
r(T) = \underbrace{\beta_0}_{\text{level}} + \underbrace{\beta_1 \frac{1 - e^{-T/\tau}}{T/\tau}}_{\text{slope}} + \underbrace{\beta_2 \left(\frac{1 - e^{-T/\tau}}{T/\tau} - e^{-T/\tau}\right)}_{\text{curvature}}
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Parameter</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\beta_0\)</span></td>
<td>Long-run level (rate at infinite maturity)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\beta_1\)</span></td>
<td>Slope: spread between short and long rates</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\beta_2\)</span></td>
<td>Curvature: hump in the middle of the curve</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\tau\)</span></td>
<td>Speed at which short-term effects decay</td>
</tr>
</tbody>
</table>
<div id="c53c266d" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> fit_nelson_siegel(zero_rates)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Nelson-Siegel fitted parameters:"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÄ (level)     = </span><span class="sc">{</span>params[<span class="dv">0</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÅ (slope)     = </span><span class="sc">{</span>params[<span class="dv">1</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÇ (curvature) = </span><span class="sc">{</span>params[<span class="dv">2</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  œÑ  (decay)     = </span><span class="sc">{</span>params[<span class="dv">3</span>]<span class="sc">:.3f}</span><span class="ss"> years"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>ns_curve <span class="op">=</span> <span class="kw">lambda</span> T: nelson_siegel(T, <span class="op">*</span>params)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plot_yield_curve_interactive(zero_rates, spline_curve, ns_curve)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Nelson-Siegel fitted parameters:
  Œ≤‚ÇÄ (level)     = 5.655%
  Œ≤‚ÇÅ (slope)     = -2.271%
  Œ≤‚ÇÇ (curvature) = -2.313%
  œÑ  (decay)     = 4.008 years</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="0cc2bd89-f480-41a9-8bc8-37ef265f6a19" class="plotly-graph-div" style="height:450px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("0cc2bd89-f480-41a9-8bc8-37ef265f6a19")) {                    Plotly.newPlot(                        "0cc2bd89-f480-41a9-8bc8-37ef265f6a19",                        [{"marker":{"color":"#E63946","size":10,"symbol":"circle"},"mode":"markers","name":"Observed rates (FRED)","x":[1,2,5,10],"y":[3.4000000000000004,3.45,3.7000000000000006,4.16],"type":"scatter"},{"line":{"color":"#457B9D","width":2.5},"mode":"lines","name":"Cubic Spline","x":{"dtype":"f8","bdata":"AAAAAAAA4D94ReZLE4fhP++KzJcmDuM\u002fZ9Cy4zmV5D\u002feFZkvTRzmP1Zbf3tgo+c\u002fzqBlx3Mq6T9G5ksTh7HqP70rMl+aOOw\u002fNHEYq62\u002f7T+stv72wEbvPxJ+ciHqZvA\u002fzqBlx3Mq8T+Kw1ht\u002fe3xP0bmSxOHsfI\u002fAQk\u002fuRB18z+9KzJfmjj0P3lOJQUk\u002fPQ\u002fNHEYq62\u002f9T\u002fwkwtRN4P2P6y2\u002fvbARvc\u002faNnxnEoK+D8k\u002fORC1M34P+Ae2Ohdkfk\u002fnEHLjudU+j9XZL40cRj7PxOHsdr62\u002fs\u002fz6mkgISf\u002fD+LzJcmDmP9P0fvisyXJv4\u002fAhJ+ciHq\u002fj++NHEYq63\u002fP70rMl+aOABAG70rMl+aAEB5TiUFJPwAQNbfHtjoXQFANHEYq62\u002fAUCSAhJ+ciECQPCTC1E3gwJATiUFJPzkAkCstv72wEYDQApI+MmFqANAaNnxnEoKBEDGautvD2wEQCT85ELUzQRAgo3eFZkvBUDgHtjoXZEFQD6w0bsi8wVAnEHLjudUBkD50sRhrLYGQFdkvjRxGAdAtfW3BzZ6B0ATh7Ha+tsHQHEYq62\u002fPQhAz6mkgISfCEAtO55TSQEJQIvMlyYOYwlA6V2R+dLECUBH74rMlyYKQKSAhJ9ciApAAhJ+ciHqCkBgo3dF5ksLQL40cRirrQtAHMZq628PDEB6V2S+NHEMQNjoXZH50gxANnpXZL40DUCUC1E3g5YNQPKcSgpI+A1AUC5E3QxaDkCtvz2w0bsOQAtRN4OWHQ9AaeIwVlt\u002fD0DHcyopIOEPQJICEn5yIRBAQsuO51RSEEDwkwtRN4MQQKBciLoZtBBATiUFJPzkEED+7YGN3hURQKy2\u002fvbARhFAW397YKN3EUAKSPjJhagRQLkQdTNo2RFAaNnxnEoKEkAXom4GLTsSQMZq628PbBJAdTNo2fGcEkAk\u002fORC1M0SQNPEYay2\u002fhJAgo3eFZkvE0AxVlt\u002fe2ATQOAe2OhdkRNAj+dUUkDCE0A+sNG7IvMTQO14TiUFJBRAnEHLjudUFEBKCkj4yYUUQPnSxGGsthRAqJtBy47nFEBXZL40cRgVQAYtO55TSRVAtfW3BzZ6FUBkvjRxGKsVQBOHsdr62xVAwk8uRN0MFkBxGKutvz0WQCDhJxeibhZAz6mkgISfFkB+ciHqZtAWQC07nlNJARdA3AMbvSsyF0CLzJcmDmMXQDqVFJDwkxdA6V2R+dLEF0CYJg5jtfUXQEfvisyXJhhA9rcHNnpXGECkgISfXIgYQFNJAQk\u002fuRhAAhJ+ciHqGECx2vrbAxsZQGCjd0XmSxlAD2z0rsh8GUC+NHEYq60ZQG397YGN3hlAHMZq628PGkDLjudUUkAaQHpXZL40cRpAKSDhJxeiGkDY6F2R+dIaQIex2vrbAxtANnpXZL40G0DlQtTNoGUbQJQLUTeDlhtAQ9TNoGXHG0DynEoKSPgbQKFlx3MqKRxAUC5E3QxaHED+9sBG74ocQK2\u002fPbDRuxxAXIi6GbTsHEALUTeDlh0dQLoZtOx4Th1AaeIwVlt\u002fHUAYq62\u002fPbAdQMdzKikg4R1AdjynkgISHkAlBST85EIeQNTNoGXHcx5Ag5Ydz6mkHkAyX5o4jNUeQOEnF6JuBh9AkPCTC1E3H0A\u002fuRB1M2gfQO6Bjd4VmR9AnUoKSPjJH0BME4ex2vofQP7tgY3eFSBAVVJAwk8uIECstv72wEYgQAQbvSsyXyBAW397YKN3IECy4zmVFJAgQApI+MmFqCBAYqy2\u002fvbAIEC5EHUzaNkgQBB1M2jZ8SBAaNnxnEoKIUDAPbDRuyIhQBeibgYtOyFAbgYtO55TIUDGautvD2whQB3PqaSAhCFAdTNo2fGcIUDMlyYOY7UhQCT85ELUzSFAe2Cjd0XmIUDTxGGstv4hQCopIOEnFyJAgo3eFZkvIkDZ8ZxKCkgiQDFWW397YCJAiLoZtOx4IkDgHtjoXZEiQDeDlh3PqSJAj+dUUkDCIkDmSxOHsdoiQD6w0bsi8yJAlRSQ8JMLI0DteE4lBSQjQETdDFp2PCNAnEHLjudUI0DzpYnDWG0jQEoKSPjJhSNAom4GLTueI0D50sRhrLYjQFE3g5YdzyNAqJtBy47nI0AAAAAAAAAkQA=="},"y":{"dtype":"f8","bdata":"U8suM0YDC0C+riSRBwgLQA87cxy7DAtAeLmgSmIRC0AqczOR\u002fhULQFexsWWRGgtAMr2hPRwfC0Dq34mOoCMLQLJi8M0fKAtAvY5bcZssC0A5rVHuFDELQF0HWbqNNQtAVeb3Sgc6C0BWk7QVgz4LQJNXFZACQwtAO3ygL4dHC0CAStxpEkwLQJQLT7SlUAtAqQh\u002fhEJVC0DyivJP6lkLQJ7bL4yeXgtA4UO9rmBjC0DrDCEtMmgLQO5\u002f4XwUbQtAHeaEEwlyC0CniJFmEXcLQMKwjesufAtAm6f\u002fF2OBC0Bmtm1hr4YLQFYmXj0VjAtAmkBXIZaRC0BlTt+CM5cLQAnOIsfunAtAHoUGSciiC0AG1cuKv6gLQJr1aQjUrgtAvR7YPQW1C0BRiA2nUrsLQC9qAcC7wQtAOfyqBEDIC0BOdgHx3s4LQE8Q\u002fACY1QtAGwKSsGrcC0COg7p7VuMLQIvMbN5a6gtA8RSgVHfxC0CdlEtaq\u002fgLQHGDZmv2\u002fwtASBnoA1gHDEAGjsefzw4MQIgZ\u002fLpcFgxAr\u002fN80f4dDEBbVEFftSUMQGVzQOB\u002fLQxAtIhx0F01DEAjzMurTj0MQJJ1Ru5RRQxA37zYE2dNDEDu2XmYjVUMQJgEIfjEXQxAwnTFrgxmDEBHYl44ZG4MQAkF4xDLdgxA55RKtEB\u002fDEC\u002fSYyexIcMQHJbn0tWkAxA2wF7N\u002fWYDEDidBbeoKEMQF3saLtYqgxAL6BpSxyzDEA5yA8K67sMQFecUnPExAxAa1QpA6jNDEBWKIs1ldYMQPJPb4aL3wxAIAPNcYroDEDCeZtzkfEMQLXr0Qeg+gxA2JBnqrUDDUAMoVPX0QwNQC9UjQr0FQ1AIuILwBsfDUDEgsZzSCgNQPJttKF5MQ1AjNvMxa46DUBxAwdc50MNQIEdWuAiTQ1AnmG9zmBWDUCkByijoF8NQHNHkdnhaA1A6ljw7SNyDUDpczxcZnsNQE\u002fQbKCohA1A\u002fKV4NuqNDUDNLFeaKpcNQJFnGlFpoA1AppOmMqapDUDWhhVD4bINQCxE64YavA1Ars6rAlLFDUBqKdu6h84NQGVX\u002fbO71w1Aq1uW8u3gDUBHOSp7HuoNQELzPFJN8w1Ao4xSfHr8DUB3CO\u002f9pQUOQMZpltvPDg5AmrPMGfgXDkD+6BW9HiEOQPkM9slDKg5AlSLxRGczDkDgLIsyiTwOQN8uSJepRQ5AnSusd8hODkAkJjvY5VcOQH4heb0BYQ5AtCDqKxxqDkDRJhIoNXMOQNs2dbZMfA5A4FOX22KFDkDqgPybd44OQP3AKPyKlw5AKBegAJ2gDkB0huatrakOQOgRgAi9sg5AkLzwFMu7DkB2ibzX18QOQKJ7Z1XjzQ5AH5Z1ku3WDkD222qT9t8OQC9Qy1z+6A5A2PUa8wTyDkD4z91aCvsOQJfhl5gOBA9Awy3NsBEND0CBtwGoExYPQN2BuYIUHw9A4494RRQoD0CZ5ML0EjEPQAiDHJUQOg9AP24JKw1DD0BCqQ27CEwPQB83rUkDVQ9A3Bps2\u002fxdD0CGV8509WYPQCTwVxrtbw9AweeM0ON4D0BmQfGb2YEPQB0ACYHOig9A8SZYhMKTD0DruGKqtZwPQBK5rPenpQ9Acyq6cJmuD0AXEA8aircPQARtL\u002fh5wA9AS0SfD2nJD0DymOJkV9IPQP5tffxE2w9AgMbz2jHkD0CBpckEHu0PQAUOg34J9g9AGQOkTPT+D0DjQ9g57wMQQIxPFvxjCBBADCZOb9gMEEDnyMGVTBEQQKI5s3HAFRBAwXlkBTQaEEDMihdTpx4QQEVuDl0aIxBAsSWLJY0nEECWss+u\u002fysQQHcWHvtxMBBA3FK4DOQ0EEBGaeDlVTkQQD1b2IjHPRBARSri9zhCEEDj1z81qkYQQJllM0MbSxBA79T+I4xPEEBqJ+TZ\u002fFMQQI5eJWdtWBBA33sEzt1cEEDjgMMQTmEQQB1vpDG+ZRBAFUjpMi5qEEBMDdQWnm4QQEvApt8NcxBAk2Kjj313EECt9Qsp7XsQQBl7Iq5cgBBAX\u002fQoIcyEEEACY2GEO4kQQIvIDdqqjRBAeSZwJBqSEEBUfspliZYQQKLRXqD4mhBA5iFv1mefEECkcD0K16MQQA=="},"type":"scatter"},{"line":{"color":"#2A9D8F","dash":"dash","width":2.5},"mode":"lines","name":"Nelson‚ÄìSiegel","x":{"dtype":"f8","bdata":"AAAAAAAA4D94ReZLE4fhP++KzJcmDuM\u002fZ9Cy4zmV5D\u002feFZkvTRzmP1Zbf3tgo+c\u002fzqBlx3Mq6T9G5ksTh7HqP70rMl+aOOw\u002fNHEYq62\u002f7T+stv72wEbvPxJ+ciHqZvA\u002fzqBlx3Mq8T+Kw1ht\u002fe3xP0bmSxOHsfI\u002fAQk\u002fuRB18z+9KzJfmjj0P3lOJQUk\u002fPQ\u002fNHEYq62\u002f9T\u002fwkwtRN4P2P6y2\u002fvbARvc\u002faNnxnEoK+D8k\u002fORC1M34P+Ae2Ohdkfk\u002fnEHLjudU+j9XZL40cRj7PxOHsdr62\u002fs\u002fz6mkgISf\u002fD+LzJcmDmP9P0fvisyXJv4\u002fAhJ+ciHq\u002fj++NHEYq63\u002fP70rMl+aOABAG70rMl+aAEB5TiUFJPwAQNbfHtjoXQFANHEYq62\u002fAUCSAhJ+ciECQPCTC1E3gwJATiUFJPzkAkCstv72wEYDQApI+MmFqANAaNnxnEoKBEDGautvD2wEQCT85ELUzQRAgo3eFZkvBUDgHtjoXZEFQD6w0bsi8wVAnEHLjudUBkD50sRhrLYGQFdkvjRxGAdAtfW3BzZ6B0ATh7Ha+tsHQHEYq62\u002fPQhAz6mkgISfCEAtO55TSQEJQIvMlyYOYwlA6V2R+dLECUBH74rMlyYKQKSAhJ9ciApAAhJ+ciHqCkBgo3dF5ksLQL40cRirrQtAHMZq628PDEB6V2S+NHEMQNjoXZH50gxANnpXZL40DUCUC1E3g5YNQPKcSgpI+A1AUC5E3QxaDkCtvz2w0bsOQAtRN4OWHQ9AaeIwVlt\u002fD0DHcyopIOEPQJICEn5yIRBAQsuO51RSEEDwkwtRN4MQQKBciLoZtBBATiUFJPzkEED+7YGN3hURQKy2\u002fvbARhFAW397YKN3EUAKSPjJhagRQLkQdTNo2RFAaNnxnEoKEkAXom4GLTsSQMZq628PbBJAdTNo2fGcEkAk\u002fORC1M0SQNPEYay2\u002fhJAgo3eFZkvE0AxVlt\u002fe2ATQOAe2OhdkRNAj+dUUkDCE0A+sNG7IvMTQO14TiUFJBRAnEHLjudUFEBKCkj4yYUUQPnSxGGsthRAqJtBy47nFEBXZL40cRgVQAYtO55TSRVAtfW3BzZ6FUBkvjRxGKsVQBOHsdr62xVAwk8uRN0MFkBxGKutvz0WQCDhJxeibhZAz6mkgISfFkB+ciHqZtAWQC07nlNJARdA3AMbvSsyF0CLzJcmDmMXQDqVFJDwkxdA6V2R+dLEF0CYJg5jtfUXQEfvisyXJhhA9rcHNnpXGECkgISfXIgYQFNJAQk\u002fuRhAAhJ+ciHqGECx2vrbAxsZQGCjd0XmSxlAD2z0rsh8GUC+NHEYq60ZQG397YGN3hlAHMZq628PGkDLjudUUkAaQHpXZL40cRpAKSDhJxeiGkDY6F2R+dIaQIex2vrbAxtANnpXZL40G0DlQtTNoGUbQJQLUTeDlhtAQ9TNoGXHG0DynEoKSPgbQKFlx3MqKRxAUC5E3QxaHED+9sBG74ocQK2\u002fPbDRuxxAXIi6GbTsHEALUTeDlh0dQLoZtOx4Th1AaeIwVlt\u002fHUAYq62\u002fPbAdQMdzKikg4R1AdjynkgISHkAlBST85EIeQNTNoGXHcx5Ag5Ydz6mkHkAyX5o4jNUeQOEnF6JuBh9AkPCTC1E3H0A\u002fuRB1M2gfQO6Bjd4VmR9AnUoKSPjJH0BME4ex2vofQP7tgY3eFSBAVVJAwk8uIECstv72wEYgQAQbvSsyXyBAW397YKN3IECy4zmVFJAgQApI+MmFqCBAYqy2\u002fvbAIEC5EHUzaNkgQBB1M2jZ8SBAaNnxnEoKIUDAPbDRuyIhQBeibgYtOyFAbgYtO55TIUDGautvD2whQB3PqaSAhCFAdTNo2fGcIUDMlyYOY7UhQCT85ELUzSFAe2Cjd0XmIUDTxGGstv4hQCopIOEnFyJAgo3eFZkvIkDZ8ZxKCkgiQDFWW397YCJAiLoZtOx4IkDgHtjoXZEiQDeDlh3PqSJAj+dUUkDCIkDmSxOHsdoiQD6w0bsi8yJAlRSQ8JMLI0DteE4lBSQjQETdDFp2PCNAnEHLjudUI0DzpYnDWG0jQEoKSPjJhSNAom4GLTueI0D50sRhrLYjQFE3g5YdzyNAqJtBy47nI0AAAAAAAAAkQA=="},"y":{"dtype":"f8","bdata":"VdBqbvgXC0BeWc2kvBkLQD0l3kmwGwtAbDG+ftIdC0DIy8BnIiALQDPDYCyfIgtAkLs190clC0BFpOn1GygLQBhRLlkaKwtADDWzVEIuC0CdPhsfkzELQAbV8vELNQtAPvalCaw4C0ALdXalcjwLQApXcgdfQAtAK1JqdHBEC0ANaegzpkgLQBemJpD\u002fTAtA9PQF1ntRC0C2GQVVGlYLQK7FN1\u002faWgtAYMk9SbtfC0AzYzpqvGQLQJCqyxvdaQtAJxcCuhxvC0DaI1ijenQLQP4Mqjj2eQtA0akt3Y5\u002fC0BoYGr2Q4ULQCw0MewUiwtANu6UKAGRC0COX+IXCJcLQIq8mCgpnQtAihFiy2OjC0BM0Atzt6kLQKt1f5QjsAtAjUe7pqe2C0DEKssiQ70LQDGQwYP1wwtAi3mwRr7KC0ChlKLqnNELQLxtlPCQ2AtAF7ht25nfC0CDrPovt+YLQO595XTo7QtAYuOvMi31C0Bft6zzhPwLQCKs+UPvAwxAzBR5sWsLDEDgwsvL+RIMQCX4SiSZGgxAUGwCTkkiDECuZqrdCSoMQAbroWnaMQxA3Pnoibo5DECq4xrYqUEMQNyuaO+nSQxAVJCTbLRRDEArduftzlkMQJKkNRP3YQxAfWTPfSxqDEDuw4DQbnIMQKNni6+9egxA4W2hwBiDDEBVYuCqf4sMQIhCzBbykwxA7pJKrm+cDEBahJ0c+KQMQGIpXw6LrQxA1bt8MSi2DEDW8TE1z74MQHZiBMp\u002fxwxApfm+oTnQDEBNe21v\u002fNgMQEEVWOfH4QxACgD\u002fvpvqDEAtLhatd\u002fMMQNMJgWlb\u002fAxAt0BOrUYFDUD4nbMyOQ4NQODxCbUyFw1AQQfJ8DIgDUBUpoOjOSkNQOWk44tGMg1AyQOmaVk7DUAMGZf9cUQNQDjHjgmQTQ1AGcFsULNWDUAN2hSW218NQK9ia58IaQ1AsZFRMjpyDUC1+KEVcHsNQBUFLRGqhA1AVIy17eeNDUA4ZO10KZcNQDwGcnFuoA1AZT7JrrapDUAi5V35AbMNQD+kfB5QvA1AscZQ7KDFDUAdE+Ex9M4NQOSwDL9J2A1A0ReIZKHhDUDbCdrz+uoNQFKXWD9W9A1A9CwmGrP9DUAMrC5YEQcOQEmMJM5wEA5AXgd+UdEZDkAVTnK4MiMOQOXG9tmULA5A3VW8jfc1DkCrrSysWj8OQNqpZw6+SA5A6LFAjiFSDkBGJTwGhVsOQBzQjFHoZA5AmGgRTEtuDkDeFFLSrXcOQE35fcEPgQ5AEc9o93CKDkD7gohS0ZMOQFbc8rEwnQ5A2itb9Y6mDkBbAhD9668OQGLv+KlHuQ5AZEeU3aHCDkCi8fR5+ssOQG49wGFR1Q5A6L4reKbeDkD\u002fMvug+ecOQLNqfsBK8Q5AaD2Pu5n6DkBBgo935gMPQHUQZ9owDQ9AccaByngWD0DEl80uvh8PQK2huO4AKQ9AU0Yv8kAyD0BjTpohfjsPQCkR3WW4RA9AC6NTqO9ND0AiCtHSI1cPQCd5nc9UYA9AWJB0iYJpD0B6pIPrrHIPQL8LaOHTew9AhnAtV\u002feED0DwKUw5F44PQCeap3Qzlw9AP5KM9kugD0C5u6+sYKkPQHYHLIVxsg9ALSKBbn67D0AQ7pFXh8QPQPUBoy+MzQ9AhS1Z5ozWD0CrArhrid8PQBhkILCB6A9AuRhPpHXxD0A9ZFs5ZfoPQDPSWjCoARBAnPkShhsGEED8ZuWWjAoQQF\u002fgC1z7DhBAagvqzmcTEEDDxwzp0RcQQMaLKaQ5HBBAdcMd+p4gEECbMe7kASUQQBFTxl5iKRBAP8T3YcAtEECnqPnoGzIQQI0UaO50NhBAungDbcs6EEAyELBfHz8QQAhQdcFwQxBAFll9jb9HEEC5axS\u002fC0wQQHhdqFFVUBBAkBDIQJxUEEBn7SKI4FgQQNxdiCMiXRBAYErnDmFhEED0mE1GnWUQQN6t58XWaRBAJe7\u002fiQ1uEEDUQ\u002f6OQXIQQOujZ9FydhBACZbdTaF6EEC4vR0BzX4QQHBlAej1ghBAJgt9\u002fxuHEECQ7p9EP4sQQOqgk7RfjxBAVZabTH2TEEDFuBQKmJcQQGz8dOqvmxBAs\u002fVK68SfEECkcD0K16MQQA=="},"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":18},"text":"U.S. Treasury Zero-Coupon Yield Curve"},"legend":{"orientation":"h","yanchor":"bottom","y":1.02,"xanchor":"right","x":1},"xaxis":{"title":{"text":"Maturity (years)"}},"yaxis":{"title":{"text":"Zero Rate (%)"}},"hovermode":"x unified","height":450},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0cc2bd89-f480-41a9-8bc8-37ef265f6a19');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Reading the chart:</strong> Both the spline and Nelson‚ÄìSiegel fit the 4 observed points closely. The Nelson‚ÄìSiegel curve is slightly smoother, while the spline captures local curvature more faithfully. The upward slope reflects current market expectations.</p>
</blockquote>
<hr>
</section>
</section>
<section id="forward-swap-rates" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Forward &amp; Swap Rates</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is a forward rate?
</div>
</div>
<div class="callout-body-container callout-body">
<p>A forward rate <span class="math inline">\(f(T_1, T_2)\)</span> is the rate the market is <em>implicitly quoting today</em> for borrowing or lending between future dates <span class="math inline">\(T_1\)</span> and <span class="math inline">\(T_2\)</span>. It is not a forecast, it is a no-arbitrage implication of the current yield curve.</p>
<p>A <strong>swap rate</strong> is the fixed rate that makes an interest rate swap fair at inception: it equals the weighted average of expected floating rates over the swap‚Äôs life.</p>
</div>
</div>
<section id="forward-rate-derivation" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="forward-rate-derivation"><span class="header-section-number">6.1</span> Forward Rate Derivation</h2>
<p>A forward rate <span class="math inline">\(f(T_1, T_2)\)</span> is the rate agreed upon today for borrowing/lending between future dates <span class="math inline">\(T_1\)</span> and <span class="math inline">\(T_2\)</span>. It is <strong>not a forecast</strong> ‚Äî it is an arbitrage-free implication of the current zero curve.</p>
<p><strong>No-arbitrage condition:</strong> Consider two investment strategies over horizon <span class="math inline">\([0, T_2]\)</span>:</p>
<ol type="1">
<li><strong>Strategy A:</strong> Invest $1 today at the zero rate <span class="math inline">\(r(T_2)\)</span> for <span class="math inline">\(T_2\)</span> years.</li>
<li><strong>Strategy B:</strong> Invest $1 at <span class="math inline">\(r(T_1)\)</span> for <span class="math inline">\(T_1\)</span> years, then roll over at the forward rate <span class="math inline">\(f(T_1, T_2)\)</span> for <span class="math inline">\((T_2 - T_1)\)</span> years.</li>
</ol>
<p>Both strategies must yield the same terminal value to prevent arbitrage:</p>
<p><span class="math display">\[
(1 + r(T_2))^{T_2} = (1 + r(T_1))^{T_1} \cdot (1 + f(T_1, T_2))^{T_2 - T_1}
\]</span></p>
<p>Solving for <span class="math inline">\(f(T_1, T_2)\)</span>:</p>
<p><span class="math display">\[
f(T_1, T_2) = \left( \frac{(1 + r(T_2))^{T_2}}{(1 + r(T_1))^{T_1}} \right)^{\frac{1}{T_2 - T_1}} - 1
\]</span></p>
<p>Using the relationship <span class="math inline">\(DF(T) = (1 + r(T))^{-T}\)</span>, this simplifies to:</p>
<p><span class="math display">\[
f(T_1,T_2) =
\left(\frac{DF(T_1)}{DF(T_2)}\right)^{\!\frac{1}{T_2-T_1}} - 1
\]</span></p>
<p><strong>Economic interpretation:</strong> If the curve is upward sloping (<span class="math inline">\(r(T_2) &gt; r(T_1)\)</span>), forward rates lie <strong>above</strong> spot rates. This reflects the market‚Äôs pricing of term premium and expectations.</p>
<div id="5ed215c3" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>forwards <span class="op">=</span> full_forward_curve(zero_rates)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Implied forward rates:"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (T1, T2), f <span class="kw">in</span> forwards.items():</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  f(</span><span class="sc">{</span>T1<span class="sc">}</span><span class="ss">Y ‚Üí </span><span class="sc">{</span>T2<span class="sc">}</span><span class="ss">Y) = </span><span class="sc">{</span>f<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>s10 <span class="op">=</span> swap_rate(zero_rates, <span class="dv">10</span>, curve_function<span class="op">=</span>spline_curve)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">10-year par swap rate: </span><span class="sc">{</span>s10<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>fig_fwd <span class="op">=</span> plot_forward_rates_interactive(zero_rates)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Implied forward rates:
  f(1Y ‚Üí 2Y) = 3.500%
  f(2Y ‚Üí 5Y) = 3.867%
  f(5Y ‚Üí 10Y) = 4.622%

10-year par swap rate: 4.099%</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="9968600d-d4d8-4685-a2e4-67cb4874b38e" class="plotly-graph-div" style="height:400px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("9968600d-d4d8-4685-a2e4-67cb4874b38e")) {                    Plotly.newPlot(                        "9968600d-d4d8-4685-a2e4-67cb4874b38e",                        [{"marker":{"color":["#457B9D","#2A9D8F","#E9C46A"]},"text":["3.50%","3.87%","4.62%"],"textposition":"outside","x":["1Y‚Äì2Y","2Y‚Äì5Y","5Y‚Äì10Y"],"y":[3.500024177949701,3.867002219168536,4.6220405014465005],"type":"bar"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":18},"text":"Implied Forward Rates"},"yaxis":{"title":{"text":"Forward Rate (%)"},"range":[0,6.008652651880451]},"xaxis":{"title":{"text":"Period"}},"height":400},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('9968600d-d4d8-4685-a2e4-67cb4874b38e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Key insight:</strong> Forward rates are <em>above</em> spot zero rates, consistent with an upward-sloping curve. The market prices in rising rates over the medium term.</p>
</blockquote>
<hr>
</section>
</section>
<section id="bond-pricing-risk-measures" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Bond Pricing &amp; Risk Measures</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° Duration and Convexity, the two essential risk metrics
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Duration</strong> measures how much a bond‚Äôs price falls when rates rise by 1 basis point. A duration of 4.5 means the bond loses roughly 4.5% of its value if rates jump by 100 bps.</p>
<p><strong>Convexity</strong> adds a second-order correction: because the price‚Äìyield relationship is curved (not linear), duration alone underestimates price gains and overestimates losses. Higher convexity is generally desirable.</p>
</div>
</div>
<section id="bond-pricing-from-zero-curve" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="bond-pricing-from-zero-curve"><span class="header-section-number">7.1</span> Bond Pricing from Zero Curve</h2>
<div id="13b121a1" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> bond_price_from_curve(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"5Y bond (3% coupon, face 100) ‚Üí Price = </span><span class="sc">{</span>price<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Bond is trading </span><span class="sc">{</span><span class="st">'at a discount'</span> <span class="cf">if</span> price <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">else</span> <span class="st">'at a premium'</span><span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(market rates </span><span class="sc">{</span><span class="st">'above'</span> <span class="cf">if</span> price <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">else</span> <span class="st">'below'</span><span class="sc">}</span><span class="ss"> coupon rate)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>5Y bond (3% coupon, face 100) ‚Üí Price = 96.9027
Bond is trading at a discount (market rates above coupon rate)</code></pre>
</div>
</div>
</section>
<section id="modified-duration" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="modified-duration"><span class="header-section-number">7.2</span> Modified Duration</h2>
<p>Duration measures <strong>first-order sensitivity</strong> to yield changes. Consider a bond priced from the zero curve. The price is:</p>
<p><span class="math display">\[
P = \sum_{t=1}^{T} CF_t \cdot (1 + r(t))^{-t}
\]</span></p>
<p>where <span class="math inline">\(CF_t\)</span> is the cash flow at time <span class="math inline">\(t\)</span> (coupons plus principal at maturity). Modified duration is the derivative with respect to a <strong>parallel shift</strong> in all rates:</p>
<p><span class="math display">\[
D_{\text{mod}} = -\frac{1}{P}\frac{\partial P}{\partial y}
\]</span></p>
<p>For small rate changes <span class="math inline">\(\Delta y\)</span>, the price change is approximately:</p>
<p><span class="math display">\[
\Delta P \approx -D_{\text{mod}} \cdot P \cdot \Delta y
\]</span></p>
<p><strong>Numerical computation:</strong> We use finite differences. Compute the price under a small upward shock (+1 bp), then:</p>
<p><span class="math display">\[
D_{\text{mod}} \approx -\frac{P(y + \epsilon) - P(y)}{P(y) \cdot \epsilon}, \qquad \epsilon = 0.0001
\]</span></p>
</section>
<section id="convexity" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="convexity"><span class="header-section-number">7.3</span> Convexity</h2>
<p>Convexity captures the <strong>second-order (curvature) effect</strong>. The price‚Äìyield relationship is not linear ‚Äî it‚Äôs convex. Duration alone underestimates gains when rates fall and overestimates losses when rates rise. Convexity is the second derivative:</p>
<p><span class="math display">\[
\mathcal{C} = \frac{1}{P}\frac{\partial^2 P}{\partial y^2}
\]</span></p>
<p><strong>Numerical computation:</strong> Using finite differences with three price evaluations:</p>
<p><span class="math display">\[
\mathcal{C} \approx \frac{P(y + \epsilon) - 2P(y) + P(y - \epsilon)}{P(y) \cdot \epsilon^2}
\]</span></p>
<p>For a rate shock <span class="math inline">\(\Delta y\)</span>, the <strong>Taylor expansion</strong> gives the full price approximation:</p>
<p><span class="math display">\[
\frac{\Delta P}{P} \approx -D_{\text{mod}} \cdot \Delta y + \frac{1}{2}\,\mathcal{C}\cdot (\Delta y)^2
\]</span></p>
<p>The first term is the duration effect (linear). The second term is the convexity adjustment (quadratic). For large rate moves, ignoring convexity can lead to significant pricing errors.</p>
<div id="bed50b58" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dur <span class="op">=</span> bond_duration(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cvx <span class="op">=</span> bond_convexity(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Modified Duration : </span><span class="sc">{</span>dur<span class="sc">:.4f}</span><span class="ss"> years"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Convexity         : </span><span class="sc">{</span>cvx<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>shock <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>price_approx_change <span class="op">=</span> (<span class="op">-</span>dur <span class="op">*</span> shock <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> cvx <span class="op">*</span> shock<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Estimated price change for +100 bps shock: </span><span class="sc">{</span>price_approx_change<span class="sc">:.4f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Modified Duration : 4.5419 years
Convexity         : 25.7583

Estimated price change for +100 bps shock: -4.4131%</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="stress-testing" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Stress Testing</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is stress testing in fixed income?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Stress testing asks: <em>what happens to my portfolio if rates move in an extreme but plausible way?</em> Regulators (Basel, Solvency II) require institutions to demonstrate resilience under predefined shocks. The standard scenarios are parallel shifts (rates move uniformly) and curve reshapings (steepeners, flatteners).</p>
</div>
</div>
<section id="parallel-shift" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="parallel-shift"><span class="header-section-number">8.1</span> Parallel Shift</h2>
<p>A parallel shift moves all rates by the same amount across all maturities.</p>
<div id="e18c851d" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fig_stress <span class="op">=</span> plot_stress_test_interactive(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    maturity<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    coupon_rate<span class="op">=</span><span class="fl">0.03</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    face_value<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    curve<span class="op">=</span>spline_curve,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    shock<span class="op">=</span><span class="fl">0.01</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="9c97da41-4119-4ce3-b9e8-b62538d7b22c" class="plotly-graph-div" style="height:420px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("9c97da41-4119-4ce3-b9e8-b62538d7b22c")) {                    Plotly.newPlot(                        "9c97da41-4119-4ce3-b9e8-b62538d7b22c",                        [{"marker":{"color":["#457B9D","#E63946"]},"text":["96.90","92.62"],"textposition":"outside","width":0.4,"x":["Base Price","+100 bps Shock"],"y":[96.90266342268869,92.62231306686323],"type":"bar"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"annotations":[{"arrowhead":2,"ay":-40,"font":{"color":"#E63946","size":13},"showarrow":true,"text":"Œî = -4.42%","x":1,"y":92.62231306686323}],"title":{"font":{"size":18},"text":"Bond Price Stress Test ‚Äî 5Y Bond"},"yaxis":{"title":{"text":"Price (per 100 face value)"},"range":[89.84364367485733,99.80974332536935]},"height":420},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('9c97da41-4119-4ce3-b9e8-b62538d7b22c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
</section>
<section id="scenario-grid" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="scenario-grid"><span class="header-section-number">8.2</span> Scenario Grid</h2>
<p>We test three scenarios on a mixed portfolio (2Y/5Y/10Y bonds):</p>
<div id="f1aaa3d6" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig_grid <span class="op">=</span> plot_scenario_grid_interactive(portfolio, <span class="dv">100</span>, spline_curve)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="2d33a5cb-7465-47b4-884f-0f0f71b05778" class="plotly-graph-div" style="height:380px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("2d33a5cb-7465-47b4-884f-0f0f71b05778")) {                    Plotly.newPlot(                        "2d33a5cb-7465-47b4-884f-0f0f71b05778",                        [{"marker":{"color":["#457B9D","#E63946","#2A9D8F","#E63946"]},"orientation":"h","text":["97.73","93.42","102.37","95.59"],"textposition":"outside","x":[97.72528193991359,93.4193714451721,102.36645580361349,95.58676447754564],"y":["Base","Parallel +100 bps","Parallel -100 bps","Steepener"],"type":"bar"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"shapes":[{"line":{"color":"grey","dash":"dash"},"type":"line","x0":97.72528193991359,"x1":97.72528193991359,"xref":"x","y0":0,"y1":1,"yref":"y domain"}],"annotations":[{"showarrow":false,"text":"Base","x":97.72528193991359,"xanchor":"center","xref":"x","y":1,"yanchor":"bottom","yref":"y domain"}],"title":{"font":{"size":18},"text":"Portfolio Value ‚Äî Scenario Grid"},"xaxis":{"title":{"text":"Portfolio Value"},"range":[90.61679030181693,104.41378491968577]},"height":380},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2d33a5cb-7465-47b4-884f-0f0f71b05778');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Interpreting the results:</strong> A parallel +100 bps shock is the most severe scenario. The steepener is less damaging because short-end rates are unchanged, the portfolio‚Äôs short-duration bonds act as a partial hedge.</p>
</blockquote>
<hr>
</section>
</section>
<section id="monte-carlo-value-at-risk" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Monte Carlo Value-at-Risk</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° What is Value-at-Risk (VaR)?
</div>
</div>
<div class="callout-body-container callout-body">
<p>VaR answers: <em>what is the maximum loss I should expect to suffer in 95% of scenarios?</em> Here we run 2 000 random interest rate shocks drawn from a normal distribution, reprice the full portfolio under each shock, and read the 95th percentile of the loss distribution.</p>
</div>
</div>
<p>Interest rate shocks are simulated as:</p>
<p><span class="math display">\[
\Delta r \sim \mathcal{N}(0,\, \sigma^2), \qquad \sigma = 100 \text{ bps}
\]</span></p>
<p>Portfolio losses are computed as:</p>
<p><span class="math display">\[
\text{Loss}_i = V_0 - V_{\text{shocked},i}
\]</span></p>
<p><strong>Assumption and limitations:</strong> The normal distribution assumption is a simplification widely used for tractability. However, empirical evidence shows that interest rate changes exhibit <strong>fat tails</strong> (extreme events occur more frequently than normal theory predicts) and <strong>volatility clustering</strong> (large moves tend to follow large moves). During the 2022‚Äì2023 Fed hiking cycle, weekly rate changes exceeding ¬±50 bps occurred multiple times, events the normal model would classify as 5-sigma outliers. More realistic alternatives include Student‚Äôs t-distribution (captures fat tails), GARCH models (time-varying volatility), or empirical bootstrapping from historical shocks. We retain the normal assumption for pedagogical clarity, but acknowledge it underestimates tail risk.</p>
<div id="15fc184c" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>var_95, losses <span class="op">=</span> simulate_var(portfolio, <span class="dv">100</span>, spline_curve, shock_std<span class="op">=</span><span class="fl">0.01</span>, n_sim<span class="op">=</span><span class="dv">2000</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"95% VaR (2 000 simulations, œÉ = 100 bps): </span><span class="sc">{</span>var_95<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Expected loss interpretation: in 95% of scenarios,"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"portfolio loss does not exceed </span><span class="sc">{</span>var_95<span class="sc">:.4f}</span><span class="ss"> per unit of face value."</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>fig_var <span class="op">=</span> plot_var_distribution_interactive(losses, var_95)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>95% VaR (2 000 simulations, œÉ = 100 bps): 7.0880
Expected loss interpretation: in 95% of scenarios,
portfolio loss does not exceed 7.0880 per unit of face value.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="f93d2fba-3337-42b1-a914-346076aea9aa" class="plotly-graph-div" style="height:420px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("f93d2fba-3337-42b1-a914-346076aea9aa")) {                    Plotly.newPlot(                        "f93d2fba-3337-42b1-a914-346076aea9aa",                        [{"marker":{"color":"#457B9D"},"name":"Simulated Losses","nbinsx":60,"opacity":0.75,"x":[2.1787147724241436,-0.6209984717137473,2.8251411574649268,6.434927631636384,-1.0554793617242666,-1.055404702665797,6.658841907781138,3.332752147533597,-2.135151788223922,2.375777500097044,-2.107121647403062,-2.1178202576108163,1.0713891238844866,-9.20191931551956,-8.234650341892646,-2.566300661175106,-4.7030496598504925,1.3877246913299928,-4.199411916489666,-6.660281636196217,6.205294926559844,-1.0173970056068669,0.3009625357721717,-6.722227465166995,-2.4828902906465373,0.4935629401568775,-5.37318697440918,1.655310970658249,-2.745343261410767,-1.3177099996549657,-2.750336328467938,7.734271611984255,-0.06033783541566606,-4.919953983238003,3.5648653912016073,-5.714702247670928,0.9259719837988314,-9.442329909133989,-6.243121761984199,0.8731515214456778,3.2103654763509297,0.7608039725114963,-0.518979528363559,-1.3607026291415565,-6.990588031544107,-3.3051987560635467,-2.0942652071751553,4.542404265027145,1.5157728053882096,-8.429268987481166,1.4306405059613212,-1.7457439266964911,-3.1030270319791953,2.6716029653306634,4.434375572825886,4.020084794901294,-3.8709590236537537,-1.3977744679003337,1.4619436229373406,4.204360828287889,-2.18006912299397,-0.835355508926753,-5.155798743838133,-5.594035791977845,3.5227370038687553,5.764793012790605,-0.3226208301853575,4.320565917749178,1.5941860745599143,-2.9536577343208137,1.593140459223278,6.4948253472439745,-0.16029049401014106,6.600864770144042,-12.959807235272791,3.5621651198993476,0.38767188710659184,-1.351122100028249,0.4085927847700077,-9.587333185149632,-0.9896613515358723,1.574509862605396,6.25437942045518,-2.3614468832191875,-3.7248527967310565,-2.2847718376035715,3.9538382885144046,1.450991570707103,-2.4148545967717183,2.249944192408776,0.4321814172092644,4.175674811662148,-3.221319072258794,-1.482209032264663,-1.7780684016219368,-6.915582326604621,1.3085566104593624,1.1551100251194555,0.02284319434509996,-1.0574518923190368,-6.6755431353766,-1.9095382590105885,-1.5511827216216858,-3.695332949508014,-0.7250244408198085,1.7783614038296065,7.86634065235269,0.7749601607359295,1.139750398314078,-0.33356422572560973,-9.230330195578489,-0.11858519344646368,0.2685098401291981,10.065454838852446,-0.8657290601585146,1.3322699777634455,-0.15529861101222764,-5.4594775027827325,4.895366073642819,3.26729200802977,3.4322543607891447,-4.205937572373273,5.9526582654266065,-6.608296808880667,2.5655480637983317,9.037184221353499,-4.595575943365205,-2.5849979071802096,0.4435971536556167,-2.2927473275774304,-7.352373045001954,0.305562512696568,-4.94219307809864,2.0790746107304017,-4.253998395417128,6.542268049875545,-3.6050796695672176,-1.4565655610294783,3.526907018877125,-5.763846673160813,1.0077181268169966,5.5659750699775685,-7.638749274106587,0.819292107915004,1.1499722599091768,3.3934431065258224,-5.793714739911053,-6.2049253811834575,2.287234442226108,1.3123342003073617,1.1088095881926705,1.5280955886087924,-3.117619300022014,1.0287722612111452,1.295235137590936,-3.2792897962377765,7.786877802947245,2.08011185313714,-5.5700486992500515,2.862874727290304,-4.519259020703075,3.415621675801546,4.960086201518209,-3.7827746866857836,4.153760731854234,1.8161974594940062,3.5628278151354777,7.9075886601289795,-1.1065904858287325,-3.4653038609427256,-4.110884935891804,-3.759615874364769,-0.3454983032529384,1.5050312115237006,1.2235815677315998,3.5843582043170414,0.058065801614802126,6.156690918854963,-1.1943520695374588,11.015894485502557,2.731302398659537,-3.956430677051131,-4.983802565127249,2.1173620031903653,-1.0068839517713428,3.106795554968741,2.0775442868215066,-0.326299224162355,-3.9070399843908774,-7.172504087220048,-2.028964387298913,3.7069849602158627,0.948974237581794,-5.836865577015203,0.7687993688222861,1.6970877672702471,-4.083853943527231,0.6829250995911735,0.25951754306804276,-5.334076417471266,1.5774454931944746,2.4539273758404505,4.649427773070997,4.528685372500391,-6.488193184411159,-4.3422060098748005,2.257546087894653,2.2521739834482446,2.2575994879573926,15.007201189134392,2.497218226521838,4.865562753111675,4.114750210369394,2.8409045106985644,-1.42548049643554,3.297013501388747,-3.555662469280719,-1.067600604042397,-2.208747362397972,0.3647043328465003,9.50784636089746,-8.96431101405419,2.989138760758564,-7.665185742964255,-2.1465285772472384,4.6737493376,0.2865207057478898,-5.017019005244563,-3.283780885135485,2.9608449990969206,-3.3548622875935052,0.9593719074039484,0.20327345428056276,-2.9840665844881897,8.859853663607069,2.76648310474674,-9.783122725437238,0.8273140078539285,-3.031893145306583,3.690356148551828,-3.6490297944506125,-0.5148699273895687,2.2143252880498636,3.746200993736309,-5.614050765897176,-1.513537715258181,-2.160482073762921,-2.9921815542339374,7.394622728511692,1.782396887392295,-5.911299441653554,3.96410629530871,8.776581785885782,4.440442511376446,-7.195189749480889,-2.203512923904114,5.402527552380818,-3.247786281139142,1.9505195768007724,3.3631278292980085,-4.289965916161691,-0.2665614024068219,-16.44461771480782,-4.758831038964075,-1.1392778808724415,-5.8469081175819895,6.870023765926916,-6.749092076867825,-1.9990718054710754,0.5813148095085836,6.107457225798029,-6.777600692230706,4.978816783143358,0.04570508259008932,-4.552109564057048,2.029500799005021,0.8828301308777071,-2.7433711889006247,0.3110703961363157,-1.7468078887898457,0.5050596316002611,2.8866004655290993,6.6858970941434706,-5.797959693123161,8.818169858595695,-9.402975654716386,-0.6820725370219378,2.571792664496712,1.2424029411896669,-2.848570893596502,-0.9372199693575425,-2.2441538246280146,-2.6926567260075274,3.678480628920923,1.5740874853124183,-3.1782544429858177,3.8878310910855447,1.3573934557878857,3.5241515713032356,2.7481947596345435,-3.822308279719195,-2.5564816000302955,3.2476862091636036,2.6660270492205456,-0.09346418915026788,0.5219368838593113,5.446263357194937,-2.7029654409385984,2.395244286839244,-0.9103142158168964,-0.9806193502194134,4.714237230574128,3.57693351468275,3.526875131205415,5.55922450515294,0.09377399330470837,2.970848644046413,-1.4025966275033426,1.4309997987314915,-0.5843442546827902,0.4318195272780514,2.601036177314242,-3.771072429092513,8.662596889416264,-4.670184039460821,-5.68208485047019,4.958098428270674,3.434911653270575,2.72470216878078,2.7427229928391483,-0.054745263031804825,-4.147887890556646,0.33774434719846624,-3.1041542841146708,4.202592754265524,-0.6607101700025027,-3.805670280420614,-1.4534725991902775,1.8168496286175753,-2.5730000170514273,-3.790087599665654,1.078957711309343,1.0845705795876484,-2.3088420836811423,-2.1423916368572407,1.0278775043416886,-6.8385504373640345,-6.636205671221973,-3.298594123217626,-0.9613921330230681,1.3731466260102394,6.244210264810107,3.7122711207446883,-0.7189320188174548,-0.08502742844655131,-4.6533664604202585,-0.08277647449808967,-1.303849542997412,1.424685303073531,-3.813916611982904,2.276080783397262,6.473687756752,-0.48794217810164753,1.7682194427233497,3.0056258951866965,-1.8200177376188407,0.9929238215273273,0.05623789765540721,0.43483637989253054,-3.5565367758753013,0.1094140342857628,2.1842435984336532,6.147095331598493,4.136680211200414,8.895122938448296,-3.5297203821543803,3.773703013462807,0.8135988549019117,9.034699831552373,-3.7239250684648937,-3.8733601498093293,-2.739517896778807,-10.300465816611435,-2.3962324385648373,-3.490835016964766,0.6682087732267377,1.5076620121990487,7.827365953442964,4.099853938686195,-2.634474649168183,-4.153436915763606,2.158065442079689,-6.203821719168118,7.653021075797781,5.045502914447681,-2.133768958163543,-8.174612076604276,5.755221564531226,-0.5139839193995641,5.2840259379897105,-7.57283635550705,-2.739435514081677,0.02342491106183786,0.2095461576902693,-2.0453734785178312,2.7192855369735156,-4.967947367234473,-0.6395803780857392,0.5350819450675885,2.2549814662237253,3.0966867489544256,-5.244823538532799,-7.269200598274708,5.446311842007219,1.4665228485017963,-3.440477627131756,6.5471208130172585,0.5146163238442654,5.04491763177441,0.30091931013072326,8.541183533162993,7.35492148440396,-1.122868303789815,4.187840714052513,2.8152937154587363,5.814859955696818,-4.472333596334735,2.9882525450421866,4.547784268759457,-8.407284667408064,-5.5307106023145565,-9.85668973954985,-1.2160060908818906,3.1218001291717172,6.3523074999596645,0.3301476114934587,6.8549826715427145,-6.500262538133811,-8.124964875786318,-0.24871185320733957,1.6916523344271042,-0.1462634950312065,-10.004228735473433,-0.3995336527245996,-6.125994476992233,2.9186692709899944,1.6157632342118262,-4.352063521665215,-2.340991803969999,-4.927228947529741,-0.2807174559514465,4.119497963113346,-4.572411706852122,2.210277003703382,-2.4171677288423155,-3.6507001840615203,-0.4801504206039624,-4.811269787246488,-2.5260449425730656,-5.6022140456138345,8.171013736076972,0.1573539972776956,-3.210353616594219,0.9484736926024908,-0.5040168342826661,-0.9955564914162949,2.682233995666394,3.290841217809671,-2.4183002470932564,-2.629409348191004,-1.2417496414049367,-11.243299890523545,-7.174228465902033,5.807762517364566,6.91975045919402,-1.123195591298753,2.5214773539135678,1.3746421918039573,12.314368603684002,4.799837160923957,-0.5743038164496426,-4.427245443598636,-7.633511822703767,0.9022134824020753,-3.4776722906814683,-6.70980574727659,-2.960474943113752,-5.035462690043246,7.086440310757439,3.812717135783842,-0.035633420605421406,6.262592844677286,0.3446914115415751,-3.9761078150357747,6.435303907662856,2.3601129571345467,-4.820955032851614,-0.8565623998901088,-4.044505294877624,-6.513655488437351,3.9988041714335196,7.9566375958871305,-6.591975475918957,2.4632887306659796,-2.9795714621316165,-2.216913308852142,-2.706808518889062,-3.989016951315776,0.21640710267352858,-3.8316100361428482,1.1962911377575978,-0.2248936234569925,-1.0772868613631346,-4.197208354744035,-2.6338571059542772,3.281901655294888,2.196808877854309,-4.533084194203866,0.44218213634825076,3.2649853930901713,-7.952283526020423,2.379210897262837,-3.0358261150431076,2.4959685211086793,-3.510364802270786,-8.64354326563388,-7.740151304796967,0.21446300408578622,1.1492698276897642,-4.181670077744485,2.786398608758404,-7.9122738523946765,-0.29598578408024423,-5.666542230215882,-2.9851731232568426,0.2114075879741648,-3.9719548790697417,-1.7433212227004162,4.332012140601208,-2.6344196446079025,3.62009977291342,-5.269474849085967,2.3210152456859845,6.108643657124645,-12.154571457565694,-3.6697863894316782,2.5236823619525097,-0.9141827841706629,1.6355306303345714,-2.7609911497819297,0.38564194077274294,-0.6996650345244007,4.997746580933864,1.1260322259347362,1.4895693531365026,-1.8691125048430166,-2.219142148527439,-1.9645044885123042,1.7367323128475647,-1.9111024568323245,1.2808183662743744,8.597446911468168,3.768694350809696,-1.4747052256879556,5.134588771998821,-1.8515939183608197,-9.850903381210273,-4.68016156971656,-8.982491800510928,-1.5915381028224544,0.08223887305548772,7.044180222103279,1.4430400119688471,-0.9870660105990368,3.593695293817021,-10.760841958275634,1.0435286246712536,3.3472281141936406,-6.990909369688993,4.899189242213268,1.4934631577814343,-1.8848351993861172,2.761636156724748,9.341716617281534,0.8070944836826612,1.0988443395710732,-2.088354154269396,-3.921574339444277,3.5976032078754514,-3.9513118099167457,0.31891122651508397,-2.1730431053156423,2.1023061860312424,1.4723983353645878,4.461442455409767,-2.323110214300087,-1.2181404608999884,-4.538899227891008,-2.0186988521056435,1.662272577412324,3.2886488108876364,-4.267130439573151,3.762332931814825,5.762358845650951,1.8190307997295463,7.829798926369605,-3.5602290089280473,-5.8315410114146715,-8.509485505605156,6.327053547379933,2.853564154673805,-0.2488777388425376,1.2379258077522337,-5.248945188360736,10.000122851256833,0.574591695125477,0.48679263121682936,3.156627312439312,2.111055002250552,0.9920078782643742,-3.639322787666927,2.069912608840184,7.850149504067673,5.721038840514424,6.7143924566715185,-2.3286790317112747,-4.591089549513114,-0.5646926151381564,0.24846684602300684,4.695347542761212,-8.069427760353719,6.460961383493554,-0.7102021117893287,-1.938303957735883,-4.6995434350883585,-7.878482864198617,3.5674951928507,0.32669582141460296,-6.054447428126267,-6.079676329761142,-1.519418842301988,7.014883924973972,-1.1712683976127636,-7.113833415826932,-1.1082059854007582,-1.2311308248938673,-13.382995755916099,-0.24309093040649543,-1.0408435830678542,3.031351841908233,7.721314881449231,4.828577618344838,-1.2136436306090417,-5.15672658517785,10.474927197177237,0.26400927912179384,0.06220536238164698,-0.10789150020181637,0.8785382249037497,-0.6485272046607378,-2.6193481006991846,-2.494419110853059,-0.14652562177911932,-2.478430812727069,-3.2721897524992727,0.4736531691683723,-1.1502492135796416,6.358850134460695,-13.130789520806019,4.684284878526171,5.31773019832427,-10.03537939181659,-1.5510592862908226,-1.6830318267848696,-6.636444004309368,-3.5793114578773526,-5.176410330990251,7.3428625673237065,4.038421698348486,5.42141882317614,3.139290994586972,-5.266285874185613,-2.3904925641693495,2.147104231967745,-5.720998039025986,3.102549627453314,-1.083552894318828,-1.6985640163225924,3.093911323320569,1.9524382804783755,-1.6349215636137302,4.963097115381203,-5.033111961732644,2.689783889866632,2.592248339188572,-1.399302249545201,1.439576271287521,-5.863271106108371,3.989832856675548,-0.8319264559317503,-2.3821388618700183,4.5088756262830145,-3.232112165718476,-6.641167055394519,-7.382381561596034,2.6474072900711008,-6.007487545933358,7.352774684224414,-10.080124887327187,7.123187794935561,0.9354458248137547,-0.43369785047755727,-2.4853873133302358,1.7570501485066927,-0.16839412283647448,4.732872280148811,0.5082064136095568,0.6678021945834445,-1.6470712511754186,-0.2549843676820416,1.3595865864065786,-8.159507697536029,-6.342058050559004,3.230652417987372,0.7585857897183104,-0.8277638659514253,0.08230827383310668,1.5330306273933871,-2.461372022730771,-3.5816242044236617,0.8686781800550563,-4.537018016163685,1.7965754641406022,-8.120899731976479,4.426742493553803,2.074783169930768,1.1330850972405386,4.234053075793511,7.0008655204390635,4.365497762172893,-8.828420654913387,-6.003289705682022,-2.8584955587243854,0.11646420765596588,2.2688267008017533,-3.3330386949387645,0.8286907180870315,-3.4730937070368384,-2.796227477529797,-6.632213664528123,-4.272247397262646,-6.359384112616823,-4.524991524510725,4.528023115911566,-4.397751025454625,10.693089544697258,2.164089753558116,0.820183449809889,-3.962153080924921,3.0487587529556635,-2.628567449612035,0.5426719754319294,10.425732466636092,-0.43075802778032823,4.921843371618877,-3.2266118768012007,-0.15653827029963452,7.415598889245999,-2.868559655556396,7.57872476392015,3.0803141462726273,-2.5671362632029684,2.7600414104133506,4.191929433965257,2.7148492158102755,-7.450820965154335,-3.3396157298939357,-1.1162879145618518,-0.3335081212486557,2.709994903703574,0.7887322590760704,-6.278516151434857,1.674857420809147,2.6669470526606887,2.4496673070595563,4.640064195757688,3.612666891562853,2.0168798662446648,-0.31433570227717667,-7.90943775914721,1.8891008918246541,0.9207990918899753,1.2012038962228502,-5.989362386364164,-5.033079043779011,4.526002506622788,-0.176999816730941,2.9689277766578783,0.1263959128256147,0.1328060575538359,4.049281166843514,-2.3511077457180107,0.4279372501280534,-2.1018360866599295,-1.9734513346431442,-1.3975903831696854,0.9843168668768243,-2.1780975196152923,5.357123494903163,-4.135230372588708,-0.8408502081310729,-1.9976241848097374,6.130369713085614,0.8718022232448561,4.437873321030267,-7.025796142532371,1.1813729024683113,3.846150014919047,0.36652437085980694,4.5769252008329175,-2.356885589080889,5.9790517577436475,9.448353473527447,-1.6435186708696676,-2.0242861427922634,6.156090457925856,6.660271069090939,-2.3827756365477057,-1.9074236934935556,-1.2724696049885296,-6.323569957575543,-4.250299007841619,-4.661135325880295,-3.5318511783666082,-0.1551781844406861,1.0373829302508284,6.544524309218275,-4.633240920013648,4.240829697616334,-0.9638516664839045,-0.22142054483539653,2.9405443351525093,-5.235480643368419,1.6844630921445116,0.7391142114727955,2.160357232064527,1.278167692657746,10.035798750609288,-2.919047921055821,-2.420606034551952,-2.8506362283055893,-2.5345606914614365,-2.917393570983691,5.084701522666222,6.023958194875121,-2.6057456496200473,-3.8382976000883104,2.069684839116576,-2.519400840457436,2.762275325174002,0.899834381066924,-7.1770021760572575,6.532584908275439,7.513878845666127,-2.802174466532591,-1.757792640725853,1.2637220748622013,1.475861587668362,2.8713444554102097,8.34665555292601,-0.7958965748867683,-3.6764401369140813,-6.496380439294981,-3.357522573814876,-0.1481995024820293,7.508710778885302,-2.358385507505716,0.991585739104579,-0.07342477705894623,5.082151209460065,10.302676931023669,-2.420009906374773,-2.227640413297067,4.488829315865573,2.9705875270058044,7.712542529526942,2.5530196920107215,-1.6272360713761884,2.581788796182522,4.755109562677447,3.556194536132722,2.224164440743266,4.581856249152722,5.003948931852079,5.869464926335965,2.829489722180199,-0.7514075554294948,0.6519474263989622,5.156231642330695,-3.7649645399684033,1.6247838412844686,-1.783732157926849,0.1282972613769573,5.449462628416924,0.8477763260828368,0.20712378544889987,-6.399863368864956,3.243290178099741,2.815754623564928,8.933549244658053,-1.3912161094297204,0.9712046150445275,1.1039454342827781,6.651843183055448,-0.4273181272601789,1.2337815200711901,2.6554641583784075,0.8279961257737654,-2.02858852926407,0.8609489991259949,4.610571770355406,-4.769106274012017,0.5911768734529659,-3.212215804371212,5.109370136581134,-7.2143413588769505,-2.5506128235722088,1.6618876173168644,6.604369902649012,-0.2945060693650703,-2.5332673175027054,7.846773918002526,-6.838198995877249,-10.695586371422905,1.9340698109379844,-2.286150878702813,-4.743598329888741,3.0828766027570964,1.0794556956335555,-2.574650828756205,-6.006872154485464,3.774275460410209,2.8358385485787494,-0.4447829190556405,7.712268153539455,-4.9798882348233775,-7.226076481080966,-3.173539216350278,-0.20403264892333084,1.0774318997736287,-1.0876961478916343,1.5525042186619373,-5.8653636964394025,6.117464751459011,-0.36819516869283575,4.790463355952966,1.511883978271797,2.0064005027603713,2.4924082611785536,1.9673283569190545,2.8039938552620782,5.655190886915392,0.8716542552262041,3.0856203501949295,-0.4023029981063786,6.1028127032126775,-3.100536176371847,7.533698875129957,-0.17970125224491085,-6.752249524808647,0.5696496682049457,-3.1224497946592464,3.64088803533825,-2.9888711363499993,-2.027432463904674,-9.079228714405204,-2.055732057977636,-11.896875812152032,-7.5197488533343915,3.303117243436219,3.4102084429426753,1.8710942302995335,-4.4822016548049675,-0.21356222082904708,-0.01609877534470172,-5.409139721262193,6.3564718810303305,3.7948130141195975,-0.9955318427686706,0.12000838204237141,0.9238570264139838,-9.869765721557826,-1.114734537545587,-3.1268368351830844,-4.6489827176765885,-1.2693465939510133,7.520961097076977,2.795986078717192,-2.607764082732899,2.5044642150097047,5.938802767410536,3.992363806680501,0.2658416851466825,-2.96218222994284,3.0399083004243863,1.732537895426006,3.8694104751005796,2.7718224064149553,4.511122330842042,-2.4403198864851703,5.607546174913978,0.8764023305734838,8.596909909683319,-3.1607339620807693,7.278773856109282,0.8777723006102178,-2.983210767894974,-2.2018991363834886,-1.4487189252530044,1.8655031930591264,2.291076068171151,-2.619525385312926,-0.10891882392915875,8.853461376371385,7.245649366549216,1.9181093066499528,0.16956277404185016,0.533911573301765,2.6794649067579286,-4.751128935162953,-1.1611781417072535,-7.948115568400823,1.7574275004699302,2.8230437208116115,-2.198658278154113,6.638052167115063,-5.738836572017519,-6.919877942908343,0.9945026807923085,4.500975444121323,7.073755267653567,-2.0861495213316203,4.631402889767415,-0.1723093880760871,-0.7763395191384319,3.8211710151635145,2.844869995398412,-7.481891392814845,6.2489553550874035,5.861122160765461,-2.861981062026487,1.742595016927666,2.1671573185474102,1.153438324313612,-2.510467662962597,-3.0781152371876743,-0.11428828511678546,5.018016376440329,2.380240523070924,-1.6792341751106505,3.3507448577880297,-14.222572345364355,4.919760181348053,-8.310116664925673,-1.6416928997736164,-5.220632095441545,-6.077717473736939,4.969235460469051,-2.12694422737826,1.528337985300979,-0.21001636609651086,2.0939458880408637,0.3422640107358461,-6.020110871014808,4.290420118119059,-2.2476580794021714,-7.382143707848542,-1.9439984676757263,6.345918790247751,3.681079918262796,-1.5784119318245047,-1.5811896898584337,-1.4546133603170261,8.602616801809361,1.6824034929267242,1.8909331090365527,4.431411406968763,1.0574637891105567,-1.1687661682737485,-0.8838140438355424,-0.3207841140087311,-0.1665459923867303,3.1645131592038496,0.2316496442119984,3.185717660187535,-0.36174591549688273,0.3503190286918283,-9.642674949901064,3.957702036705882,1.5282709084648758,4.297654216527647,-14.48881928379052,8.6472142122782,-0.626982291547435,4.752966106314773,-4.833812977638033,2.67628869448599,-4.8991621357018005,-2.8535794492149336,7.97455685322943,-0.8581203342649673,0.963655069891459,3.764267299113783,2.1742699986356655,0.6683197503244145,1.6086449097220736,9.841644552554484,-0.25800514354007476,0.8918068529797267,4.515676240274715,4.742029140303984,5.076573665288578,2.7869855722808126,-5.334245100655892,6.8740658248458,-5.350525834076095,1.3370233384755466,-3.4678566740221726,-0.28726865564284765,1.451040838584646,1.418747223382283,1.85578311538859,6.795882938277188,1.992498063042646,-1.1009858982190508,4.156718557409491,5.0865590033719315,-5.747871630902381,2.61062304786185,3.05241830485528,-1.3445244403555847,5.843426703773289,-0.6742568032050826,0.5584611616680775,-0.7783516639312467,0.06956853266619589,-5.106932277526468,-6.798482609818663,6.719630780305337,-3.907838544773753,-4.599699083638441,-10.45575894318982,-2.92477643354259,-6.217935150921434,6.908061628989202,4.346625074905887,-3.1558508829370595,9.272576965664456,4.230208356382505,-1.4692465303218114,-12.304792819436457,9.418297287261211,-6.547284451514372,-7.830550442161311,4.399473483403426,9.977693567045932,5.877992770896483,2.4673156095573034,2.5993149206852024,3.6944754719201427,3.2968419178685053,1.2432760481406149,0.4637713966434944,-0.28033152473214784,-3.466384338337406,-1.2674061179105962,-8.071930407128846,-0.4410187109535144,-4.5862075810730545,-5.142457815641492,0.798401316671189,5.9091647167493875,3.9660039640892535,-7.4522104996108425,-4.591201843631751,4.059646739518186,-4.556820553597092,-1.0122020828923013,2.407917556920438,-4.488780533190322,0.4689777622047444,-6.271993536324075,-2.7487514395808432,1.4118752187360712,-7.565601052435042,1.9360599849227214,-0.08780880373309685,2.4183718310857927,0.9921401787789819,5.796719142731163,0.5569032945487322,-1.9499532833599034,0.5439457019086973,2.3789441648558665,0.21791379939686806,0.18109323437226976,-3.221029758066834,-3.0371280500595788,-6.612046362389393,7.332280925972228,-5.827653903189187,-3.1782337387378874,-3.298419789213497,3.868286469309055,-1.3325823944455237,5.324481258227905,-3.0868930935747443,1.2336617793259421,-3.8525343056466284,8.864455454670022,-5.551928706693317,1.368401726214998,2.765877271913368,1.82060860485079,-0.8336731368673895,-0.5828898096985142,0.19543420240975706,-0.6604599787850134,4.1558531075152985,9.113511591071088,-2.5439483489041237,-6.449171416976995,-0.3957643970331617,10.498440593503489,-3.7019671594138828,6.896584937900542,7.049170160313096,-2.5257604686581203,2.4890498709619635,6.854115042231669,-1.7183618566973138,-0.916609910095346,-2.6567736194988214,-4.7123408257971136,-2.9731655881574,-5.729884958666574,0.15209491620511528,-3.542154160557118,1.0355001378289188,-7.378691068106136,1.4602732616294816,3.611015558630797,-9.61942736529032,1.6481791906334848,5.242637297077664,-5.659805977463705,7.0289136727387955,1.843218232229134,-3.235260857062414,-0.24970513993247323,2.443394835375571,0.33863660806902374,2.3594517290950847,-4.259983496151619,0.7519480143482156,-6.667301261521985,-0.4990515272654079,-4.179713212790389,-3.3792465460225003,5.276999809199097,4.683474125282146,2.660766056636362,-5.08769543549225,-1.4306929951719098,5.183150635524768,0.6298609067988821,9.525465629804813,1.7318109416725207,0.8519608615361136,-1.397335839630344,0.5937038715291578,-0.6851671986277239,3.081826345336893,4.125991055991747,-3.6180524972645145,-6.258184845465351,-8.80440925220735,2.227250388285981,-5.141375803733737,-10.453125882477494,1.7112444566811007,10.176423255752766,-0.027131776420034726,3.6318506924705645,0.36450546926896266,-0.4434945540411235,3.969175419326632,-1.311228510954379,1.1828709939187974,1.4202329099589974,-3.0615106368255027,4.272886080383202,-0.7868981627540421,-3.474807311936857,2.3498098158574123,-4.153691879781675,0.12578409864559603,-0.040758764358045596,4.661155517205671,2.083843818794435,-0.11192860999673826,3.5447760994761666,5.901928334392494,2.4411805840971255,0.04623887458539855,-6.162353102604996,-4.9558032261825815,-1.3795405138555026,-2.7868436401249284,-0.8413017930128746,0.2525825579436969,2.3205366647365935,-0.3158317593573088,2.1347263136592716,0.2873851116415409,-9.524392636039678,-4.349451683205629,-0.6472947745750588,-5.660069129024308,2.6214287450014098,6.465753237856617,5.206281802250388,-0.9613726967027674,6.305769353071128,0.6605811572326274,-1.5253821534578833,-2.805047696855169,-1.3669461742465927,-1.7599790911907576,0.7566041016847151,0.7131689597749045,0.013608450579198461,1.9207669698387946,5.091369735789186,4.096232442296696,-7.022481777038152,-12.600749291608636,4.032758665337624,-6.434671361936282,-1.0128030643218011,-5.466484613405029,-8.628661165149268,2.3710686455229393,3.2977987188592977,-2.632639400055737,-12.80300796195877,-2.4915579398304857,1.7252422627124275,-6.992536318461106,0.8136778066352548,-0.0684456224766592,2.5331807694564077,0.5319146266211305,-4.511501284708544,5.1156065398371595,-0.7125608883612387,-0.1221251166154218,-4.320349241920894,-2.0140279627660362,-4.088369981413166,-0.7777823832113597,7.183305436839348,-6.459577183386685,-7.669458544176493,6.2274331815080615,-0.942672948480876,-3.0661269015764248,4.471225516288527,-2.768615960619769,7.6317353110319885,2.9537427579474524,-2.2205568107678886,8.91086629314276,-2.769080785345821,3.2257109790637486,1.322419040082977,5.54405856645117,6.588391335927426,0.14282723190395075,-3.4637983205774674,2.0202996481415028,-3.106757964107004,8.358925755389336,0.6069487865785703,-1.6549212094573136,0.8194967931596011,-6.3368147223985005,-4.504503568202807,5.131318080449461,-3.008918392448777,-4.8676895585383875,2.3504233206583223,5.071146250853957,3.1277769312466006,4.28951071805848,-3.4797745279273187,-6.707599782228371,6.348214199955336,-1.4593961275067926,-1.1313769893501018,5.651309072084899,2.434406669189812,2.0026629809282497,8.94021371095431,-2.94614522000559,4.005738953241419,0.25419848670829026,1.1881262582089818,6.456642643677611,2.2265811068235024,2.3574776161102164,4.605931707328807,-1.6532273488585787,-3.870921621532517,-4.857523357465183,-9.47705380192329,8.52373602363646,-5.140607024838246,-0.9968468098118706,-1.249785722818089,1.3578614645452234,3.5362436797499015,3.7240667847127042,-2.6632937527495386,-0.7514239952839006,1.249350829226529,-1.1216253731122805,6.770621710947594,2.153998344549777,3.1951850780394864,2.8897928677838394,5.021067661872394,0.80337116190816,-6.088321020391035,1.7594434080243104,-2.982923956601141,-2.4095371958896123,2.563439131151199,5.285929008130452,0.09496837402069502,1.3640893877346798,7.145893548694573,1.066083362177281,10.579731629321785,2.4741723290288036,-8.417626390878624,3.2732432473379447,1.679028957497522,5.495384126879912,2.9335829619243015,-0.6218638781704442,-5.731640316586791,-0.941309370738125,-3.9247958987082114,-2.6513701424487266,2.5729096830313267,7.018372984595601,1.7376841156302163,-5.59245258177269,1.953905121032065,5.115851851381237,-2.788110122268776,-0.6018267772598307,0.06559260165742842,-3.6128787818188783,2.827661291677387,-0.5428712180540032,1.8454416590060987,-4.1012206030150935,-1.987128106201098,3.1422945111243763,-1.6894294602360702,7.243369742901791,-1.812722264547503,0.9955260093422993,4.02554992467465,-6.690449610311859,-8.417861803519159,-7.226734718386183,5.384919653299676,-2.517701111382607,10.4187424505662,-2.5754386207424034,0.8189282992865969,6.511072603680347,8.330799881456414,8.544086491800684,5.163821008903128,4.40565332347937,2.5897930889388334,3.378846704653597,-2.5145689980717805,-3.7709688057622515,-0.015079410918886538,-0.7652839114160344,-2.059993372623822,3.0321200969714255,4.120175978569364,0.39370793813323246,6.252921121571418,-5.3278333482134315,-0.871615636908885,-3.290943463134667,-8.960555727754283,-0.3705757511326908,-0.5464755418031331,6.396655519285119,2.7532376056547463,-4.75786130714134,7.741346710624242,5.215556833010012,2.545188448146803,-1.0206137423419221,-4.445976365065718,-1.6865511436435128,4.6729168093277025,7.860117537801187,6.5155931721186136,-2.224905120846742,-5.220376902327487,0.6261884300007665,-8.45687930417958,1.4266443449334645,-0.6631733127208292,-2.119239816296897,-7.574226104356242,2.251374803668412,-2.428530732124642,-5.465526561803571,-14.354805758368329,-0.12306699047429959,7.421290225580506,6.984201853115252,-2.077879994868624,-2.752699690682931,2.0582897665590423,-4.633392240116038,1.3333383372776382,3.3270355920171966,5.239635070295861,-0.44918651184657676,-0.9170336219181792,-4.055794331725394,-3.812248992430753,-1.0205900776571042,1.6190987930682326,3.9462503851787005,-3.6996139459443214,6.313624279492274,-1.2238342921964573,-0.09554829764908845,-3.434450144528455,-11.898819420622274,3.8227839079712425,3.203502115844074,-1.2703837412596926,0.29857304328673706,2.261432796949279,-7.412157023115029,-2.4115645299794437,3.4458723308796806,-5.878878678480433,1.297357204746902,-6.383640252969656,2.048174252856768,-0.15946365793179496,-7.677395270153966,4.985275672174637,-3.3748143053416157,-3.733207611215036,0.8894747172587074,4.919233443755942,-4.717480518949131,0.27495750464534296,1.8856316134371554,3.018195079558552,0.7831789584580662,-1.66275816620535,-3.8156256013376577,0.38366242903687464,-4.989843743983229,-14.629262746064214,1.9191305835681192,3.905946210634042,-11.569473740567432,-4.688092881213308,2.703518935096568,8.528686905548028,0.09283655761988996,-3.343702719874173,-0.822840098725564,5.84007470146021,-2.9576191737488386,-3.6806869908273683,-2.196605801777153,-4.416621659439514,0.5455962725891226,6.839377183586805,1.4262586030966276,-1.1383004250402848,-1.3182467386711636,-7.415403542270738,3.8188688754681976,-0.348803712051037,-0.8118943793824371,12.721034738289845,1.320060995631465,-3.4561039816031496,-1.9358886349129136,4.9184469649641045,0.5039656237249233,-6.789643394030847,3.96981167649939,-3.061762671908369,7.816179933881813,4.637042386486755,-2.0326933729358103,5.459886862382831,0.30241758279005637,3.6917835266094414,2.1271040411344586,-3.9049579425182657,-2.946293451192915,4.4300758023444615,-1.5147936400165207,-1.8312000811290403,-4.425238251420311,1.8630491572069872,8.54800989514709,-4.967523356938855,0.10811744103158105,5.99061960109799,-0.35691284701120196,1.9874764100580506,-4.9426280539093455,1.8834271655947816,-0.8420855453308462,4.24667596813525,5.078029504454662,10.534911809867694,2.5346429159552457,1.4381080168042075,0.862245038582401,-1.5991214997828536,1.4934084215175432,-1.3346460988970534,0.7479778776100119,5.6083709720060995,-4.672716618402049,4.883276699859707,5.606415192191662,-0.5298887613809171,-10.289733817171083,-2.778936544925301,5.524791484191667,-0.10226504946952275,-4.637810747045108,-2.2987774762899136,3.6407892957370365,2.3936836414872005,-1.077214313751199,-1.6618237744421123,-1.7764577043572132,-4.268303653099551,6.80248600398393,-1.457750983833435,5.199735117121037,6.428083013620451,4.298902298297719,-1.9601753143084721,1.7769707369391483,-0.10820716064890235,-4.178728636382189,1.4318412015644384,-5.510091768811648,5.07922991490463,-2.1126723493518114,0.892073618677955,1.2524477305545787,-1.16814121607095,2.5648496542635684,-2.1602891743376915,3.769417215360548,-6.331138816538456,0.5620159471711332,8.071133708528322,-4.642770852535861,-3.106897170289443,2.252698174290586,0.7970242546673347,1.5463007263116992,2.146296768596983,2.7699031593952412,4.759209932356356,1.8033617551010366,-1.087794410728776,2.931000504102556,7.919594827844492,-0.5955832976997613,-4.518526053409218,4.74842941422213,-0.540314808062746,-10.557463237384823,3.669333253967338,-2.440752419175638,-0.40589090812080997,1.4650684510767036,0.8451361382575016,3.0875194588158763,-1.9780227788489242,2.2492490933765765,-1.1710648560248416,3.211819946978096,2.6873591847784866,-4.330759654901399,4.661512344306004,-2.4437078344551963,3.503939779938875,1.618758866823427,7.6792792468060185,-1.0068984784934543,-1.5814607516128802,-0.08683246095624497,-1.3701920713354667,3.469779930345126,-7.683353398521987,-4.900453660472024,-4.968831550042651,4.099369895606131,7.17899117257204,-0.46852566366969484,-0.7591162844193633,0.3121819392458889,4.97354677059306,-4.291991796337399,1.0556195811232811,4.202916520915579,2.1975706647524333,0.8410920206718657,4.310250367412792,-13.417922815187879,2.9535279970274644,-2.9956855431832707,-8.775762096417438,2.2410639026704757,5.835158216382553,-0.617315511347627,4.110057599929291,6.790197279465275,5.597493700845618,6.899941941440517,3.225846786412802,0.33609639347008624,-7.610885634214256,-1.109659838923605,-3.890144525824553,8.96286079739302,-0.7910907769917799,0.5479625661300247,2.414064118498814,0.19450330313595998,7.117645229988511,-2.848335996200717,0.8632277155573433,-3.4120395528447034,-6.2027808653409835,-2.7974033082634833,-0.16571511493505398,-1.949476478918072,-3.175953974813936,-6.630504727745503,-0.3724860439373998,-7.121737541825979,3.3016026284395963,0.3672160625955314,-6.885800993985086,-1.3977593815932323,-3.457831913064794,1.4092251791806376,5.700931071763094,-9.005081125917243,0.5117434161412575,-0.7198105170234612,2.925757353948157,0.9450293497538667,-3.4569471501578164,-1.442799298824184,-3.6656606382774015,4.620372925119241,0.09514713502342431,7.924680888459591,-0.2716576934687964,-3.2512616614412195,-7.16682314888557,-8.634606284821729,-7.5209242437373405,1.181707454909926,2.230406724292422,-7.5060758790410915,3.8687628316666576,-2.1980771489838133,0.6522979912869289,6.789968613631942,3.8762921512946065,-1.2120112006853816,-4.118904248873363,-10.447458710066925,-3.301939302985673,-0.9508734139892567,-4.579410146192927,-0.5893704341635839,0.3423972493072398,-1.0132146826482682,-2.976568000483539,0.7488324873683041,1.942397780261146,-5.078406691981314,5.985433399032672,-0.4421373002317921,0.08416303563318195,3.0822745893777324,1.0329983502661406,4.1111487036494765,1.2692273021920784,-2.8005304622747076,1.5936098181089733,-5.337760170872173,0.4830916709889408,-0.14866094565971366,-0.937195492591897,-0.5771004896499363,-9.03952532560622,-2.5031081468412424,0.4134034221134044,0.710000893106141,-4.774708276700764,5.397631528628139,-3.9994359881516317,4.179052175830918,1.878611500643899,-2.9588536479667766,7.4332882400182,-5.581462717171078,3.969499662269797,4.308326369985934,-3.073399964326896,5.9110314352214175,-1.1277960140928798,1.2760906018139337,1.151896193207051,-0.603142759058386,3.5155119112742312,3.4426038789127347,-8.355135000708756,5.554604925367059,-7.917204087433703,4.4407775324742715,4.829153531000912,-5.081160392748501,-1.8642149402025154,-5.152735890596816,-0.9680844554190031,-1.3923869762534054,3.3843262005060666,5.578817109000639,5.924005671578783,-2.565743576658562,-0.9422108688570887,-8.023547356582753,-3.712392556744291,4.1598984546853615,6.803307687812634,-5.780944892292396,-2.7071371512141837,-0.11810114684993778,1.2387682486027671,-3.7301249944645605,1.8650490787265994,-2.15536063332587,-0.06460957621638386,2.3917561384678265,0.0286886096674408,-1.9821761170959604,-0.49176978534968896,-0.3961283209503108,-1.676462349531576,-1.1676450251339787,6.7360846707069015,2.454505550694975,-1.335006591134274,3.0345253832674928,-1.5104140284642966,5.019637077144765,1.6289952448031784,-0.48137459303912067,1.9673645085430564,-7.454102059828756,-5.255167046237588,-5.582872528858232,0.6352815833368624,7.265209630321365,9.19242344629204,2.7840920068087485,2.1964958969810766,-8.62392949332289,-2.474935106861494,-3.626561131814057,-2.8398986772889145,-0.7560487491821135,-2.147263399466894,-9.544321693130755,3.2502925067044686,-4.9927712798766635,1.059472650057046,8.592388042256744,-4.253808495180223,-12.472288781076898,-1.291730204148834,4.723227172097168,8.146337222271669,-5.757396711145006,2.178650489545376,-2.1158799044291356,-0.475277087807612,10.73719075712232,-7.112968488116394,1.1230458846064835,2.0536251188553223,4.66070513897985,0.43619832598831465,1.3606728449377812,-1.7759534252417808,1.1904676690012508,-1.553373215742866,2.713833594945328,-1.6746214623501743,1.6614033350305988,-0.13089351171309715,4.826461563334917,-0.2300767723431676,-8.480376519337995,5.382222856285281,-4.188444137355262,-2.9942333938812595,-2.7220768066603256,5.8383052556399235,-10.362438475109315,12.524353284619849,4.538002346431753,0.9891732332190912,-0.24577892279533842,1.2623604609389645,2.2837139816597727,2.8146107941759624,2.4317250694790147,0.3989177636398722,-0.8882969125247655,-0.679759529677014,-0.8772775677306726,4.858186484822468,2.5941954385999537,-14.7359968204416,2.860096834906969,0.8637946238608265,-0.08365175206110109,-1.7615508461787783,4.818496414826257,4.087788186244367,-3.5559109397384105,1.7913723476819712,-4.504708914326599,-6.497863992903078,-2.867389280777431,3.7321139163850177,4.11110045938814,2.249161458372427,3.153787355056579,2.2624606783298447,-2.9365929856194697,1.8990712515917068,3.4717487135965968,3.2772553862607907,5.084279410922136,3.0826536415048906,1.549861557592493,4.596203532386099,-0.11861825086941735,-4.074382304737597,-0.7330808282369077,-3.4235345991173034],"type":"histogram"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"shapes":[{"line":{"color":"#E63946","dash":"dash","width":2.5},"type":"line","x0":7.088000556718991,"x1":7.088000556718991,"xref":"x","y0":0,"y1":1,"yref":"y domain"}],"annotations":[{"font":{"color":"#E63946","size":13},"showarrow":false,"text":"VaR 95% = 7.09","x":7.088000556718991,"xanchor":"left","xref":"x","y":1,"yanchor":"top","yref":"y domain"}],"title":{"font":{"size":18},"text":"Monte Carlo VaR ‚Äî Loss Distribution (2 000 simulations)"},"xaxis":{"title":{"text":"Portfolio Loss"}},"yaxis":{"title":{"text":"Frequency"}},"height":420},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f93d2fba-3337-42b1-a914-346076aea9aa');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Reading the histogram:</strong> The loss distribution is approximately symmetric and bell-shaped, consistent with normally distributed rate shocks. The red dashed line marks the 95% VaR threshold.</p>
</blockquote>
<hr>
</section>
<section id="principal-component-analysis" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Principal Component Analysis</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° Why PCA on yield curves?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Yield curve movements across maturities are highly correlated, when 2Y rates move, 5Y rates usually move too. PCA decomposes this complexity into a small number of <strong>independent factors</strong> that explain most of the variance. Decades of empirical research show that three factors capture 95‚Äì99% of yield curve variation: <strong>level, slope, and curvature</strong>.</p>
</div>
</div>
<section id="mathematical-framework" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="mathematical-framework"><span class="header-section-number">10.1</span> Mathematical Framework</h2>
<p>We observe daily yield changes across the four maturities over 5 years (~1 250 trading days). Let <span class="math inline">\(\Delta r_t\)</span> denote the vector of rate changes on day <span class="math inline">\(t\)</span>. We compute the <strong>covariance matrix</strong> <span class="math inline">\(\mathbf{\Sigma}\)</span> of these changes, which captures how different maturities move together.</p>
<p>PCA decomposes this covariance matrix into orthogonal factors:</p>
<p><span class="math display">\[
\mathbf{\Sigma} = \mathbf{V} \mathbf{\Lambda} \mathbf{V}^\top
\]</span></p>
<p>where <span class="math inline">\(\mathbf{V}\)</span> contains the <strong>eigenvectors</strong> (principal components) and <span class="math inline">\(\mathbf{\Lambda}\)</span> contains the <strong>eigenvalues</strong> (variance explained by each component).</p>
<p><strong>What this means in practice:</strong></p>
<ul>
<li>Each eigenvector is a pattern of co-movement. The first eigenvector (PC1) has all positive entries, meaning all rates move in the same direction ‚Äî this is the <strong>level factor</strong>.</li>
<li>The eigenvalues tell us how important each factor is. Typically, PC1 explains ~85‚Äì90% of all variation, PC2 explains ~5‚Äì10%, and PC3 explains ~2‚Äì5%.</li>
<li>The three factors have clear economic interpretations: <strong>level</strong> (parallel shifts), <strong>slope</strong> (steepening/flattening), and <strong>curvature</strong> (humps in the middle of the curve).</li>
</ul>
<p>This dimensional reduction is powerful: instead of tracking movements at hundreds of maturities, we can summarize almost everything with three numbers.</p>
<div id="e5032681" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>maturities_list <span class="op">=</span> <span class="bu">sorted</span>([<span class="bu">int</span>(m) <span class="cf">for</span> m <span class="kw">in</span> data[<span class="st">'maturity'</span>].unique()])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Dataset loaded from local FRED CSV files"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range  : </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> ‚Üí </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Maturities  : </span><span class="sc">{</span>maturities_list<span class="sc">}</span><span class="ss">Y"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Observations: </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> trading days √ó </span><span class="sc">{</span><span class="bu">len</span>(maturities_list)<span class="sc">}</span><span class="ss"> maturities"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Dataset loaded from local FRED CSV files
Date range  : 2021-02-10 ‚Üí 2026-02-10
Maturities  : [1, 2, 5, 10]Y
Observations: 1250 trading days √ó 4 maturities</code></pre>
</div>
</div>
<div id="12497779" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pca, maturities, returns <span class="op">=</span> perform_pca(data)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>total_var <span class="op">=</span> pca.explained_variance_ratio_[:<span class="dv">3</span>].<span class="bu">sum</span>() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"PCA, Explained Variance:"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">min</span>(<span class="dv">4</span>, <span class="bu">len</span>(pca.explained_variance_ratio_))):</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  PC</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>pca<span class="sc">.</span>explained_variance_ratio_[i]<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">First 3 components explain: </span><span class="sc">{</span>total_var<span class="sc">:.1f}</span><span class="ss">% of total variance"</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>fig_pca1 <span class="op">=</span> plot_pca_components_interactive(pca, maturities)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>PCA, Explained Variance:
  PC1: 87.8%
  PC2: 9.3%
  PC3: 2.2%
  PC4: 0.7%

First 3 components explain: 99.3% of total variance</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="c43fa20a-bc6b-400f-a7a4-f7e84da71027" class="plotly-graph-div" style="height:500px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("c43fa20a-bc6b-400f-a7a4-f7e84da71027")) {                    Plotly.newPlot(                        "c43fa20a-bc6b-400f-a7a4-f7e84da71027",                        [{"line":{"color":"#457B9D","width":2.5},"marker":{"size":8},"mode":"lines+markers","name":"PC1 ‚Äî Level (87.8%)","x":[1,2,5,10],"y":{"dtype":"f8","bdata":"LQQfR9rw2D+xW8tKR5LhPxpEhEC8D+I\u002fxkz8SgaQ3j8="},"type":"scatter"},{"line":{"color":"#E63946","width":2.5},"marker":{"size":8},"mode":"lines+markers","name":"PC2 ‚Äî Slope (9.3%)","x":[1,2,5,10],"y":{"dtype":"f8","bdata":"nxj+PDAK5D8ABe4GT1jYP7oI8EQPrtG\u002fy4+CAe7m478="},"type":"scatter"},{"line":{"color":"#2A9D8F","width":2.5},"marker":{"size":8},"mode":"lines+markers","name":"PC3 ‚Äî Curvature (2.2%)","x":[1,2,5,10],"y":{"dtype":"f8","bdata":"KgDM8zJq5T\u002fqRqzdstrjv+jp31xGC8a\u002frk4ZKDm81z8="},"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":16},"text":"PCA of Yield Curve Movements ‚Äî Factor Loadings","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"},"legend":{"orientation":"h","yanchor":"bottom","y":-0.25,"xanchor":"center","x":0.5},"margin":{"t":80,"b":100,"l":60,"r":40},"xaxis":{"title":{"text":"Maturity (years)"}},"yaxis":{"title":{"text":"Factor Loading"}},"hovermode":"x unified","height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('c43fa20a-bc6b-400f-a7a4-f7e84da71027');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<div id="0062d20f" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fig_pca2 <span class="op">=</span> plot_pca_variance_interactive(pca)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="554cdce3-d39b-4888-a4f0-0a60863e29af" class="plotly-graph-div" style="height:500px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("554cdce3-d39b-4888-a4f0-0a60863e29af")) {                    Plotly.newPlot(                        "554cdce3-d39b-4888-a4f0-0a60863e29af",                        [{"marker":{"color":"#457B9D"},"name":"Explained Variance (%)","text":["87.8%","9.3%","2.2%","0.7%"],"textposition":"outside","x":["PC1","PC2","PC3","PC4"],"y":{"dtype":"f8","bdata":"kycMzjHxVUBaC7DPQ64iQAV1+SKNwwFAwKwFc6d05T8="},"type":"bar"},{"line":{"color":"#E63946","width":2.5},"marker":{"size":8},"mode":"lines+markers","name":"Cumulative","x":["PC1","PC2","PC3","PC4"],"y":{"dtype":"f8","bdata":"kycMzjHxVUD+KAJI+kZYQKb0GbEW1VhAAAAAAAAAWUA="},"yaxis":"y2","type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":16},"text":"PCA ‚Äî Explained Variance per Component","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"},"yaxis2":{"title":{"text":"Cumulative (%)"},"overlaying":"y","side":"right","range":[0,110]},"margin":{"t":80,"b":80,"l":60,"r":60},"legend":{"orientation":"h","yanchor":"bottom","y":-0.2,"xanchor":"center","x":0.5},"xaxis":{"title":{"text":"Principal Component"}},"yaxis":{"title":{"text":"Explained Variance (%)"}},"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('554cdce3-d39b-4888-a4f0-0a60863e29af');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Interpreting the factors:</strong></p>
<ul>
<li><strong>PC1 (Level)</strong>, all loadings have the same sign. When this factor moves, all rates rise or fall together. It is by far the dominant driver of yield curve risk, capturing the 2022‚Äì2023 Fed hiking cycle in full.</li>
<li><strong>PC2 (Slope)</strong>, loadings are positive at long maturities and negative at short ones. This captures steepening/flattening dynamics.</li>
<li><strong>PC3 (Curvature)</strong>, a hump-shaped pattern, reflecting movements in intermediate maturities relative to the short and long ends.</li>
</ul>
</blockquote>
<hr>
</section>
</section>
<section id="extension-machine-learning-yield-curve-forecasting" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Extension: Machine Learning Yield Curve Forecasting</h1>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>üí° Can we predict where rates are heading?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Traditional yield curve models are <em>descriptive</em>: they tell us what the curve looks like today, and how sensitive it is to shocks. But a natural next question emerges: can we build a model that <em>predicts</em> where rates will be in 1 month, 3 months, or 6 months? Machine learning offers a data-driven approach to this problem.</p>
</div>
</div>
<p>We‚Äôve already prepared everything we need for this extension. Our PCA analysis computed <strong>daily yield changes</strong> across all four maturities over 5 years, that‚Äôs 1 249 observations of how the curve evolves day-to-day. We can now use this time series to train a supervised learning model.</p>
<p>The idea is simple but powerful. Today‚Äôs short-term rates often contain information about where longer-term rates are heading. If the 1-year rate jumps sharply, the 10-year rate tends to follow, though with a lag and a dampening effect. Machine learning can learn these patterns automatically from historical data, without requiring us to specify the functional form by hand.</p>
<p>We use a <strong>Random Forest regressor</strong>, an ensemble method that fits multiple decision trees and averages their predictions. Random Forests are robust to overfitting, handle non-linear relationships naturally, and require minimal hyperparameter tuning. We train the model to predict the <strong>1-month forward change</strong> in the 10-year zero rate, using as features: (1) today‚Äôs level of all four rates, (2) yesterday‚Äôs changes in all four rates, and (3) the rolling 20-day volatility of rate changes.</p>
<div id="2dd98186" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error, r2_score</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Build ML dataset from PCA returns</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_ml_features(returns):</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Create supervised learning dataset:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">      - Features: today's rate levels + yesterday's changes + 20d vol</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">      - Target: 1-month forward change in 10Y rate</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> returns.copy()</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="ss">f"rate_</span><span class="sc">{</span><span class="bu">int</span>(c)<span class="sc">}</span><span class="ss">Y"</span> <span class="cf">for</span> c <span class="kw">in</span> df.columns]</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lagged changes</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df.columns:</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_lag1"</span>] <span class="op">=</span> df[col].shift(<span class="dv">1</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rolling volatility (20-day window)</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> c.startswith(<span class="st">"rate_"</span>)]:</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_vol20d"</span>] <span class="op">=</span> df[col].rolling(<span class="dv">20</span>).std()</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Target: 1-month forward change in 10Y</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"target"</span>] <span class="op">=</span> df[<span class="st">"rate_10Y"</span>].shift(<span class="op">-</span><span class="dv">21</span>)  <span class="co"># ~1 month = 21 trading days</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Drop rows with NaN (edges of rolling windows and lags)</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna()</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>ml_data <span class="op">=</span> build_ml_features(returns)</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Features: all columns except target</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ml_data.drop(columns<span class="op">=</span>[<span class="st">"target"</span>])</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ml_data[<span class="st">"target"</span>]</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: 80% train, 20% test (chronological)</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>split_idx <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(X) <span class="op">*</span> <span class="fl">0.8</span>)</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>X_train, X_test <span class="op">=</span> X.iloc[:split_idx], X.iloc[split_idx:]</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>y_train, y_test <span class="op">=</span> y.iloc[:split_idx], y.iloc[split_idx:]</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Training set  : </span><span class="sc">{</span><span class="bu">len</span>(X_train)<span class="sc">}</span><span class="ss"> observations"</span>)</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Test set      : </span><span class="sc">{</span><span class="bu">len</span>(X_test)<span class="sc">}</span><span class="ss"> observations"</span>)</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Features used : </span><span class="sc">{</span>X<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Training set  : 966 observations
Test set      : 242 observations
Features used : 16</code></pre>
</div>
</div>
<div id="1272b638" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Random Forest</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>rf <span class="op">=</span> RandomForestRegressor(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    n_estimators<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    max_depth<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    min_samples_split<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    random_state<span class="op">=</span><span class="dv">42</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    n_jobs<span class="op">=-</span><span class="dv">1</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>rf.fit(X_train, y_train)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>y_pred_train <span class="op">=</span> rf.predict(X_train)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>y_pred_test <span class="op">=</span> rf.predict(X_test)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluation metrics</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>mae_train <span class="op">=</span> mean_absolute_error(y_train, y_pred_train)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>mae_test <span class="op">=</span> mean_absolute_error(y_test, y_pred_test)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>r2_train <span class="op">=</span> r2_score(y_train, y_pred_train)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>r2_test <span class="op">=</span> r2_score(y_test, y_pred_test)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Model Performance:"</span>)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Train MAE : </span><span class="sc">{</span>mae_train<span class="op">*</span><span class="dv">10000</span><span class="sc">:.2f}</span><span class="ss"> bps"</span>)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Test MAE  : </span><span class="sc">{</span>mae_test<span class="op">*</span><span class="dv">10000</span><span class="sc">:.2f}</span><span class="ss"> bps"</span>)</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Train R¬≤  : </span><span class="sc">{</span>r2_train<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Test R¬≤   : </span><span class="sc">{</span>r2_test<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Model Performance:
  Train MAE : 4.20 bps
  Test MAE  : 3.86 bps
  Train R¬≤  : 0.343
  Test R¬≤   : -0.068</code></pre>
</div>
</div>
<div id="ea661a45" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature importance</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>importances <span class="op">=</span> pd.DataFrame({</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Feature"</span>: X.columns,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Importance"</span>: rf.feature_importances_</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>}).sort_values(<span class="st">"Importance"</span>, ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Top 10 Most Important Features:"</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(importances.to_string(index<span class="op">=</span><span class="va">False</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Top 10 Most Important Features:
             Feature  Importance
     rate_10Y_vol20d    0.092998
      rate_2Y_vol20d    0.075615
      rate_1Y_vol20d    0.073198
       rate_10Y_lag1    0.071506
 rate_5Y_lag1_vol20d    0.070160
rate_10Y_lag1_vol20d    0.069937
 rate_1Y_lag1_vol20d    0.068644
        rate_2Y_lag1    0.067967
 rate_2Y_lag1_vol20d    0.063039
        rate_5Y_lag1    0.062279</code></pre>
</div>
</div>
<div id="68d4d450" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize: Actual vs Predicted on test set</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>test_dates <span class="op">=</span> ml_data.index[split_idx:]</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>test_dates,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>y_test <span class="op">*</span> <span class="dv">10000</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Actual 1M Œî (10Y)"</span>,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"#457B9D"</span>, width<span class="op">=</span><span class="fl">1.5</span>),</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>test_dates,</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>y_pred_test <span class="op">*</span> <span class="dv">10000</span>,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Predicted 1M Œî (10Y)"</span>,</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"#E63946"</span>, width<span class="op">=</span><span class="fl">1.5</span>, dash<span class="op">=</span><span class="st">"dot"</span>),</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="st">"ML Forecast: 1-Month Forward Change in 10Y Rate"</span>,</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">16</span>),</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">'center'</span>,</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">'top'</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Date"</span>,</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Rate Change (bps)"</span>,</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">"plotly_white"</span>,</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    hovermode<span class="op">=</span><span class="st">"x unified"</span>,</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">80</span>, b<span class="op">=</span><span class="dv">80</span>, l<span class="op">=</span><span class="dv">60</span>, r<span class="op">=</span><span class="dv">40</span>),</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(orientation<span class="op">=</span><span class="st">"h"</span>, yanchor<span class="op">=</span><span class="st">"bottom"</span>, y<span class="op">=-</span><span class="fl">0.2</span>, xanchor<span class="op">=</span><span class="st">"center"</span>, x<span class="op">=</span><span class="fl">0.5</span>),</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.0.min.js" integrity="sha256-bO3dS6yCpk9aK4gUpNELtCiDeSYvGYnK7jFI58NQnHI=" crossorigin="anonymous"></script>                <div id="c53fcc58-5f6d-4768-bd1d-fda14f4163b0" class="plotly-graph-div" style="height:500px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("c53fcc58-5f6d-4768-bd1d-fda14f4163b0")) {                    Plotly.newPlot(                        "c53fcc58-5f6d-4768-bd1d-fda14f4163b0",                        [{"line":{"color":"#457B9D","width":1.5},"mode":"lines","name":"Actual 1M Œî (10Y)","x":["2025-01-22T00:00:00","2025-01-23T00:00:00","2025-01-24T00:00:00","2025-01-27T00:00:00","2025-01-28T00:00:00","2025-01-29T00:00:00","2025-01-30T00:00:00","2025-01-31T00:00:00","2025-02-03T00:00:00","2025-02-04T00:00:00","2025-02-05T00:00:00","2025-02-06T00:00:00","2025-02-07T00:00:00","2025-02-10T00:00:00","2025-02-11T00:00:00","2025-02-12T00:00:00","2025-02-13T00:00:00","2025-02-14T00:00:00","2025-02-18T00:00:00","2025-02-19T00:00:00","2025-02-20T00:00:00","2025-02-21T00:00:00","2025-02-24T00:00:00","2025-02-25T00:00:00","2025-02-26T00:00:00","2025-02-27T00:00:00","2025-02-28T00:00:00","2025-03-03T00:00:00","2025-03-04T00:00:00","2025-03-05T00:00:00","2025-03-06T00:00:00","2025-03-07T00:00:00","2025-03-10T00:00:00","2025-03-11T00:00:00","2025-03-12T00:00:00","2025-03-13T00:00:00","2025-03-14T00:00:00","2025-03-17T00:00:00","2025-03-18T00:00:00","2025-03-19T00:00:00","2025-03-20T00:00:00","2025-03-21T00:00:00","2025-03-24T00:00:00","2025-03-25T00:00:00","2025-03-26T00:00:00","2025-03-27T00:00:00","2025-03-28T00:00:00","2025-03-31T00:00:00","2025-04-01T00:00:00","2025-04-02T00:00:00","2025-04-03T00:00:00","2025-04-04T00:00:00","2025-04-07T00:00:00","2025-04-08T00:00:00","2025-04-09T00:00:00","2025-04-10T00:00:00","2025-04-11T00:00:00","2025-04-14T00:00:00","2025-04-15T00:00:00","2025-04-16T00:00:00","2025-04-17T00:00:00","2025-04-21T00:00:00","2025-04-22T00:00:00","2025-04-23T00:00:00","2025-04-24T00:00:00","2025-04-25T00:00:00","2025-04-28T00:00:00","2025-04-29T00:00:00","2025-04-30T00:00:00","2025-05-01T00:00:00","2025-05-02T00:00:00","2025-05-05T00:00:00","2025-05-06T00:00:00","2025-05-07T00:00:00","2025-05-08T00:00:00","2025-05-09T00:00:00","2025-05-12T00:00:00","2025-05-13T00:00:00","2025-05-14T00:00:00","2025-05-15T00:00:00","2025-05-16T00:00:00","2025-05-19T00:00:00","2025-05-20T00:00:00","2025-05-21T00:00:00","2025-05-22T00:00:00","2025-05-23T00:00:00","2025-05-27T00:00:00","2025-05-28T00:00:00","2025-05-29T00:00:00","2025-05-30T00:00:00","2025-06-02T00:00:00","2025-06-03T00:00:00","2025-06-04T00:00:00","2025-06-05T00:00:00","2025-06-06T00:00:00","2025-06-09T00:00:00","2025-06-10T00:00:00","2025-06-11T00:00:00","2025-06-12T00:00:00","2025-06-13T00:00:00","2025-06-16T00:00:00","2025-06-17T00:00:00","2025-06-18T00:00:00","2025-06-20T00:00:00","2025-06-23T00:00:00","2025-06-24T00:00:00","2025-06-25T00:00:00","2025-06-26T00:00:00","2025-06-27T00:00:00","2025-06-30T00:00:00","2025-07-01T00:00:00","2025-07-02T00:00:00","2025-07-03T00:00:00","2025-07-07T00:00:00","2025-07-08T00:00:00","2025-07-09T00:00:00","2025-07-10T00:00:00","2025-07-11T00:00:00","2025-07-14T00:00:00","2025-07-15T00:00:00","2025-07-16T00:00:00","2025-07-17T00:00:00","2025-07-18T00:00:00","2025-07-21T00:00:00","2025-07-22T00:00:00","2025-07-23T00:00:00","2025-07-24T00:00:00","2025-07-25T00:00:00","2025-07-28T00:00:00","2025-07-29T00:00:00","2025-07-30T00:00:00","2025-07-31T00:00:00","2025-08-01T00:00:00","2025-08-04T00:00:00","2025-08-05T00:00:00","2025-08-06T00:00:00","2025-08-07T00:00:00","2025-08-08T00:00:00","2025-08-11T00:00:00","2025-08-12T00:00:00","2025-08-13T00:00:00","2025-08-14T00:00:00","2025-08-15T00:00:00","2025-08-18T00:00:00","2025-08-19T00:00:00","2025-08-20T00:00:00","2025-08-21T00:00:00","2025-08-22T00:00:00","2025-08-25T00:00:00","2025-08-26T00:00:00","2025-08-27T00:00:00","2025-08-28T00:00:00","2025-08-29T00:00:00","2025-09-02T00:00:00","2025-09-03T00:00:00","2025-09-04T00:00:00","2025-09-05T00:00:00","2025-09-08T00:00:00","2025-09-09T00:00:00","2025-09-10T00:00:00","2025-09-11T00:00:00","2025-09-12T00:00:00","2025-09-15T00:00:00","2025-09-16T00:00:00","2025-09-17T00:00:00","2025-09-18T00:00:00","2025-09-19T00:00:00","2025-09-22T00:00:00","2025-09-23T00:00:00","2025-09-24T00:00:00","2025-09-25T00:00:00","2025-09-26T00:00:00","2025-09-29T00:00:00","2025-09-30T00:00:00","2025-10-01T00:00:00","2025-10-02T00:00:00","2025-10-03T00:00:00","2025-10-06T00:00:00","2025-10-07T00:00:00","2025-10-08T00:00:00","2025-10-09T00:00:00","2025-10-10T00:00:00","2025-10-14T00:00:00","2025-10-15T00:00:00","2025-10-16T00:00:00","2025-10-17T00:00:00","2025-10-20T00:00:00","2025-10-21T00:00:00","2025-10-22T00:00:00","2025-10-23T00:00:00","2025-10-24T00:00:00","2025-10-27T00:00:00","2025-10-28T00:00:00","2025-10-29T00:00:00","2025-10-30T00:00:00","2025-10-31T00:00:00","2025-11-03T00:00:00","2025-11-04T00:00:00","2025-11-05T00:00:00","2025-11-06T00:00:00","2025-11-07T00:00:00","2025-11-10T00:00:00","2025-11-12T00:00:00","2025-11-13T00:00:00","2025-11-14T00:00:00","2025-11-17T00:00:00","2025-11-18T00:00:00","2025-11-19T00:00:00","2025-11-20T00:00:00","2025-11-21T00:00:00","2025-11-24T00:00:00","2025-11-25T00:00:00","2025-11-26T00:00:00","2025-11-28T00:00:00","2025-12-01T00:00:00","2025-12-02T00:00:00","2025-12-03T00:00:00","2025-12-04T00:00:00","2025-12-05T00:00:00","2025-12-08T00:00:00","2025-12-09T00:00:00","2025-12-10T00:00:00","2025-12-11T00:00:00","2025-12-12T00:00:00","2025-12-15T00:00:00","2025-12-16T00:00:00","2025-12-17T00:00:00","2025-12-18T00:00:00","2025-12-19T00:00:00","2025-12-22T00:00:00","2025-12-23T00:00:00","2025-12-24T00:00:00","2025-12-26T00:00:00","2025-12-29T00:00:00","2025-12-30T00:00:00","2025-12-31T00:00:00","2026-01-02T00:00:00","2026-01-05T00:00:00","2026-01-06T00:00:00","2026-01-07T00:00:00","2026-01-08T00:00:00","2026-01-09T00:00:00"],"y":{"dtype":"f8","bdata":"DAAAAAAAIMCR\u002fv\u002f\u002f\u002f\u002f\u002f\u002fvywAAAAAACTAt\u002f\u002f\u002f\u002f\u002f\u002f\u002fE8DK\u002f\u002f\u002f\u002f\u002f\u002f8PQAUAAAAAABTADAAAAAAAIMDX\u002f\u002f\u002f\u002f\u002f\u002f8XQHMAAAAAABhAkf7\u002f\u002f\u002f\u002f\u002f7z8lAAAAAAAIQCwAAAAAACTAcwAAAAAAGEDK\u002f\u002f\u002f\u002f\u002f\u002f8PQFMAAAAAABTAMwAAAAAAEEAAAAAAAAAAAMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fyv\u002f\u002f\u002f\u002f\u002f\u002fD8CBAAAAAADwv4EAAAAAAPA\u002f9f\u002f\u002f\u002f\u002f\u002f\u002fIUAlAAAAAAAIwMr\u002f\u002f\u002f\u002f\u002f\u002fw9AJQAAAAAACEAVAAAAAAAmwC3\u002f\u002f\u002f\u002f\u002f\u002fw\u002fAJQAAAAAAGMAlAAAAAAAIQB4AAAAAACzABQAAAAAAFMAeAAAAAAAsQO7\u002f\u002f\u002f\u002f\u002f\u002fyVADAAAAAAAIEAlAAAAAAAYQAwAAAAAACBALAAAAAAAJMAlAAAAAAAIwNf\u002f\u002f\u002f\u002f\u002f\u002fxfABQAAAAAAFEDK\u002f\u002f\u002f\u002f\u002f\u002f8fQJH+\u002f\u002f\u002f\u002f\u002f++\u002fkf7\u002f\u002f\u002f\u002f\u002f778MAAAAAAAgwCUAAAAAAAjA1\u002f\u002f\u002f\u002f\u002f\u002f\u002fF8DK\u002f\u002f\u002f\u002f\u002f\u002f8PwIEAAAAAAADADAAAAAAAIEDK\u002f\u002f\u002f\u002f\u002f\u002f8fQCUAAAAAAAhAJQAAAAAAGMDK\u002f\u002f\u002f\u002f\u002f\u002f8PwBUAAAAAACZAAAAAAAAAAAAMAAAAAAAgQMr\u002f\u002f\u002f\u002f\u002f\u002fw9Ayv\u002f\u002f\u002f\u002f\u002f\u002fD0DK\u002f\u002f\u002f\u002f\u002f\u002f8fwIEAAAAAAADAJQAAAAAACECBAAAAAAAAQN7\u002f\u002f\u002f\u002f\u002f\u002fyNAyv\u002f\u002f\u002f\u002f\u002f\u002fD8AlAAAAAAAIwAwAAAAAACDAyv\u002f\u002f\u002f\u002f\u002f\u002fD0DK\u002f\u002f\u002f\u002f\u002f\u002f8PwMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fBQAAAAAAFEAAAAAAAAAAAPX\u002f\u002f\u002f\u002f\u002f\u002fyHAJQAAAAAACEDu\u002f\u002f\u002f\u002f\u002f\u002f8lQMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fgQAAAAAAAMDX\u002f\u002f\u002f\u002f\u002f\u002f8XwAUAAAAAABTABQAAAAAAFEAFAAAAAAAUQEYAAAAAABzAkf7\u002f\u002f\u002f\u002f\u002f778AAAAAAAAAAMr\u002f\u002f\u002f\u002f\u002f\u002fw\u002fAMwAAAAAAEMCR\u002fv\u002f\u002f\u002f\u002f\u002fvvyUAAAAAAAjAJQAAAAAACEAFAAAAAAAUwMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f8\u002fyv\u002f\u002f\u002f\u002f\u002f\u002fD0AFAAAAAAAUQFMAAAAAABRAkf7\u002f\u002f\u002f\u002f\u002f\u002fz\u002fK\u002f\u002f\u002f\u002f\u002f\u002f8fwJH+\u002f\u002f\u002f\u002f\u002f+8\u002fDAAAAAAAIEAAAAAAAAAAAPf\u002f\u002f\u002f\u002f\u002f\u002fxtAyv\u002f\u002f\u002f\u002f\u002f\u002fD8CR\u002fv\u002f\u002f\u002f\u002f\u002fvP4n\u002f\u002f\u002f\u002f\u002f\u002fwfAJQAAAAAAGMAlAAAAAAAIwFMAAAAAABRAif\u002f\u002f\u002f\u002f\u002f\u002fB0CJ\u002f\u002f\u002f\u002f\u002f\u002f8HwJH+\u002f\u002f\u002f\u002f\u002f\u002f8\u002fyv\u002f\u002f\u002f\u002f\u002f\u002fH8DK\u002f\u002f\u002f\u002f\u002f\u002f8PQJH+\u002f\u002f\u002f\u002f\u002f++\u002f9\u002f\u002f\u002f\u002f\u002f\u002f\u002fK8C6AQAAAADwvwAAAAAAAAAAAAAAAAAAAAC6AQAAAADwPy3\u002f\u002f\u002f\u002f\u002f\u002fw9AAAAAAAAAAACBAAAAAAAAQAUAAAAAABTABQAAAAAAFEDK\u002f\u002f\u002f\u002f\u002f\u002f8PQIEAAAAAAPA\u002fMwAAAAAAEMCR\u002fv\u002f\u002f\u002f\u002f\u002fvv8r\u002f\u002f\u002f\u002f\u002f\u002fw9A9\u002f\u002f\u002f\u002f\u002f\u002f\u002fG8CBAAAAAAAAQIEAAAAAAADAyv\u002f\u002f\u002f\u002f\u002f\u002f\u002f7+BAAAAAAAAwLoBAAAAAPA\u002fBQAAAAAAFEBzAAAAAAAYwLf\u002f\u002f\u002f\u002f\u002f\u002fxPARgAAAAAAHMC3\u002f\u002f\u002f\u002f\u002f\u002f8TwCUAAAAAAAhAMwAAAAAAEMAlAAAAAAAIwAUAAAAAABRAkf7\u002f\u002f\u002f\u002f\u002f77+BAAAAAADwv8r\u002f\u002f\u002f\u002f\u002f\u002f\u002f8\u002fUwAAAAAAFECJ\u002f\u002f\u002f\u002f\u002f\u002f8HQIEAAAAAAPA\u002fJQAAAAAACMDK\u002f\u002f\u002f\u002f\u002f\u002f8PQMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f8\u002fgQAAAAAAAEAFAAAAAAAUwJH+\u002f\u002f\u002f\u002f\u002f+8\u002fyv\u002f\u002f\u002f\u002f\u002f\u002fD8CBAAAAAAAAwCUAAAAAAAhABQAAAAAAFEDK\u002f\u002f\u002f\u002f\u002f\u002f8PwIEAAAAAAPC\u002fgQAAAAAA8D\u002f1\u002f\u002f\u002f\u002f\u002f\u002f8hwMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fyv\u002f\u002f\u002f\u002f\u002f\u002f\u002fz\u002fX\u002f\u002f\u002f\u002f\u002f\u002f8XwO3+\u002f\u002f\u002f\u002f\u002fwdAkf7\u002f\u002f\u002f\u002f\u002f\u002f7\u002fK\u002f\u002f\u002f\u002f\u002f\u002f\u002f\u002fv4EAAAAAAPC\u002fyv\u002f\u002f\u002f\u002f\u002f\u002fD0CR\u002fv\u002f\u002f\u002f\u002f\u002fvP5H+\u002f\u002f\u002f\u002f\u002f++\u002fkf7\u002f\u002f\u002f\u002f\u002f\u002f7\u002f1\u002f\u002f\u002f\u002f\u002f\u002f8hQCUAAAAAAAhAAAAAAAAAAACR\u002fv\u002f\u002f\u002f\u002f\u002f\u002fPyUAAAAAAAjARgAAAAAAHEDX\u002f\u002f\u002f\u002f\u002f\u002f8XwAAAAAAAAAAAkf7\u002f\u002f\u002f\u002f\u002f\u002fz+3\u002f\u002f\u002f\u002f\u002f\u002f8TwCUAAAAAAAhAif\u002f\u002f\u002f\u002f\u002f\u002fB0CBAAAAAADwv5H+\u002f\u002f\u002f\u002f\u002f++\u002fkf7\u002f\u002f\u002f\u002f\u002f7z8lAAAAAAAIwMr\u002f\u002f\u002f\u002f\u002f\u002fw\u002fAyv\u002f\u002f\u002f\u002f\u002f\u002f\u002f78lAAAAAAAIwJH+\u002f\u002f\u002f\u002f\u002f++\u002fkf7\u002f\u002f\u002f\u002f\u002f\u002fz9GAAAAAAAcQAAAAAAAAAAAJQAAAAAACMBTAAAAAAAUQIn\u002f\u002f\u002f\u002f\u002f\u002fwdAJQAAAAAACECR\u002fv\u002f\u002f\u002f\u002f\u002fvPwUAAAAAABTAgQAAAAAA8D9TAAAAAAAUQLoBAAAAAPC\u002fif\u002f\u002f\u002f\u002f\u002f\u002fB8CR\u002fv\u002f\u002f\u002f\u002f\u002fvP8r\u002f\u002f\u002f\u002f\u002f\u002fw\u002fAyv\u002f\u002f\u002f\u002f\u002f\u002fD0CBAAAAAADwP5H+\u002f\u002f\u002f\u002f\u002f+8\u002fif\u002f\u002f\u002f\u002f\u002f\u002fB8CBAAAAAADwv8r\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fyv\u002f\u002f\u002f\u002f\u002f\u002f\u002fz\u002fK\u002f\u002f\u002f\u002f\u002f\u002f8PQLoBAAAAAPA\u002fgQAAAAAAAMCR\u002fv\u002f\u002f\u002f\u002f\u002fvP4n\u002f\u002f\u002f\u002f\u002f\u002fwfAMwAAAAAAEEC6AQAAAADwv7oBAAAAAPA\u002fugEAAAAA8L+J\u002f\u002f\u002f\u002f\u002f\u002f8HwMr\u002f\u002f\u002f\u002f\u002f\u002f\u002f8\u002f9\u002f\u002f\u002f\u002f\u002f\u002f\u002fG0DX\u002f\u002f\u002f\u002f\u002f\u002f8XQMr\u002f\u002f\u002f\u002f\u002f\u002fw\u002fAAAAAAAAAAADK\u002f\u002f\u002f\u002f\u002f\u002f\u002f\u002fv4EAAAAAAADAgQAAAAAAAEDK\u002f\u002f\u002f\u002f\u002f\u002f\u002f\u002fP8r\u002f\u002f\u002f\u002f\u002f\u002f\u002f+\u002fyv\u002f\u002f\u002f\u002f\u002f\u002f\u002fz8lAAAAAAAIQJH+\u002f\u002f\u002f\u002f\u002f++\u002fkf7\u002f\u002f\u002f\u002f\u002f7z8MAAAAAAAgwJH+\u002f\u002f\u002f\u002f\u002f+8\u002fAAAAAAAAAADX\u002f\u002f\u002f\u002f\u002f\u002f8XwA=="},"type":"scatter"},{"line":{"color":"#E63946","dash":"dot","width":1.5},"mode":"lines","name":"Predicted 1M Œî (10Y)","x":["2025-01-22T00:00:00","2025-01-23T00:00:00","2025-01-24T00:00:00","2025-01-27T00:00:00","2025-01-28T00:00:00","2025-01-29T00:00:00","2025-01-30T00:00:00","2025-01-31T00:00:00","2025-02-03T00:00:00","2025-02-04T00:00:00","2025-02-05T00:00:00","2025-02-06T00:00:00","2025-02-07T00:00:00","2025-02-10T00:00:00","2025-02-11T00:00:00","2025-02-12T00:00:00","2025-02-13T00:00:00","2025-02-14T00:00:00","2025-02-18T00:00:00","2025-02-19T00:00:00","2025-02-20T00:00:00","2025-02-21T00:00:00","2025-02-24T00:00:00","2025-02-25T00:00:00","2025-02-26T00:00:00","2025-02-27T00:00:00","2025-02-28T00:00:00","2025-03-03T00:00:00","2025-03-04T00:00:00","2025-03-05T00:00:00","2025-03-06T00:00:00","2025-03-07T00:00:00","2025-03-10T00:00:00","2025-03-11T00:00:00","2025-03-12T00:00:00","2025-03-13T00:00:00","2025-03-14T00:00:00","2025-03-17T00:00:00","2025-03-18T00:00:00","2025-03-19T00:00:00","2025-03-20T00:00:00","2025-03-21T00:00:00","2025-03-24T00:00:00","2025-03-25T00:00:00","2025-03-26T00:00:00","2025-03-27T00:00:00","2025-03-28T00:00:00","2025-03-31T00:00:00","2025-04-01T00:00:00","2025-04-02T00:00:00","2025-04-03T00:00:00","2025-04-04T00:00:00","2025-04-07T00:00:00","2025-04-08T00:00:00","2025-04-09T00:00:00","2025-04-10T00:00:00","2025-04-11T00:00:00","2025-04-14T00:00:00","2025-04-15T00:00:00","2025-04-16T00:00:00","2025-04-17T00:00:00","2025-04-21T00:00:00","2025-04-22T00:00:00","2025-04-23T00:00:00","2025-04-24T00:00:00","2025-04-25T00:00:00","2025-04-28T00:00:00","2025-04-29T00:00:00","2025-04-30T00:00:00","2025-05-01T00:00:00","2025-05-02T00:00:00","2025-05-05T00:00:00","2025-05-06T00:00:00","2025-05-07T00:00:00","2025-05-08T00:00:00","2025-05-09T00:00:00","2025-05-12T00:00:00","2025-05-13T00:00:00","2025-05-14T00:00:00","2025-05-15T00:00:00","2025-05-16T00:00:00","2025-05-19T00:00:00","2025-05-20T00:00:00","2025-05-21T00:00:00","2025-05-22T00:00:00","2025-05-23T00:00:00","2025-05-27T00:00:00","2025-05-28T00:00:00","2025-05-29T00:00:00","2025-05-30T00:00:00","2025-06-02T00:00:00","2025-06-03T00:00:00","2025-06-04T00:00:00","2025-06-05T00:00:00","2025-06-06T00:00:00","2025-06-09T00:00:00","2025-06-10T00:00:00","2025-06-11T00:00:00","2025-06-12T00:00:00","2025-06-13T00:00:00","2025-06-16T00:00:00","2025-06-17T00:00:00","2025-06-18T00:00:00","2025-06-20T00:00:00","2025-06-23T00:00:00","2025-06-24T00:00:00","2025-06-25T00:00:00","2025-06-26T00:00:00","2025-06-27T00:00:00","2025-06-30T00:00:00","2025-07-01T00:00:00","2025-07-02T00:00:00","2025-07-03T00:00:00","2025-07-07T00:00:00","2025-07-08T00:00:00","2025-07-09T00:00:00","2025-07-10T00:00:00","2025-07-11T00:00:00","2025-07-14T00:00:00","2025-07-15T00:00:00","2025-07-16T00:00:00","2025-07-17T00:00:00","2025-07-18T00:00:00","2025-07-21T00:00:00","2025-07-22T00:00:00","2025-07-23T00:00:00","2025-07-24T00:00:00","2025-07-25T00:00:00","2025-07-28T00:00:00","2025-07-29T00:00:00","2025-07-30T00:00:00","2025-07-31T00:00:00","2025-08-01T00:00:00","2025-08-04T00:00:00","2025-08-05T00:00:00","2025-08-06T00:00:00","2025-08-07T00:00:00","2025-08-08T00:00:00","2025-08-11T00:00:00","2025-08-12T00:00:00","2025-08-13T00:00:00","2025-08-14T00:00:00","2025-08-15T00:00:00","2025-08-18T00:00:00","2025-08-19T00:00:00","2025-08-20T00:00:00","2025-08-21T00:00:00","2025-08-22T00:00:00","2025-08-25T00:00:00","2025-08-26T00:00:00","2025-08-27T00:00:00","2025-08-28T00:00:00","2025-08-29T00:00:00","2025-09-02T00:00:00","2025-09-03T00:00:00","2025-09-04T00:00:00","2025-09-05T00:00:00","2025-09-08T00:00:00","2025-09-09T00:00:00","2025-09-10T00:00:00","2025-09-11T00:00:00","2025-09-12T00:00:00","2025-09-15T00:00:00","2025-09-16T00:00:00","2025-09-17T00:00:00","2025-09-18T00:00:00","2025-09-19T00:00:00","2025-09-22T00:00:00","2025-09-23T00:00:00","2025-09-24T00:00:00","2025-09-25T00:00:00","2025-09-26T00:00:00","2025-09-29T00:00:00","2025-09-30T00:00:00","2025-10-01T00:00:00","2025-10-02T00:00:00","2025-10-03T00:00:00","2025-10-06T00:00:00","2025-10-07T00:00:00","2025-10-08T00:00:00","2025-10-09T00:00:00","2025-10-10T00:00:00","2025-10-14T00:00:00","2025-10-15T00:00:00","2025-10-16T00:00:00","2025-10-17T00:00:00","2025-10-20T00:00:00","2025-10-21T00:00:00","2025-10-22T00:00:00","2025-10-23T00:00:00","2025-10-24T00:00:00","2025-10-27T00:00:00","2025-10-28T00:00:00","2025-10-29T00:00:00","2025-10-30T00:00:00","2025-10-31T00:00:00","2025-11-03T00:00:00","2025-11-04T00:00:00","2025-11-05T00:00:00","2025-11-06T00:00:00","2025-11-07T00:00:00","2025-11-10T00:00:00","2025-11-12T00:00:00","2025-11-13T00:00:00","2025-11-14T00:00:00","2025-11-17T00:00:00","2025-11-18T00:00:00","2025-11-19T00:00:00","2025-11-20T00:00:00","2025-11-21T00:00:00","2025-11-24T00:00:00","2025-11-25T00:00:00","2025-11-26T00:00:00","2025-11-28T00:00:00","2025-12-01T00:00:00","2025-12-02T00:00:00","2025-12-03T00:00:00","2025-12-04T00:00:00","2025-12-05T00:00:00","2025-12-08T00:00:00","2025-12-09T00:00:00","2025-12-10T00:00:00","2025-12-11T00:00:00","2025-12-12T00:00:00","2025-12-15T00:00:00","2025-12-16T00:00:00","2025-12-17T00:00:00","2025-12-18T00:00:00","2025-12-19T00:00:00","2025-12-22T00:00:00","2025-12-23T00:00:00","2025-12-24T00:00:00","2025-12-26T00:00:00","2025-12-29T00:00:00","2025-12-30T00:00:00","2025-12-31T00:00:00","2026-01-02T00:00:00","2026-01-05T00:00:00","2026-01-06T00:00:00","2026-01-07T00:00:00","2026-01-08T00:00:00","2026-01-09T00:00:00"],"y":{"dtype":"f8","bdata":"qxYi\u002fuMfzD9Q20IwIIHRv+kIk7gW+NS\u002fUrtLhHyW7r9gLbl72S4VQAKzPd8Jc5Y\u002fSeGb9a9NsL\u002forr9WZRHRP998O6+Zhve\u002fQkk030ej4z8uUrnc5mOov4MDL\u002fLPpvI\u002f0P\u002feTQ2x9D\u002fWxeHOdjvFP5zsjSmY5ba\u002faqPdCB3Ssr8r\u002fgpzspvFv0YxwiwI+eE\u002fMh13MD6dwT9TZrDPF1znvy6jD4lfps2\u002fJpPLJn4K5r+oD8qufd8DQNKvQHwObeK\u002fZdQbtQMFAEAF9l0WjpziP5lB4AU1OLO\u002fk4zoae6\u002f6z8pJJt\u002f7JLdP5w5KvEG2Pq\u002ffWaFTALE4r8AGUBwyXrcP3X5gt3PDNe\u002fCteHeJUWD0CUK0hC3K\u002fUv0wlc8R+uuQ\u002flDUPMvQv9j\u002fd6UiSCRn4P5gnD\u002fl1ouU\u002fiBZPbdJG7T8XLWvXBzHoP8NYFgCpBeE\u002fCWa3qych5z857TVMgpvsv79WcvBzS\u002fY\u002f5UOKR+vW1j8Amy7SiEXnvwa0bhopCAtAylhgkQ6Q0T\u002fOGRLjwWDqP3+9jRs4Q+s\u002fhh6GO0TvBEB+u6h9r1WaPzRpU\u002f\u002fRkwvAtq1WQoxOAMAWHoFzhLf9P90PBmbGo+8\u002fgtjGgXLv7T\u002fNoTrtQzIEQPwXLLyCKfw\u002fzV8CTOvjAEABoC8bpGrXvw4lydLJ6ew\u002fNdax0xWe2j+gM4XFOQPdP7SXYy81sP8\u002fGXEQUiE1AEBIYZayiGECQIIv7IMwUfc\u002fKETUqCv\u002f+j8vdxq2gLbzv+U1\u002fLo1jsC\u002fYatQKcEt2D\u002fcBhKLFfb6P1GnQG4nEes\u002fe0LmAjCb+b8hcYN1AuXxP1vTSdPRjM2\u002fHns9+E496D\u002f7auGejPzlv+YdscSqNANAGVn+uds33T\u002f8IUbTgiGzP84DieoHY+o\u002fpLTizSAp8799IXwzZ17jPzymATlsHdK\u002ffA+35CQN6z\u002f\u002fYrk92qhLv9ovv\u002fy3fqc\u002fjA7wyXq23D\u002fUEXsiQDi0v7xwoD\u002f8JuC\u002fjGtgZcKCDUCXbvv7gHnlP0mOJ9Ro\u002fPG\u002fkkzXyrOMwj\u002f5NC\u002fAvEXev5Us62eXNtU\u002f1vjJeJ49nT8QJuy1QYi1v9laW36P\u002fLK\u002fk2kIKzL00z\u002fsiC8USwPIv88+GSFvE8i\u002fZnvW8DY0lz\u002f04bLGPyLyP2cR8cpZ5cq\u002fGmI7t7Z5wz+utJpwp\u002fGxP0tgkpIUgcc\u002fGDvUL6Ua1T+MaJhQqouMPwurz3xsfsk\u002fT+Fb+fOExT\u002fnIgRj9LqzP8Hl2mGdWvA\u002fjm9zDtn03D\u002fDOe7uTb7rv6GwvJkB89o\u002fRUm7D2gqv79Q\u002fBXRkorxPxDGbO8Op9o\u002fM3ZrZptidD+yjsZ\u002fl8TlP1rH0R6O6+Q\u002f81X8KKTRuD\u002fk3g+O9gTRPxKbzns+bLU\u002f5PLndV22278USXG5HVHtP8Sq8qyyxoy\u002fCdzhCF\u002fi6D9MfwjDccQMQJClII62nek\u002fG1wPy\u002fCm\u002fj+5esDVORj3Pz9Q+ljV5eE\u002fvUvODlbd3j+6f\u002fGG1p3wP17fgvdXQ\u002fA\u002fU0NNX4Dc8j\u002fXW3ico8jgP2xwu+1YhvA\u002fGsckj95W7T+EI11amgb6P+mXf8za5vU\u002fJ4DkAH8X4D86mUqfnyILQMRFz4D79PE\u002fQLyTZTaMCkBNKTaxR1HvP7TJnmwn1OM\u002fae\u002fZVtGE8D\u002f87wRhHnLjP2IdhnSPRMs\u002fqqi9PX3btD9OO1+zuAj8P+YEfDZuVu8\u002fmSlV17g63D9Fh\u002fUUoeviP6Kl2XEjsvA\u002fFfFRcMAUxj+or4NHSj7gP7o+npnu7ek\u002f5RY8pC0G5D8xwmXrtPDSP+5wB9dydPA\u002f+VvYisBtxL83bXM2B8\u002f0P5Wu\u002fWtSFOE\u002fZVGhi9d85z+6Ui4qafzRP5rfwdaMK+g\u002fWj8+HiQ33D+Nd5wrljjsP8ChfLkE7PQ\u002fpfzALXe7xD+yQWHbRdGnP4WGKuc8xdO\u002fiWYjgTiJvr958eNR0GXWv+irM1QVXAdA1F3Sdpqkqz+B3hVMScmbP9KhzH5j5AhAJvyVxdDy4j+TWB4BJKXaP5BtaI3dudM\u002f7y\u002fZFyKL4j+mX4kxRvjXP4ZsYPnvxKw\u002fymRqEv8fy78\u002fPm2TFlfsPy9JRgiy1P4\u002fnPwyjQkq4j\u002f9CfCoy\u002frqP26IxdU569A\u002fzgoFX+2t6j989arwFxmuvxS2PTuRqf4\u002fe4BIxN1m9j+fCCMk4+DmP0DE\u002fT3gY\u002fA\u002fdbtS3SX36j+Z2wCPCRHcPySlm8wmPN4\u002faM0zc6EQ5D91L3iOrPHSP2nXA\u002frXP9Y\u002fER9zZkLN3z\u002fYNC9pRXzZPwYre6OGmuQ\u002fZRXotVEm8D8hhm93TRzMv24pRWT8g+y\u002f5nNGprJP4r+R9g1Fb6ukv7N0Be\u002feT8W\u002fzcPWv+2Esr\u002fyQnDhDJO7v2hOheDrg9G\u002fAqjygAI84j\u002fc1oyNVSzZvziJbU4BrdG\u002fBSiDUsme1L8Y4XybxAfSv\u002fUCLEce5c+\u002fWxD+Gjse1r\u002f2SN9huaDFv23RHPSs5sO\u002foe9He+mntj9UzChk\u002fyHRv0jRqVW2F9C\u002f1cJLpT2bs79F+EEIySKCv08hRVt4vZm\u002fISh+nv1axr+yBBnAyIG3vxyoH6SM9am\u002fK9gV5Dbywb+Hz4V+P9LLvw=="},"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"font":{"size":16},"text":"ML Forecast: 1-Month Forward Change in 10Y Rate","y":0.95,"x":0.5,"xanchor":"center","yanchor":"top"},"margin":{"t":80,"b":80,"l":60,"r":40},"legend":{"orientation":"h","yanchor":"bottom","y":-0.2,"xanchor":"center","x":0.5},"xaxis":{"title":{"text":"Date"}},"yaxis":{"title":{"text":"Rate Change (bps)"}},"height":500,"hovermode":"x unified"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('c53fcc58-5f6d-4768-bd1d-fda14f4163b0');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<p>The results reveal an important lesson about machine learning in finance. On the test set, we achieve a Mean Absolute Error (MAE) of roughly 4 basis points, which sounds excellent. However, the R¬≤ score is <strong>negative</strong> (around -0.07), meaning the model performs <strong>worse than a naive baseline</strong> that simply predicts zero change every day.</p>
<p>What went wrong? The test period likely contains structural breaks or regime shifts that didn‚Äôt exist in the training data. Interest rate movements from 2021‚Äì2024 (our training set) were dominated by the Fed‚Äôs unprecedented hiking cycle. The test period (late 2024‚Äì2026) represents a different regime: rates stabilizing, inflation moderating, policy uncertainty. The model learned patterns that don‚Äôt generalize.</p>
<p>This is a <strong>classic overfitting problem</strong> in financial forecasting. The Random Forest captured noise rather than signal. The feature importances show that volatility measures (rolling 20-day standard deviations) rank highest, but these are inherently unstable and regime-dependent.</p>
<p><strong>What we learn from this failure:</strong></p>
<ul>
<li><strong>Time series forecasting is hard.</strong> Unlike image classification or NLP, financial markets are non-stationary. Patterns that worked yesterday can fail tomorrow when the macroeconomic regime shifts.</li>
<li><strong>Out-of-sample testing is critical.</strong> In-sample performance (Train R¬≤ = 0.34) looked respectable, but it was meaningless. Only the test set revealed the truth.</li>
<li><strong>Simple models can outperform complex ones.</strong> A naive ‚Äúno-change‚Äù forecast beats our Random Forest here. Sometimes the best prediction is humility.</li>
</ul>
<p><strong>How to improve:</strong></p>
<ul>
<li>Incorporate macro features: Fed Funds futures, CPI expectations, unemployment rates ‚Äî variables that capture regime shifts.</li>
<li>Use regime-switching models (Markov-switching, HMM) that explicitly model structural breaks.</li>
<li>Shorten the forecast horizon: predicting 1-week changes instead of 1-month might work better.</li>
<li>Ensemble with economic models: blend ML forecasts with term structure models (Vasicek, CIR).</li>
</ul>
<p>This extension demonstrates both the <strong>potential and the limits</strong> of machine learning in finance. The infrastructure is there (PCA time series, clean data, feature engineering), but prediction requires more than just throwing algorithms at historical patterns. It requires understanding the economic drivers and respecting the non-stationarity of markets.</p>
<hr>
</section>
<section id="conclusion" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Conclusion</h1>
<p>This project delivers a complete, reproducible framework for interest rate curve modelling and risk analysis. Starting from four observable Treasury yields published daily by FRED, we‚Äôve built a zero-coupon curve, stress-tested it under extreme scenarios, decomposed historical movements into fundamental risk factors, and extended the toolkit with machine learning forecasting.</p>
<p>The results reveal several key insights. First, the current U.S. yield curve is upward sloping (3.40% at 1Y, 4.16% at 10Y), reflecting a 76 basis point term premium, the market‚Äôs compensation for inflation risk and uncertainty about future Fed policy. Second, our PCA analysis shows that 99.3% of yield curve variation over five years is explained by just three factors: level shifts, slope changes, and curvature adjustments. This is why professional risk managers focus on ‚Äúlevel-duration‚Äù and ‚Äúslope-duration‚Äù, it‚Äôs not simplification, it‚Äôs empirical reality.</p>
<p>Third, duration is the primary risk driver: a +100 bp parallel shock drops our portfolio value by roughly 4.5%, consistent with modified duration. But convexity matters too, the price-yield relationship is curved, not linear, meaning gains from rate falls exceed losses from rate rises by a margin that can be worth millions at institutional scale. Fourth, Monte Carlo VaR gives us the full loss distribution, not just a single number. We see the clustering around small moves, the fat left tail of severe downside scenarios, and the symmetric shape that validates our normal shock assumption.</p>
<p>Finally, the Random Forest forecasting module reveals an important lesson about machine learning in finance. Despite having proper infrastructure (PCA time series, clean data, feature engineering), the model failed to generalize to the test period (R¬≤ = -0.068), performing worse than a naive baseline. This failure demonstrates that historical patterns alone cannot capture regime shifts in non-stationary markets. The extension highlights both the potential of ML tools and the critical need to combine them with economic understanding and respect for structural breaks.</p>
<p>The framework is extensible. Natural next steps include adding more maturities (3M bills, 30Y bonds), incorporating credit spreads, building full term structure models (Vasicek, CIR, Hull-White), and feeding macro indicators into the ML module. But even as it stands, this is a production-ready toolkit. The code runs. The data is real. The methods are industry-standard.</p>
<p>That‚Äôs the goal of quantitative finance: turning abstract concepts, discount factors, eigenvalues, convexity, into tools that make better decisions. This project bridges that gap.</p>
<hr>
<p><em>Code and data available on GitHub. Built with Python, Quarto, NumPy, pandas, scikit-learn, and Plotly.</em></p>
<hr>
</section>
<section id="bibliography" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Bibliography</h1>
<ul>
<li><p>Ang, A., &amp; Piazzesi, M. (2003). A no-arbitrage vector autoregression of term structure dynamics with macroeconomic and latent variables. <em>Journal of Monetary Economics</em>, 50(4), 745‚Äì787.</p></li>
<li><p>Bianchi, D., B√ºchner, M., &amp; Tamoni, A. (2021). Bond risk premiums with machine learning. <em>Review of Financial Studies</em>, 34(2), 1046‚Äì1089.</p></li>
<li><p>Diebold, F. X., &amp; Li, C. (2006). Forecasting the term structure of government bond yields. <em>Journal of Econometrics</em>, 130(2), 337‚Äì364.</p></li>
<li><p>Fabozzi, F. J. (2007). <em>Fixed Income Analysis</em> (2nd ed.). John Wiley &amp; Sons.</p></li>
<li><p>Hicks, J. R. (1939). <em>Value and Capital</em>. Oxford University Press.</p></li>
<li><p>Jarrow, R. A. (2009). The term structure of interest rates. <em>Annual Review of Financial Economics</em>, 1(1), 69‚Äì96.</p></li>
<li><p>Litterman, R., &amp; Scheinkman, J. (1991). Common factors affecting bond returns. <em>Journal of Fixed Income</em>, 1(1), 54‚Äì61.</p></li>
<li><p>Macaulay, F. R. (1938). <em>The Movements of Interest Rates, Bond Yields and Stock Prices in the United States Since 1856</em>. National Bureau of Economic Research.</p></li>
<li><p>McCulloch, J. H. (1971). Measuring the term structure of interest rates. <em>Journal of Business</em>, 44(1), 19‚Äì31.</p></li>
<li><p>Nelson, C. R., &amp; Siegel, A. F. (1987). Parsimonious modeling of yield curves. <em>Journal of Business</em>, 60(4), 473‚Äì489.</p></li>
</ul>

<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Interest Rate Curve Bootstrapping &amp; Risk Testing"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">  - "Pape Kane"</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="an">institute:</span><span class="co"> Msc Student, Computer Science and Physics teacher</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> today</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> "#1F4E79"</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="an">toc-location:</span><span class="co"> right</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="an">abstract:</span><span class="co"> |</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co">  This project constructs and analyses the U.S. Treasury zero-coupon yield curve using bootstrapping techniques applied to market data obtained from FRED. We implement spline interpolation and Nelson‚ÄìSiegel parametric fitting, derive forward and swap rates, and assess bond portfolio sensitivity through duration, convexity, and key rate measures. Stress testing and Monte Carlo VaR simulations are conducted to evaluate interest rate risk under various shock scenarios. Principal Component Analysis (PCA) is applied to historical yield curve movements to identify level, slope, and curvature factors. Finally, we extend the framework with a machine learning forecasting module. The project provides a fully reproducible quantitative fixed-income framework linking term structure modelling to practical risk management.</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cosmo</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="co">    math: mathjax</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="co">    include-in-header:</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="co">      text: |</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="co">        &lt;script src="https://cdn.plot.ly/plotly-latest.min.js"&gt;&lt;/script&gt;</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf:</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="co">    documentclass: scrreprt</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="co">    papersize: a4</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a><span class="co">    colorlinks: true</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a><span class="co">    geometry:</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a><span class="co">      - margin=2.5cm</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a><span class="co">    keep-tex: false</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a><span class="co">    include-in-header:</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a><span class="co">      text: |</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a><span class="co">        \usepackage{fancyhdr}</span></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="co">        \usepackage{graphicx}</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a><span class="co">        \pagestyle{fancy}</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a><span class="co">        \fancyhead[L]{HEC Lausanne, Actuarial Finance}</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a><span class="co">        \fancyhead[R]{Pape Kane}</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a><span class="co">    pdf-engine: xelatex</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="co">  pptx:</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a><span class="co">    slide-level: 2</span></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: kable</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="co">    keep-md: false</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: false</span></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="co">    incremental: true</span></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a><span class="co">    footer: "Interest Rate Risk Framework ‚Äî HEC Lausanne"</span></span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a><span class="fu"># Interest Rate Curve Bootstrapping &amp; Risk Testing</span></span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° Why does the yield curve matter?</span></span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a>When you lend money for 1 year vs. 10 years, you expect a different return. The **yield curve** captures exactly that: how interest rates vary across maturities. Central banks, banks, insurers, and asset managers watch it daily, because it drives the price of virtually every financial instrument, from mortgages to derivatives.</span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a>Interest rate modelling sits at the very heart of modern finance. Every bond, every swap, every mortgage-backed security, their values all depend fundamentally on one thing: the term structure of interest rates. This project tackles that problem head-on by building a complete framework for constructing, analysing, and stress-testing the U.S. Treasury yield curve.</span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a>The motivation is straightforward. If you're managing a pension fund with billions in fixed-income assets, you need to know what happens when the Federal Reserve raises rates by 75 basis points. If you're an insurer with long-dated liabilities stretching 30 years into the future, you need to discount those cash flows at the right rate today, and understand how sensitive your balance sheet is to curve reshapings. If you're a derivatives desk pricing interest rate swaps, you need forward rates that are arbitrage-free and dynamically consistent with the spot curve.</span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a>We start from the raw data published daily by the Federal Reserve Economic Data (FRED) platform: Treasury yields at four key maturities (1Y, 2Y, 5Y, 10Y). From these four observable points, we reconstruct the full zero-coupon yield curve using bootstrapping, a recursive procedure that ensures no riskless arbitrage opportunities exist. We then fit smooth interpolation functions, both non-parametric (cubic splines) and parametric (Nelson‚ÄìSiegel), allowing us to extract rates at any intermediate maturity needed for pricing.</span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a>Once the curve is built, the real work begins: risk analysis. We compute duration and convexity to quantify first- and second-order sensitivities to parallel shifts. We stress-test the curve under extreme scenarios, parallel shocks, steepeners, flatteners, and measure portfolio value-at-risk using Monte Carlo simulation with 2 000 simulated interest rate paths. We decompose historical yield curve movements using Principal Component Analysis (PCA), isolating the three fundamental drivers of curve dynamics: level shifts, slope changes, and curvature adjustments.</span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-81"><a href="#cb30-81" aria-hidden="true" tabindex="-1"></a>Finally, we push the framework one step further. Using the time series of daily yield changes we've already prepared for PCA, we build a machine learning forecasting module based on a Random Forest regressor. The model learns patterns in how short-term rates predict longer-term movements, giving us a simple but powerful tool for projecting the curve forward in time.</span>
<span id="cb30-82"><a href="#cb30-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-83"><a href="#cb30-83" aria-hidden="true" tabindex="-1"></a>**The objective is clear:** build a reproducible, extensible quantitative framework that bridges textbook theory with the tools used daily by practitioners in asset management, banking, and actuarial science.</span>
<span id="cb30-84"><a href="#cb30-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-85"><a href="#cb30-85" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-86"><a href="#cb30-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-87"><a href="#cb30-87" aria-hidden="true" tabindex="-1"></a><span class="fu">## Literature Review</span></span>
<span id="cb30-88"><a href="#cb30-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-89"><a href="#cb30-89" aria-hidden="true" tabindex="-1"></a>The term structure of interest rates has been extensively studied in financial economics, with foundational work establishing both the theoretical basis for arbitrage-free pricing and empirical regularities in yield curve dynamics.</span>
<span id="cb30-90"><a href="#cb30-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-91"><a href="#cb30-91" aria-hidden="true" tabindex="-1"></a>**Bootstrapping and arbitrage-free pricing.** The construction of zero-coupon curves from coupon-bearing instruments was formalized by McCulloch (1971) and Nelson and Siegel (1987), who introduced the parametric curve that bears their names. The bootstrapping procedure ensures consistency with the no-arbitrage condition: discount factors must be such that no combination of bonds can generate riskless profit (Jarrow 2009).</span>
<span id="cb30-92"><a href="#cb30-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-93"><a href="#cb30-93" aria-hidden="true" tabindex="-1"></a>**Yield curve factor structure.** Empirical research consistently finds that yield curve movements are driven by a small number of common factors. Litterman and Scheinkman (1991) applied Principal Component Analysis to U.S. Treasury yields and identified three dominant factors, level, slope, and curvature, which collectively explain over 95% of variation. This finding has been replicated across markets and time periods (Ang and Piazzesi 2003; Diebold and Li 2006).</span>
<span id="cb30-94"><a href="#cb30-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-95"><a href="#cb30-95" aria-hidden="true" tabindex="-1"></a>**Duration, convexity, and risk measures.** Macaulay (1938) introduced duration as a measure of interest rate sensitivity, later refined by Hicks (1939) into modified duration. Convexity, the second-order correction for non-linearity in the price-yield relationship, was developed to improve hedging strategies in volatile markets (Fabozzi 2007).</span>
<span id="cb30-96"><a href="#cb30-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-97"><a href="#cb30-97" aria-hidden="true" tabindex="-1"></a>**Machine learning in yield curve forecasting.** While traditional econometric models have dominated term structure forecasting (Diebold and Li 2006), recent work has explored machine learning approaches. Bianchi, B√ºchner, and Tamoni (2021) demonstrate that Random Forests can capture non-linear dependencies in rate dynamics, though they emphasize the challenge of non-stationarity and structural breaks.</span>
<span id="cb30-98"><a href="#cb30-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-99"><a href="#cb30-99" aria-hidden="true" tabindex="-1"></a>This literature provides the foundation for our analysis. Our contribution lies in integrating these components into a single, reproducible framework with modern computational tools (Quarto, Python, Plotly) suitable for both academic instruction and professional application.</span>
<span id="cb30-100"><a href="#cb30-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-101"><a href="#cb30-101" aria-hidden="true" tabindex="-1"></a><span class="fu">## Research Questions</span></span>
<span id="cb30-102"><a href="#cb30-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-103"><a href="#cb30-103" aria-hidden="true" tabindex="-1"></a>This project investigates how to construct, analyze, and manage interest rate risk using U.S. Treasury data. The analysis is guided by the following questions:</span>
<span id="cb30-104"><a href="#cb30-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-105"><a href="#cb30-105" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How can we construct an arbitrage-free zero-coupon yield curve from observed market rates using bootstrapping?</span>
<span id="cb30-106"><a href="#cb30-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-107"><a href="#cb30-107" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>What are the differences between non-parametric (cubic spline) and parametric (Nelson‚ÄìSiegel) interpolation methods?</span>
<span id="cb30-108"><a href="#cb30-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-109"><a href="#cb30-109" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How do duration and convexity quantify bond portfolio sensitivity to interest rate shocks?</span>
<span id="cb30-110"><a href="#cb30-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-111"><a href="#cb30-111" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How much of yield curve variation is explained by level, slope, and curvature factors?</span>
<span id="cb30-112"><a href="#cb30-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-113"><a href="#cb30-113" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Can machine learning models successfully forecast short-term interest rate movements, or do structural breaks limit their usefulness?</span>
<span id="cb30-114"><a href="#cb30-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-115"><a href="#cb30-115" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>What are the practical implications for portfolio management and stress testing?</span>
<span id="cb30-116"><a href="#cb30-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-117"><a href="#cb30-117" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resources &amp; Implementation</span></span>
<span id="cb30-118"><a href="#cb30-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-119"><a href="#cb30-119" aria-hidden="true" tabindex="-1"></a>All computational routines are centralized in the module <span class="in">`rates.py`</span>, which provides:</span>
<span id="cb30-120"><a href="#cb30-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-121"><a href="#cb30-121" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Data loading and cleaning** to standardize FRED CSV files</span>
<span id="cb30-122"><a href="#cb30-122" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Bootstrapping and interpolation** for zero-coupon curve construction</span>
<span id="cb30-123"><a href="#cb30-123" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Risk measure computation** (duration, convexity, forward rates, swap rates)</span>
<span id="cb30-124"><a href="#cb30-124" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Stress testing and simulation** (parallel shifts, scenario grids, Monte Carlo VaR)</span>
<span id="cb30-125"><a href="#cb30-125" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**PCA decomposition** to extract level/slope/curvature factors</span>
<span id="cb30-126"><a href="#cb30-126" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Interactive visualization** using Plotly</span>
<span id="cb30-127"><a href="#cb30-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-128"><a href="#cb30-128" aria-hidden="true" tabindex="-1"></a>By consolidating these components in a single module, the project ensures reproducibility and a clean separation between computation and presentation.</span>
<span id="cb30-129"><a href="#cb30-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-130"><a href="#cb30-130" aria-hidden="true" tabindex="-1"></a>**AI assistance disclosure.** AI tools (Claude, GPT-4) were used to debug Python errors, improve code readability, and clarify technical writing. All modeling choices and statistical interpretations were made manually by the author.</span>
<span id="cb30-131"><a href="#cb30-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-132"><a href="#cb30-132" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-133"><a href="#cb30-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-134"><a href="#cb30-134" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Acquisition</span></span>
<span id="cb30-135"><a href="#cb30-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-136"><a href="#cb30-136" aria-hidden="true" tabindex="-1"></a><span class="fu">## U.S. Treasury Yields (FRED)</span></span>
<span id="cb30-137"><a href="#cb30-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-138"><a href="#cb30-138" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-139"><a href="#cb30-139" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is FRED?</span></span>
<span id="cb30-140"><a href="#cb30-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-141"><a href="#cb30-141" aria-hidden="true" tabindex="-1"></a>FRED (Federal Reserve Economic Data) is the Federal Reserve's open data platform. It provides daily U.S. Treasury yields for all standard maturities, freely accessible and widely used as the reference source in quantitative finance.</span>
<span id="cb30-142"><a href="#cb30-142" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-143"><a href="#cb30-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-144"><a href="#cb30-144" aria-hidden="true" tabindex="-1"></a>We work with U.S. Treasury yields downloaded from FRED, covering four key maturities: **1-year, 2-year, 5-year, and 10-year**. These aren't randomly chosen, they span the full term structure in a way that captures short-term monetary policy expectations (1Y), medium-term growth and inflation views (2Y, 5Y), and long-run equilibrium rates (10Y). Together, they give us enough anchor points to reconstruct the entire curve through interpolation.</span>
<span id="cb30-145"><a href="#cb30-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-146"><a href="#cb30-146" aria-hidden="true" tabindex="-1"></a>The data runs from February 2021 through February 2026, giving us roughly 1 250 trading days, about five years of history. That's long enough to capture the full post-pandemic monetary policy cycle: the near-zero rate environment of 2021, the historic Fed hiking campaign of 2022‚Äì2023 (the fastest tightening cycle in four decades), and the stabilization phase we're living through now in early 2026. This period is particularly valuable for risk modelling because it includes both extreme volatility and quieter regimes.</span>
<span id="cb30-147"><a href="#cb30-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-148"><a href="#cb30-148" aria-hidden="true" tabindex="-1"></a>Each CSV file from FRED arrives with two columns: <span class="in">`observation_date`</span> and the ticker symbol (e.g., <span class="in">`DGS10`</span> for the 10-year rate). We standardize these to <span class="in">`date`</span> and <span class="in">`rate`</span>, convert from percentage format (e.g., 3.45) to decimal (0.0345), and attach maturity labels. Any missing values, usually around federal holidays when the bond market is closed, are dropped. The result is a clean, tidy DataFrame ready for analysis.</span>
<span id="cb30-149"><a href="#cb30-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-152"><a href="#cb30-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-153"><a href="#cb30-153" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb30-154"><a href="#cb30-154" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb30-155"><a href="#cb30-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-156"><a href="#cb30-156" aria-hidden="true" tabindex="-1"></a>sys.path.append(<span class="bu">str</span>(Path().resolve().parent))</span>
<span id="cb30-157"><a href="#cb30-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-158"><a href="#cb30-158" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> src.rates <span class="im">import</span> <span class="op">*</span></span>
<span id="cb30-159"><a href="#cb30-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-160"><a href="#cb30-160" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> load_us_treasury_from_csv(<span class="st">"../data"</span>)</span>
<span id="cb30-161"><a href="#cb30-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-162"><a href="#cb30-162" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> data[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb30-163"><a href="#cb30-163" aria-hidden="true" tabindex="-1"></a>zero_rates <span class="op">=</span> extract_zero_rates_at_date(data, latest_date)</span>
<span id="cb30-164"><a href="#cb30-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-165"><a href="#cb30-165" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latest available date:"</span>, latest_date.date())</span>
<span id="cb30-166"><a href="#cb30-166" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Zero rates snapshot:"</span>)</span>
<span id="cb30-167"><a href="#cb30-167" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mat, rate <span class="kw">in</span> zero_rates.items():</span>
<span id="cb30-168"><a href="#cb30-168" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>mat<span class="sc">:&gt;2}</span><span class="ss">Y : </span><span class="sc">{</span>rate<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-169"><a href="#cb30-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-170"><a href="#cb30-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-171"><a href="#cb30-171" aria-hidden="true" tabindex="-1"></a>What we see here is the current state of the market as of the most recent trading day in our dataset. Notice the upward slope: the 10-year rate sits 76 basis points above the 1-year rate. This is what bond traders call a "positive term premium", investors demand higher compensation for locking up their money longer, reflecting both inflation risk and uncertainty about future Fed policy.</span>
<span id="cb30-172"><a href="#cb30-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-173"><a href="#cb30-173" aria-hidden="true" tabindex="-1"></a>It's worth pausing to appreciate how much information is embedded in these four numbers. The 1-year rate effectively tells us where the market thinks the Federal Funds rate will average over the next twelve months. The 10-year rate incorporates expectations about growth, inflation, and risk premiums stretching out to 2036. The slope between them, steepness or flatness, has historically been one of the best recession predictors: when the curve inverts (short rates above long rates), recessions tend to follow within 12‚Äì18 months. We're not inverted now, which is consistent with the consensus view that the U.S. economy is stabilizing rather than contracting.</span>
<span id="cb30-174"><a href="#cb30-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-175"><a href="#cb30-175" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Observation:** The yield curve is currently **upward sloping**, reflecting a typical term premium, investors demand higher rates for longer maturities. This is the "normal" shape in non-recessionary environments.</span></span>
<span id="cb30-176"><a href="#cb30-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-177"><a href="#cb30-177" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Limitations</span></span>
<span id="cb30-178"><a href="#cb30-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-179"><a href="#cb30-179" aria-hidden="true" tabindex="-1"></a>While FRED provides high-quality, reliable data, several limitations should be acknowledged:</span>
<span id="cb30-180"><a href="#cb30-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-181"><a href="#cb30-181" aria-hidden="true" tabindex="-1"></a>**Limited maturity coverage.** We observe only four discrete maturities. Pricing bonds at intermediate tenors requires interpolation, which introduces model risk. The choice between spline and Nelson‚ÄìSiegel affects derived forward rates and valuations.</span>
<span id="cb30-182"><a href="#cb30-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-183"><a href="#cb30-183" aria-hidden="true" tabindex="-1"></a>**Constant maturity construction.** FRED rates are synthetic "constant maturity" yields derived from actively traded securities with varying actual maturities, introducing small approximation errors compared to zero-coupon strip prices.</span>
<span id="cb30-184"><a href="#cb30-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-185"><a href="#cb30-185" aria-hidden="true" tabindex="-1"></a>**Missing data on non-trading days.** The dataset excludes weekends and federal holidays. PCA daily returns are computed on business days only.</span>
<span id="cb30-186"><a href="#cb30-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-187"><a href="#cb30-187" aria-hidden="true" tabindex="-1"></a>**No credit risk or liquidity premiums.** FRED yields reflect only the "risk-free" term structure. Actual portfolios contain corporate bonds and other securities with credit spreads not captured here.</span>
<span id="cb30-188"><a href="#cb30-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-189"><a href="#cb30-189" aria-hidden="true" tabindex="-1"></a>**Structural breaks and non-stationarity.** The 2021‚Äì2026 period includes unprecedented monetary policy shifts. Models trained on this data may fail to generalize if future Fed policy differs structurally, a fundamental challenge in financial forecasting.</span>
<span id="cb30-190"><a href="#cb30-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-191"><a href="#cb30-191" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-192"><a href="#cb30-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-193"><a href="#cb30-193" aria-hidden="true" tabindex="-1"></a><span class="fu"># Theoretical Framework</span></span>
<span id="cb30-194"><a href="#cb30-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-195"><a href="#cb30-195" aria-hidden="true" tabindex="-1"></a><span class="fu">## Zero-Coupon Bond Pricing</span></span>
<span id="cb30-196"><a href="#cb30-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-197"><a href="#cb30-197" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-198"><a href="#cb30-198" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is a discount factor?</span></span>
<span id="cb30-199"><a href="#cb30-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-200"><a href="#cb30-200" aria-hidden="true" tabindex="-1"></a>A discount factor $DF(T)$ answers a simple question: *how much is 1 dollar receivable in $T$ years worth today?* If rates are 4%, a dollar in 10 years is worth roughly $0.676 today. The lower the discount factor, the higher the implied interest rate.</span>
<span id="cb30-201"><a href="#cb30-201" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-202"><a href="#cb30-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-203"><a href="#cb30-203" aria-hidden="true" tabindex="-1"></a>The price of a coupon bond is the sum of all future cash flows, each discounted to today:</span>
<span id="cb30-204"><a href="#cb30-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-205"><a href="#cb30-205" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-206"><a href="#cb30-206" aria-hidden="true" tabindex="-1"></a>P = \sum_{t=1}^{T-1} C \cdot DF(t) + (C + F)\cdot DF(T)</span>
<span id="cb30-207"><a href="#cb30-207" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-208"><a href="#cb30-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-209"><a href="#cb30-209" aria-hidden="true" tabindex="-1"></a>where $C$ is the annual coupon, $F$ is the face value, and $DF(t)$ is the discount factor at maturity $t$.</span>
<span id="cb30-210"><a href="#cb30-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-211"><a href="#cb30-211" aria-hidden="true" tabindex="-1"></a>The discount factor is linked to the **zero rate** $r_T$ through:</span>
<span id="cb30-212"><a href="#cb30-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-213"><a href="#cb30-213" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-214"><a href="#cb30-214" aria-hidden="true" tabindex="-1"></a>DF(T) = \frac{1}{(1+r_T)^T} \qquad \Longrightarrow \qquad r_T = DF(T)^{-1/T} - 1</span>
<span id="cb30-215"><a href="#cb30-215" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-216"><a href="#cb30-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-217"><a href="#cb30-217" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-218"><a href="#cb30-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-219"><a href="#cb30-219" aria-hidden="true" tabindex="-1"></a><span class="fu"># Bootstrapping the Zero Curve</span></span>
<span id="cb30-220"><a href="#cb30-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-221"><a href="#cb30-221" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-222"><a href="#cb30-222" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is bootstrapping?</span></span>
<span id="cb30-223"><a href="#cb30-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-224"><a href="#cb30-224" aria-hidden="true" tabindex="-1"></a>Bootstrapping is an iterative procedure: starting from the shortest maturity, we extract the discount factor that makes the bond price consistent with the market. We then use that result to move to the next maturity. The output is a **set of zero rates**, pure, coupon-free rates for each horizon, constructed to be arbitrage-free.</span>
<span id="cb30-225"><a href="#cb30-225" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-226"><a href="#cb30-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-227"><a href="#cb30-227" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mathematical Formulation</span></span>
<span id="cb30-228"><a href="#cb30-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-229"><a href="#cb30-229" aria-hidden="true" tabindex="-1"></a>Consider a coupon-bearing bond with maturity $T$, annual coupon $C = c \cdot F$ (where $c$ is the coupon rate and $F$ is face value), and market price $P$. The no-arbitrage condition requires:</span>
<span id="cb30-230"><a href="#cb30-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-231"><a href="#cb30-231" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-232"><a href="#cb30-232" aria-hidden="true" tabindex="-1"></a>P = \sum_{t=1}^{T-1} C \cdot DF(t) + (C + F) \cdot DF(T)</span>
<span id="cb30-233"><a href="#cb30-233" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-234"><a href="#cb30-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-235"><a href="#cb30-235" aria-hidden="true" tabindex="-1"></a>If we have already bootstrapped discount factors $DF(1), DF(2), \ldots, DF(T-1)$ from shorter maturities, we can solve for $DF(T)$ by rearranging:</span>
<span id="cb30-236"><a href="#cb30-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-237"><a href="#cb30-237" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-238"><a href="#cb30-238" aria-hidden="true" tabindex="-1"></a>DF(T) = \frac{P - \displaystyle\sum_{t=1}^{T-1} C \cdot DF(t)}{C + F}</span>
<span id="cb30-239"><a href="#cb30-239" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-240"><a href="#cb30-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-241"><a href="#cb30-241" aria-hidden="true" tabindex="-1"></a>This is the **bootstrapping recursion**. Once we have $DF(T)$, we recover the zero rate via:</span>
<span id="cb30-242"><a href="#cb30-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-243"><a href="#cb30-243" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-244"><a href="#cb30-244" aria-hidden="true" tabindex="-1"></a>r(T) = DF(T)^{-1/T} - 1 = \left( \frac{1}{DF(T)} \right)^{1/T} - 1</span>
<span id="cb30-245"><a href="#cb30-245" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-246"><a href="#cb30-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-247"><a href="#cb30-247" aria-hidden="true" tabindex="-1"></a>**Arbitrage-free property:** If market prices are internally consistent, this procedure guarantees that no combination of bonds can generate riskless profit. Any deviation would create an arbitrage opportunity that would be instantly exploited away.</span>
<span id="cb30-248"><a href="#cb30-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-251"><a href="#cb30-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-252"><a href="#cb30-252" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> data[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb30-253"><a href="#cb30-253" aria-hidden="true" tabindex="-1"></a>zero_rates <span class="op">=</span> extract_zero_rates_at_date(data, latest_date)</span>
<span id="cb30-254"><a href="#cb30-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-255"><a href="#cb30-255" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb30-256"><a href="#cb30-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-257"><a href="#cb30-257" aria-hidden="true" tabindex="-1"></a>dfs <span class="op">=</span> zero_to_discount_factors(zero_rates)</span>
<span id="cb30-258"><a href="#cb30-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-259"><a href="#cb30-259" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> pd.DataFrame({</span>
<span id="cb30-260"><a href="#cb30-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Maturity (Y)"</span>: <span class="bu">list</span>(zero_rates.keys()),</span>
<span id="cb30-261"><a href="#cb30-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Zero Rate (%)"</span>: [<span class="ss">f"</span><span class="sc">{</span>r<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">"</span> <span class="cf">for</span> r <span class="kw">in</span> zero_rates.values()],</span>
<span id="cb30-262"><a href="#cb30-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Discount Factor"</span>: [<span class="ss">f"</span><span class="sc">{</span>dfs[T]<span class="sc">:.4f}</span><span class="ss">"</span> <span class="cf">for</span> T <span class="kw">in</span> zero_rates.keys()],</span>
<span id="cb30-263"><a href="#cb30-263" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb30-264"><a href="#cb30-264" aria-hidden="true" tabindex="-1"></a>summary</span>
<span id="cb30-265"><a href="#cb30-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-266"><a href="#cb30-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-267"><a href="#cb30-267" aria-hidden="true" tabindex="-1"></a>This procedure ensures **arbitrage-free construction** of the zero curve: no riskless profit is possible from combinations of these instruments.</span>
<span id="cb30-268"><a href="#cb30-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-269"><a href="#cb30-269" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-270"><a href="#cb30-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-271"><a href="#cb30-271" aria-hidden="true" tabindex="-1"></a><span class="fu"># Curve Interpolation</span></span>
<span id="cb30-272"><a href="#cb30-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-273"><a href="#cb30-273" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-274"><a href="#cb30-274" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° Why interpolate?</span></span>
<span id="cb30-275"><a href="#cb30-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-276"><a href="#cb30-276" aria-hidden="true" tabindex="-1"></a>We only observe rates at 4 maturities (1Y, 2Y, 5Y, 10Y). But pricing a bond maturing in 3 or 7 years requires rates at those tenors too. Interpolation fills the gaps, the question is *how* to do it smoothly and economically.</span>
<span id="cb30-277"><a href="#cb30-277" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-278"><a href="#cb30-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-279"><a href="#cb30-279" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cubic Spline</span></span>
<span id="cb30-280"><a href="#cb30-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-281"><a href="#cb30-281" aria-hidden="true" tabindex="-1"></a>A **natural cubic spline** fits a smooth, piecewise polynomial curve that passes exactly through each observed point. It minimises curvature (second-derivative) globally, producing the smoothest possible interpolation.</span>
<span id="cb30-282"><a href="#cb30-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-285"><a href="#cb30-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-286"><a href="#cb30-286" aria-hidden="true" tabindex="-1"></a>spline_curve <span class="op">=</span> interpolate_zero_curve_spline(zero_rates)</span>
<span id="cb30-287"><a href="#cb30-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-288"><a href="#cb30-288" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstrate interpolation at intermediate maturities</span></span>
<span id="cb30-289"><a href="#cb30-289" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Cubic Spline Interpolation:"</span>)</span>
<span id="cb30-290"><a href="#cb30-290" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 2Y rate : </span><span class="sc">{</span>zero_rates[<span class="dv">2</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-291"><a href="#cb30-291" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Interpolated 3Y  : </span><span class="sc">{</span>spline_curve(<span class="dv">3</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-292"><a href="#cb30-292" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 5Y rate : </span><span class="sc">{</span>zero_rates[<span class="dv">5</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-293"><a href="#cb30-293" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Interpolated 7Y  : </span><span class="sc">{</span>spline_curve(<span class="dv">7</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-294"><a href="#cb30-294" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Observed 10Y rate: </span><span class="sc">{</span>zero_rates[<span class="dv">10</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-295"><a href="#cb30-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-296"><a href="#cb30-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-297"><a href="#cb30-297" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nelson‚ÄìSiegel Parametric Curve</span></span>
<span id="cb30-298"><a href="#cb30-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-299"><a href="#cb30-299" aria-hidden="true" tabindex="-1"></a>The **Nelson‚ÄìSiegel** model imposes economic structure on the curve. Its four parameters each have a direct interpretation:</span>
<span id="cb30-300"><a href="#cb30-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-301"><a href="#cb30-301" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-302"><a href="#cb30-302" aria-hidden="true" tabindex="-1"></a>r(T) = \underbrace{\beta_0}_{\text{level}} + \underbrace{\beta_1 \frac{1 - e^{-T/\tau}}{T/\tau}}_{\text{slope}} + \underbrace{\beta_2 \left(\frac{1 - e^{-T/\tau}}{T/\tau} - e^{-T/\tau}\right)}_{\text{curvature}}</span>
<span id="cb30-303"><a href="#cb30-303" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-304"><a href="#cb30-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-305"><a href="#cb30-305" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Parameter <span class="pp">|</span> Interpretation <span class="pp">|</span></span>
<span id="cb30-306"><a href="#cb30-306" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----------|----------------|</span></span>
<span id="cb30-307"><a href="#cb30-307" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\beta_0$ <span class="pp">|</span> Long-run level (rate at infinite maturity) <span class="pp">|</span></span>
<span id="cb30-308"><a href="#cb30-308" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\beta_1$ <span class="pp">|</span> Slope: spread between short and long rates <span class="pp">|</span></span>
<span id="cb30-309"><a href="#cb30-309" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\beta_2$ <span class="pp">|</span> Curvature: hump in the middle of the curve <span class="pp">|</span></span>
<span id="cb30-310"><a href="#cb30-310" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\tau$    <span class="pp">|</span> Speed at which short-term effects decay <span class="pp">|</span></span>
<span id="cb30-311"><a href="#cb30-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-314"><a href="#cb30-314" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-315"><a href="#cb30-315" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> fit_nelson_siegel(zero_rates)</span>
<span id="cb30-316"><a href="#cb30-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-317"><a href="#cb30-317" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Nelson-Siegel fitted parameters:"</span>)</span>
<span id="cb30-318"><a href="#cb30-318" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÄ (level)     = </span><span class="sc">{</span>params[<span class="dv">0</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-319"><a href="#cb30-319" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÅ (slope)     = </span><span class="sc">{</span>params[<span class="dv">1</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-320"><a href="#cb30-320" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Œ≤‚ÇÇ (curvature) = </span><span class="sc">{</span>params[<span class="dv">2</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-321"><a href="#cb30-321" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  œÑ  (decay)     = </span><span class="sc">{</span>params[<span class="dv">3</span>]<span class="sc">:.3f}</span><span class="ss"> years"</span>)</span>
<span id="cb30-322"><a href="#cb30-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-323"><a href="#cb30-323" aria-hidden="true" tabindex="-1"></a>ns_curve <span class="op">=</span> <span class="kw">lambda</span> T: nelson_siegel(T, <span class="op">*</span>params)</span>
<span id="cb30-324"><a href="#cb30-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-325"><a href="#cb30-325" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plot_yield_curve_interactive(zero_rates, spline_curve, ns_curve)</span>
<span id="cb30-326"><a href="#cb30-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-327"><a href="#cb30-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-328"><a href="#cb30-328" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Reading the chart:** Both the spline and Nelson‚ÄìSiegel fit the 4 observed points closely. The Nelson‚ÄìSiegel curve is slightly smoother, while the spline captures local curvature more faithfully. The upward slope reflects current market expectations.</span></span>
<span id="cb30-329"><a href="#cb30-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-330"><a href="#cb30-330" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-331"><a href="#cb30-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-332"><a href="#cb30-332" aria-hidden="true" tabindex="-1"></a><span class="fu"># Forward &amp; Swap Rates</span></span>
<span id="cb30-333"><a href="#cb30-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-334"><a href="#cb30-334" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-335"><a href="#cb30-335" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is a forward rate?</span></span>
<span id="cb30-336"><a href="#cb30-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-337"><a href="#cb30-337" aria-hidden="true" tabindex="-1"></a>A forward rate $f(T_1, T_2)$ is the rate the market is *implicitly quoting today* for borrowing or lending between future dates $T_1$ and $T_2$. It is not a forecast, it is a no-arbitrage implication of the current yield curve.</span>
<span id="cb30-338"><a href="#cb30-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-339"><a href="#cb30-339" aria-hidden="true" tabindex="-1"></a>A **swap rate** is the fixed rate that makes an interest rate swap fair at inception: it equals the weighted average of expected floating rates over the swap's life.</span>
<span id="cb30-340"><a href="#cb30-340" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-341"><a href="#cb30-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-342"><a href="#cb30-342" aria-hidden="true" tabindex="-1"></a><span class="fu">## Forward Rate Derivation</span></span>
<span id="cb30-343"><a href="#cb30-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-344"><a href="#cb30-344" aria-hidden="true" tabindex="-1"></a>A forward rate $f(T_1, T_2)$ is the rate agreed upon today for borrowing/lending between future dates $T_1$ and $T_2$. It is **not a forecast** ‚Äî it is an arbitrage-free implication of the current zero curve.</span>
<span id="cb30-345"><a href="#cb30-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-346"><a href="#cb30-346" aria-hidden="true" tabindex="-1"></a>**No-arbitrage condition:** Consider two investment strategies over horizon $<span class="co">[</span><span class="ot">0, T_2</span><span class="co">]</span>$:</span>
<span id="cb30-347"><a href="#cb30-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-348"><a href="#cb30-348" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Strategy A:** Invest \$1 today at the zero rate $r(T_2)$ for $T_2$ years.</span>
<span id="cb30-349"><a href="#cb30-349" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Strategy B:** Invest \$1 at $r(T_1)$ for $T_1$ years, then roll over at the forward rate $f(T_1, T_2)$ for $(T_2 - T_1)$ years.</span>
<span id="cb30-350"><a href="#cb30-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-351"><a href="#cb30-351" aria-hidden="true" tabindex="-1"></a>Both strategies must yield the same terminal value to prevent arbitrage:</span>
<span id="cb30-352"><a href="#cb30-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-353"><a href="#cb30-353" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-354"><a href="#cb30-354" aria-hidden="true" tabindex="-1"></a>(1 + r(T_2))^{T_2} = (1 + r(T_1))^{T_1} \cdot (1 + f(T_1, T_2))^{T_2 - T_1}</span>
<span id="cb30-355"><a href="#cb30-355" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-356"><a href="#cb30-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-357"><a href="#cb30-357" aria-hidden="true" tabindex="-1"></a>Solving for $f(T_1, T_2)$:</span>
<span id="cb30-358"><a href="#cb30-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-359"><a href="#cb30-359" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-360"><a href="#cb30-360" aria-hidden="true" tabindex="-1"></a>f(T_1, T_2) = \left( \frac{(1 + r(T_2))^{T_2}}{(1 + r(T_1))^{T_1}} \right)^{\frac{1}{T_2 - T_1}} - 1</span>
<span id="cb30-361"><a href="#cb30-361" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-362"><a href="#cb30-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-363"><a href="#cb30-363" aria-hidden="true" tabindex="-1"></a>Using the relationship $DF(T) = (1 + r(T))^{-T}$, this simplifies to:</span>
<span id="cb30-364"><a href="#cb30-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-365"><a href="#cb30-365" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-366"><a href="#cb30-366" aria-hidden="true" tabindex="-1"></a>f(T_1,T_2) =</span>
<span id="cb30-367"><a href="#cb30-367" aria-hidden="true" tabindex="-1"></a>\left(\frac{DF(T_1)}{DF(T_2)}\right)^{<span class="sc">\!</span>\frac{1}{T_2-T_1}} - 1</span>
<span id="cb30-368"><a href="#cb30-368" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-369"><a href="#cb30-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-370"><a href="#cb30-370" aria-hidden="true" tabindex="-1"></a>**Economic interpretation:** If the curve is upward sloping ($r(T_2) &gt; r(T_1)$), forward rates lie **above** spot rates. This reflects the market's pricing of term premium and expectations.</span>
<span id="cb30-371"><a href="#cb30-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-374"><a href="#cb30-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-375"><a href="#cb30-375" aria-hidden="true" tabindex="-1"></a>forwards <span class="op">=</span> full_forward_curve(zero_rates)</span>
<span id="cb30-376"><a href="#cb30-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-377"><a href="#cb30-377" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Implied forward rates:"</span>)</span>
<span id="cb30-378"><a href="#cb30-378" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (T1, T2), f <span class="kw">in</span> forwards.items():</span>
<span id="cb30-379"><a href="#cb30-379" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  f(</span><span class="sc">{</span>T1<span class="sc">}</span><span class="ss">Y ‚Üí </span><span class="sc">{</span>T2<span class="sc">}</span><span class="ss">Y) = </span><span class="sc">{</span>f<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-380"><a href="#cb30-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-381"><a href="#cb30-381" aria-hidden="true" tabindex="-1"></a>s10 <span class="op">=</span> swap_rate(zero_rates, <span class="dv">10</span>, curve_function<span class="op">=</span>spline_curve)</span>
<span id="cb30-382"><a href="#cb30-382" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">10-year par swap rate: </span><span class="sc">{</span>s10<span class="op">*</span><span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">%"</span>)</span>
<span id="cb30-383"><a href="#cb30-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-384"><a href="#cb30-384" aria-hidden="true" tabindex="-1"></a>fig_fwd <span class="op">=</span> plot_forward_rates_interactive(zero_rates)</span>
<span id="cb30-385"><a href="#cb30-385" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-386"><a href="#cb30-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-387"><a href="#cb30-387" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Key insight:** Forward rates are *above* spot zero rates, consistent with an upward-sloping curve. The market prices in rising rates over the medium term.</span></span>
<span id="cb30-388"><a href="#cb30-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-389"><a href="#cb30-389" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-390"><a href="#cb30-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-391"><a href="#cb30-391" aria-hidden="true" tabindex="-1"></a><span class="fu"># Bond Pricing &amp; Risk Measures</span></span>
<span id="cb30-392"><a href="#cb30-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-393"><a href="#cb30-393" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-394"><a href="#cb30-394" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° Duration and Convexity, the two essential risk metrics</span></span>
<span id="cb30-395"><a href="#cb30-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-396"><a href="#cb30-396" aria-hidden="true" tabindex="-1"></a>**Duration** measures how much a bond's price falls when rates rise by 1 basis point. A duration of 4.5 means the bond loses roughly 4.5% of its value if rates jump by 100 bps.</span>
<span id="cb30-397"><a href="#cb30-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-398"><a href="#cb30-398" aria-hidden="true" tabindex="-1"></a>**Convexity** adds a second-order correction: because the price‚Äìyield relationship is curved (not linear), duration alone underestimates price gains and overestimates losses. Higher convexity is generally desirable.</span>
<span id="cb30-399"><a href="#cb30-399" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-400"><a href="#cb30-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-401"><a href="#cb30-401" aria-hidden="true" tabindex="-1"></a><span class="fu">## Bond Pricing from Zero Curve</span></span>
<span id="cb30-402"><a href="#cb30-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-405"><a href="#cb30-405" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-406"><a href="#cb30-406" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> bond_price_from_curve(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb30-407"><a href="#cb30-407" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"5Y bond (3% coupon, face 100) ‚Üí Price = </span><span class="sc">{</span>price<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb30-408"><a href="#cb30-408" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Bond is trading </span><span class="sc">{</span><span class="st">'at a discount'</span> <span class="cf">if</span> price <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">else</span> <span class="st">'at a premium'</span><span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb30-409"><a href="#cb30-409" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(market rates </span><span class="sc">{</span><span class="st">'above'</span> <span class="cf">if</span> price <span class="op">&lt;</span> <span class="dv">100</span> <span class="cf">else</span> <span class="st">'below'</span><span class="sc">}</span><span class="ss"> coupon rate)"</span>)</span>
<span id="cb30-410"><a href="#cb30-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-411"><a href="#cb30-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-412"><a href="#cb30-412" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modified Duration</span></span>
<span id="cb30-413"><a href="#cb30-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-414"><a href="#cb30-414" aria-hidden="true" tabindex="-1"></a>Duration measures **first-order sensitivity** to yield changes. Consider a bond priced from the zero curve. The price is:</span>
<span id="cb30-415"><a href="#cb30-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-416"><a href="#cb30-416" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-417"><a href="#cb30-417" aria-hidden="true" tabindex="-1"></a>P = \sum_{t=1}^{T} CF_t \cdot (1 + r(t))^{-t}</span>
<span id="cb30-418"><a href="#cb30-418" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-419"><a href="#cb30-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-420"><a href="#cb30-420" aria-hidden="true" tabindex="-1"></a>where $CF_t$ is the cash flow at time $t$ (coupons plus principal at maturity). Modified duration is the derivative with respect to a **parallel shift** in all rates:</span>
<span id="cb30-421"><a href="#cb30-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-422"><a href="#cb30-422" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-423"><a href="#cb30-423" aria-hidden="true" tabindex="-1"></a>D_{\text{mod}} = -\frac{1}{P}\frac{\partial P}{\partial y}</span>
<span id="cb30-424"><a href="#cb30-424" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-425"><a href="#cb30-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-426"><a href="#cb30-426" aria-hidden="true" tabindex="-1"></a>For small rate changes $\Delta y$, the price change is approximately:</span>
<span id="cb30-427"><a href="#cb30-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-428"><a href="#cb30-428" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-429"><a href="#cb30-429" aria-hidden="true" tabindex="-1"></a>\Delta P \approx -D_{\text{mod}} \cdot P \cdot \Delta y</span>
<span id="cb30-430"><a href="#cb30-430" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-431"><a href="#cb30-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-432"><a href="#cb30-432" aria-hidden="true" tabindex="-1"></a>**Numerical computation:** We use finite differences. Compute the price under a small upward shock (+1 bp), then:</span>
<span id="cb30-433"><a href="#cb30-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-434"><a href="#cb30-434" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-435"><a href="#cb30-435" aria-hidden="true" tabindex="-1"></a>D_{\text{mod}} \approx -\frac{P(y + \epsilon) - P(y)}{P(y) \cdot \epsilon}, \qquad \epsilon = 0.0001</span>
<span id="cb30-436"><a href="#cb30-436" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-437"><a href="#cb30-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-438"><a href="#cb30-438" aria-hidden="true" tabindex="-1"></a><span class="fu">## Convexity</span></span>
<span id="cb30-439"><a href="#cb30-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-440"><a href="#cb30-440" aria-hidden="true" tabindex="-1"></a>Convexity captures the **second-order (curvature) effect**. The price‚Äìyield relationship is not linear ‚Äî it's convex. Duration alone underestimates gains when rates fall and overestimates losses when rates rise. Convexity is the second derivative:</span>
<span id="cb30-441"><a href="#cb30-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-442"><a href="#cb30-442" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-443"><a href="#cb30-443" aria-hidden="true" tabindex="-1"></a>\mathcal{C} = \frac{1}{P}\frac{\partial^2 P}{\partial y^2}</span>
<span id="cb30-444"><a href="#cb30-444" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-445"><a href="#cb30-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-446"><a href="#cb30-446" aria-hidden="true" tabindex="-1"></a>**Numerical computation:** Using finite differences with three price evaluations:</span>
<span id="cb30-447"><a href="#cb30-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-448"><a href="#cb30-448" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-449"><a href="#cb30-449" aria-hidden="true" tabindex="-1"></a>\mathcal{C} \approx \frac{P(y + \epsilon) - 2P(y) + P(y - \epsilon)}{P(y) \cdot \epsilon^2}</span>
<span id="cb30-450"><a href="#cb30-450" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-451"><a href="#cb30-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-452"><a href="#cb30-452" aria-hidden="true" tabindex="-1"></a>For a rate shock $\Delta y$, the **Taylor expansion** gives the full price approximation:</span>
<span id="cb30-453"><a href="#cb30-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-454"><a href="#cb30-454" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-455"><a href="#cb30-455" aria-hidden="true" tabindex="-1"></a>\frac{\Delta P}{P} \approx -D_{\text{mod}} \cdot \Delta y + \frac{1}{2}\,\mathcal{C}\cdot (\Delta y)^2</span>
<span id="cb30-456"><a href="#cb30-456" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-457"><a href="#cb30-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-458"><a href="#cb30-458" aria-hidden="true" tabindex="-1"></a>The first term is the duration effect (linear). The second term is the convexity adjustment (quadratic). For large rate moves, ignoring convexity can lead to significant pricing errors.</span>
<span id="cb30-459"><a href="#cb30-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-462"><a href="#cb30-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-463"><a href="#cb30-463" aria-hidden="true" tabindex="-1"></a>dur <span class="op">=</span> bond_duration(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb30-464"><a href="#cb30-464" aria-hidden="true" tabindex="-1"></a>cvx <span class="op">=</span> bond_convexity(<span class="dv">5</span>, <span class="fl">0.03</span>, <span class="dv">100</span>, spline_curve)</span>
<span id="cb30-465"><a href="#cb30-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-466"><a href="#cb30-466" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Modified Duration : </span><span class="sc">{</span>dur<span class="sc">:.4f}</span><span class="ss"> years"</span>)</span>
<span id="cb30-467"><a href="#cb30-467" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Convexity         : </span><span class="sc">{</span>cvx<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb30-468"><a href="#cb30-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-469"><a href="#cb30-469" aria-hidden="true" tabindex="-1"></a>shock <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb30-470"><a href="#cb30-470" aria-hidden="true" tabindex="-1"></a>price_approx_change <span class="op">=</span> (<span class="op">-</span>dur <span class="op">*</span> shock <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> cvx <span class="op">*</span> shock<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb30-471"><a href="#cb30-471" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Estimated price change for +100 bps shock: </span><span class="sc">{</span>price_approx_change<span class="sc">:.4f}</span><span class="ss">%"</span>)</span>
<span id="cb30-472"><a href="#cb30-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-473"><a href="#cb30-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-474"><a href="#cb30-474" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-475"><a href="#cb30-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-476"><a href="#cb30-476" aria-hidden="true" tabindex="-1"></a><span class="fu"># Stress Testing</span></span>
<span id="cb30-477"><a href="#cb30-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-478"><a href="#cb30-478" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-479"><a href="#cb30-479" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is stress testing in fixed income?</span></span>
<span id="cb30-480"><a href="#cb30-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-481"><a href="#cb30-481" aria-hidden="true" tabindex="-1"></a>Stress testing asks: *what happens to my portfolio if rates move in an extreme but plausible way?* Regulators (Basel, Solvency II) require institutions to demonstrate resilience under predefined shocks. The standard scenarios are parallel shifts (rates move uniformly) and curve reshapings (steepeners, flatteners).</span>
<span id="cb30-482"><a href="#cb30-482" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-483"><a href="#cb30-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-484"><a href="#cb30-484" aria-hidden="true" tabindex="-1"></a><span class="fu">## Parallel Shift</span></span>
<span id="cb30-485"><a href="#cb30-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-486"><a href="#cb30-486" aria-hidden="true" tabindex="-1"></a>A parallel shift moves all rates by the same amount across all maturities.</span>
<span id="cb30-487"><a href="#cb30-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-490"><a href="#cb30-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-491"><a href="#cb30-491" aria-hidden="true" tabindex="-1"></a>fig_stress <span class="op">=</span> plot_stress_test_interactive(</span>
<span id="cb30-492"><a href="#cb30-492" aria-hidden="true" tabindex="-1"></a>    maturity<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb30-493"><a href="#cb30-493" aria-hidden="true" tabindex="-1"></a>    coupon_rate<span class="op">=</span><span class="fl">0.03</span>,</span>
<span id="cb30-494"><a href="#cb30-494" aria-hidden="true" tabindex="-1"></a>    face_value<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb30-495"><a href="#cb30-495" aria-hidden="true" tabindex="-1"></a>    curve<span class="op">=</span>spline_curve,</span>
<span id="cb30-496"><a href="#cb30-496" aria-hidden="true" tabindex="-1"></a>    shock<span class="op">=</span><span class="fl">0.01</span></span>
<span id="cb30-497"><a href="#cb30-497" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-498"><a href="#cb30-498" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-499"><a href="#cb30-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-500"><a href="#cb30-500" aria-hidden="true" tabindex="-1"></a><span class="fu">## Scenario Grid</span></span>
<span id="cb30-501"><a href="#cb30-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-502"><a href="#cb30-502" aria-hidden="true" tabindex="-1"></a>We test three scenarios on a mixed portfolio (2Y/5Y/10Y bonds):</span>
<span id="cb30-503"><a href="#cb30-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-506"><a href="#cb30-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-507"><a href="#cb30-507" aria-hidden="true" tabindex="-1"></a>fig_grid <span class="op">=</span> plot_scenario_grid_interactive(portfolio, <span class="dv">100</span>, spline_curve)</span>
<span id="cb30-508"><a href="#cb30-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-509"><a href="#cb30-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-510"><a href="#cb30-510" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Interpreting the results:** A parallel +100 bps shock is the most severe scenario. The steepener is less damaging because short-end rates are unchanged, the portfolio's short-duration bonds act as a partial hedge.</span></span>
<span id="cb30-511"><a href="#cb30-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-512"><a href="#cb30-512" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-513"><a href="#cb30-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-514"><a href="#cb30-514" aria-hidden="true" tabindex="-1"></a><span class="fu"># Monte Carlo Value-at-Risk</span></span>
<span id="cb30-515"><a href="#cb30-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-516"><a href="#cb30-516" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-517"><a href="#cb30-517" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° What is Value-at-Risk (VaR)?</span></span>
<span id="cb30-518"><a href="#cb30-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-519"><a href="#cb30-519" aria-hidden="true" tabindex="-1"></a>VaR answers: *what is the maximum loss I should expect to suffer in 95% of scenarios?* Here we run 2 000 random interest rate shocks drawn from a normal distribution, reprice the full portfolio under each shock, and read the 95th percentile of the loss distribution.</span>
<span id="cb30-520"><a href="#cb30-520" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-521"><a href="#cb30-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-522"><a href="#cb30-522" aria-hidden="true" tabindex="-1"></a>Interest rate shocks are simulated as:</span>
<span id="cb30-523"><a href="#cb30-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-524"><a href="#cb30-524" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-525"><a href="#cb30-525" aria-hidden="true" tabindex="-1"></a>\Delta r \sim \mathcal{N}(0,\, \sigma^2), \qquad \sigma = 100 \text{ bps}</span>
<span id="cb30-526"><a href="#cb30-526" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-527"><a href="#cb30-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-528"><a href="#cb30-528" aria-hidden="true" tabindex="-1"></a>Portfolio losses are computed as:</span>
<span id="cb30-529"><a href="#cb30-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-530"><a href="#cb30-530" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-531"><a href="#cb30-531" aria-hidden="true" tabindex="-1"></a>\text{Loss}_i = V_0 - V_{\text{shocked},i}</span>
<span id="cb30-532"><a href="#cb30-532" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-533"><a href="#cb30-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-534"><a href="#cb30-534" aria-hidden="true" tabindex="-1"></a>**Assumption and limitations:** The normal distribution assumption is a simplification widely used for tractability. However, empirical evidence shows that interest rate changes exhibit **fat tails** (extreme events occur more frequently than normal theory predicts) and **volatility clustering** (large moves tend to follow large moves). During the 2022‚Äì2023 Fed hiking cycle, weekly rate changes exceeding ¬±50 bps occurred multiple times, events the normal model would classify as 5-sigma outliers. More realistic alternatives include Student's t-distribution (captures fat tails), GARCH models (time-varying volatility), or empirical bootstrapping from historical shocks. We retain the normal assumption for pedagogical clarity, but acknowledge it underestimates tail risk.</span>
<span id="cb30-535"><a href="#cb30-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-538"><a href="#cb30-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-539"><a href="#cb30-539" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb30-540"><a href="#cb30-540" aria-hidden="true" tabindex="-1"></a>var_95, losses <span class="op">=</span> simulate_var(portfolio, <span class="dv">100</span>, spline_curve, shock_std<span class="op">=</span><span class="fl">0.01</span>, n_sim<span class="op">=</span><span class="dv">2000</span>)</span>
<span id="cb30-541"><a href="#cb30-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-542"><a href="#cb30-542" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"95% VaR (2 000 simulations, œÉ = 100 bps): </span><span class="sc">{</span>var_95<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb30-543"><a href="#cb30-543" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Expected loss interpretation: in 95% of scenarios,"</span>)</span>
<span id="cb30-544"><a href="#cb30-544" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"portfolio loss does not exceed </span><span class="sc">{</span>var_95<span class="sc">:.4f}</span><span class="ss"> per unit of face value."</span>)</span>
<span id="cb30-545"><a href="#cb30-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-546"><a href="#cb30-546" aria-hidden="true" tabindex="-1"></a>fig_var <span class="op">=</span> plot_var_distribution_interactive(losses, var_95)</span>
<span id="cb30-547"><a href="#cb30-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-548"><a href="#cb30-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-549"><a href="#cb30-549" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Reading the histogram:** The loss distribution is approximately symmetric and bell-shaped, consistent with normally distributed rate shocks. The red dashed line marks the 95% VaR threshold.</span></span>
<span id="cb30-550"><a href="#cb30-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-551"><a href="#cb30-551" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-552"><a href="#cb30-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-553"><a href="#cb30-553" aria-hidden="true" tabindex="-1"></a><span class="fu"># Principal Component Analysis</span></span>
<span id="cb30-554"><a href="#cb30-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-555"><a href="#cb30-555" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-556"><a href="#cb30-556" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° Why PCA on yield curves?</span></span>
<span id="cb30-557"><a href="#cb30-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-558"><a href="#cb30-558" aria-hidden="true" tabindex="-1"></a>Yield curve movements across maturities are highly correlated, when 2Y rates move, 5Y rates usually move too. PCA decomposes this complexity into a small number of **independent factors** that explain most of the variance. Decades of empirical research show that three factors capture 95‚Äì99% of yield curve variation: **level, slope, and curvature**.</span>
<span id="cb30-559"><a href="#cb30-559" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-560"><a href="#cb30-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-561"><a href="#cb30-561" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mathematical Framework</span></span>
<span id="cb30-562"><a href="#cb30-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-563"><a href="#cb30-563" aria-hidden="true" tabindex="-1"></a>We observe daily yield changes across the four maturities over 5 years (~1 250 trading days). Let $\Delta r_t$ denote the vector of rate changes on day $t$. We compute the **covariance matrix** $\mathbf{\Sigma}$ of these changes, which captures how different maturities move together.</span>
<span id="cb30-564"><a href="#cb30-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-565"><a href="#cb30-565" aria-hidden="true" tabindex="-1"></a>PCA decomposes this covariance matrix into orthogonal factors:</span>
<span id="cb30-566"><a href="#cb30-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-567"><a href="#cb30-567" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-568"><a href="#cb30-568" aria-hidden="true" tabindex="-1"></a>\mathbf{\Sigma} = \mathbf{V} \mathbf{\Lambda} \mathbf{V}^\top</span>
<span id="cb30-569"><a href="#cb30-569" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb30-570"><a href="#cb30-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-571"><a href="#cb30-571" aria-hidden="true" tabindex="-1"></a>where $\mathbf{V}$ contains the **eigenvectors** (principal components) and $\mathbf{\Lambda}$ contains the **eigenvalues** (variance explained by each component).</span>
<span id="cb30-572"><a href="#cb30-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-573"><a href="#cb30-573" aria-hidden="true" tabindex="-1"></a>**What this means in practice:**</span>
<span id="cb30-574"><a href="#cb30-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-575"><a href="#cb30-575" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Each eigenvector is a pattern of co-movement. The first eigenvector (PC1) has all positive entries, meaning all rates move in the same direction ‚Äî this is the **level factor**.</span>
<span id="cb30-576"><a href="#cb30-576" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The eigenvalues tell us how important each factor is. Typically, PC1 explains ~85‚Äì90% of all variation, PC2 explains ~5‚Äì10%, and PC3 explains ~2‚Äì5%.</span>
<span id="cb30-577"><a href="#cb30-577" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The three factors have clear economic interpretations: **level** (parallel shifts), **slope** (steepening/flattening), and **curvature** (humps in the middle of the curve).</span>
<span id="cb30-578"><a href="#cb30-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-579"><a href="#cb30-579" aria-hidden="true" tabindex="-1"></a>This dimensional reduction is powerful: instead of tracking movements at hundreds of maturities, we can summarize almost everything with three numbers.</span>
<span id="cb30-580"><a href="#cb30-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-583"><a href="#cb30-583" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-584"><a href="#cb30-584" aria-hidden="true" tabindex="-1"></a>maturities_list <span class="op">=</span> <span class="bu">sorted</span>([<span class="bu">int</span>(m) <span class="cf">for</span> m <span class="kw">in</span> data[<span class="st">'maturity'</span>].unique()])</span>
<span id="cb30-585"><a href="#cb30-585" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Dataset loaded from local FRED CSV files"</span>)</span>
<span id="cb30-586"><a href="#cb30-586" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range  : </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> ‚Üí </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb30-587"><a href="#cb30-587" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Maturities  : </span><span class="sc">{</span>maturities_list<span class="sc">}</span><span class="ss">Y"</span>)</span>
<span id="cb30-588"><a href="#cb30-588" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Observations: </span><span class="sc">{</span>data[<span class="st">'date'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> trading days √ó </span><span class="sc">{</span><span class="bu">len</span>(maturities_list)<span class="sc">}</span><span class="ss"> maturities"</span>)</span>
<span id="cb30-589"><a href="#cb30-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-590"><a href="#cb30-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-593"><a href="#cb30-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-594"><a href="#cb30-594" aria-hidden="true" tabindex="-1"></a>pca, maturities, returns <span class="op">=</span> perform_pca(data)</span>
<span id="cb30-595"><a href="#cb30-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-596"><a href="#cb30-596" aria-hidden="true" tabindex="-1"></a>total_var <span class="op">=</span> pca.explained_variance_ratio_[:<span class="dv">3</span>].<span class="bu">sum</span>() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb30-597"><a href="#cb30-597" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"PCA, Explained Variance:"</span>)</span>
<span id="cb30-598"><a href="#cb30-598" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">min</span>(<span class="dv">4</span>, <span class="bu">len</span>(pca.explained_variance_ratio_))):</span>
<span id="cb30-599"><a href="#cb30-599" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  PC</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>pca<span class="sc">.</span>explained_variance_ratio_[i]<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%"</span>)</span>
<span id="cb30-600"><a href="#cb30-600" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">First 3 components explain: </span><span class="sc">{</span>total_var<span class="sc">:.1f}</span><span class="ss">% of total variance"</span>)</span>
<span id="cb30-601"><a href="#cb30-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-602"><a href="#cb30-602" aria-hidden="true" tabindex="-1"></a>fig_pca1 <span class="op">=</span> plot_pca_components_interactive(pca, maturities)</span>
<span id="cb30-603"><a href="#cb30-603" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-604"><a href="#cb30-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-607"><a href="#cb30-607" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-608"><a href="#cb30-608" aria-hidden="true" tabindex="-1"></a>fig_pca2 <span class="op">=</span> plot_pca_variance_interactive(pca)</span>
<span id="cb30-609"><a href="#cb30-609" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-610"><a href="#cb30-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-611"><a href="#cb30-611" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **Interpreting the factors:**</span></span>
<span id="cb30-612"><a href="#cb30-612" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb30-613"><a href="#cb30-613" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - **PC1 (Level)**, all loadings have the same sign. When this factor moves, all rates rise or fall together. It is by far the dominant driver of yield curve risk, capturing the 2022‚Äì2023 Fed hiking cycle in full.</span></span>
<span id="cb30-614"><a href="#cb30-614" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - **PC2 (Slope)**, loadings are positive at long maturities and negative at short ones. This captures steepening/flattening dynamics.</span></span>
<span id="cb30-615"><a href="#cb30-615" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - **PC3 (Curvature)**, a hump-shaped pattern, reflecting movements in intermediate maturities relative to the short and long ends.</span></span>
<span id="cb30-616"><a href="#cb30-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-617"><a href="#cb30-617" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-618"><a href="#cb30-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-619"><a href="#cb30-619" aria-hidden="true" tabindex="-1"></a><span class="fu"># Extension: Machine Learning Yield Curve Forecasting</span></span>
<span id="cb30-620"><a href="#cb30-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-621"><a href="#cb30-621" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon=false}</span>
<span id="cb30-622"><a href="#cb30-622" aria-hidden="true" tabindex="-1"></a><span class="fu">## üí° Can we predict where rates are heading?</span></span>
<span id="cb30-623"><a href="#cb30-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-624"><a href="#cb30-624" aria-hidden="true" tabindex="-1"></a>Traditional yield curve models are *descriptive*: they tell us what the curve looks like today, and how sensitive it is to shocks. But a natural next question emerges: can we build a model that *predicts* where rates will be in 1 month, 3 months, or 6 months? Machine learning offers a data-driven approach to this problem.</span>
<span id="cb30-625"><a href="#cb30-625" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb30-626"><a href="#cb30-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-627"><a href="#cb30-627" aria-hidden="true" tabindex="-1"></a>We've already prepared everything we need for this extension. Our PCA analysis computed **daily yield changes** across all four maturities over 5 years, that's 1 249 observations of how the curve evolves day-to-day. We can now use this time series to train a supervised learning model.</span>
<span id="cb30-628"><a href="#cb30-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-629"><a href="#cb30-629" aria-hidden="true" tabindex="-1"></a>The idea is simple but powerful. Today's short-term rates often contain information about where longer-term rates are heading. If the 1-year rate jumps sharply, the 10-year rate tends to follow, though with a lag and a dampening effect. Machine learning can learn these patterns automatically from historical data, without requiring us to specify the functional form by hand.</span>
<span id="cb30-630"><a href="#cb30-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-631"><a href="#cb30-631" aria-hidden="true" tabindex="-1"></a>We use a **Random Forest regressor**, an ensemble method that fits multiple decision trees and averages their predictions. Random Forests are robust to overfitting, handle non-linear relationships naturally, and require minimal hyperparameter tuning. We train the model to predict the **1-month forward change** in the 10-year zero rate, using as features: (1) today's level of all four rates, (2) yesterday's changes in all four rates, and (3) the rolling 20-day volatility of rate changes.</span>
<span id="cb30-632"><a href="#cb30-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-635"><a href="#cb30-635" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-636"><a href="#cb30-636" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb30-637"><a href="#cb30-637" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb30-638"><a href="#cb30-638" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error, r2_score</span>
<span id="cb30-639"><a href="#cb30-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-640"><a href="#cb30-640" aria-hidden="true" tabindex="-1"></a><span class="co"># Build ML dataset from PCA returns</span></span>
<span id="cb30-641"><a href="#cb30-641" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_ml_features(returns):</span>
<span id="cb30-642"><a href="#cb30-642" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb30-643"><a href="#cb30-643" aria-hidden="true" tabindex="-1"></a><span class="co">    Create supervised learning dataset:</span></span>
<span id="cb30-644"><a href="#cb30-644" aria-hidden="true" tabindex="-1"></a><span class="co">      - Features: today's rate levels + yesterday's changes + 20d vol</span></span>
<span id="cb30-645"><a href="#cb30-645" aria-hidden="true" tabindex="-1"></a><span class="co">      - Target: 1-month forward change in 10Y rate</span></span>
<span id="cb30-646"><a href="#cb30-646" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb30-647"><a href="#cb30-647" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> returns.copy()</span>
<span id="cb30-648"><a href="#cb30-648" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="ss">f"rate_</span><span class="sc">{</span><span class="bu">int</span>(c)<span class="sc">}</span><span class="ss">Y"</span> <span class="cf">for</span> c <span class="kw">in</span> df.columns]</span>
<span id="cb30-649"><a href="#cb30-649" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-650"><a href="#cb30-650" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lagged changes</span></span>
<span id="cb30-651"><a href="#cb30-651" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df.columns:</span>
<span id="cb30-652"><a href="#cb30-652" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_lag1"</span>] <span class="op">=</span> df[col].shift(<span class="dv">1</span>)</span>
<span id="cb30-653"><a href="#cb30-653" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-654"><a href="#cb30-654" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rolling volatility (20-day window)</span></span>
<span id="cb30-655"><a href="#cb30-655" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> c.startswith(<span class="st">"rate_"</span>)]:</span>
<span id="cb30-656"><a href="#cb30-656" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_vol20d"</span>] <span class="op">=</span> df[col].rolling(<span class="dv">20</span>).std()</span>
<span id="cb30-657"><a href="#cb30-657" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-658"><a href="#cb30-658" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Target: 1-month forward change in 10Y</span></span>
<span id="cb30-659"><a href="#cb30-659" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"target"</span>] <span class="op">=</span> df[<span class="st">"rate_10Y"</span>].shift(<span class="op">-</span><span class="dv">21</span>)  <span class="co"># ~1 month = 21 trading days</span></span>
<span id="cb30-660"><a href="#cb30-660" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-661"><a href="#cb30-661" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Drop rows with NaN (edges of rolling windows and lags)</span></span>
<span id="cb30-662"><a href="#cb30-662" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna()</span>
<span id="cb30-663"><a href="#cb30-663" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-664"><a href="#cb30-664" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb30-665"><a href="#cb30-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-666"><a href="#cb30-666" aria-hidden="true" tabindex="-1"></a>ml_data <span class="op">=</span> build_ml_features(returns)</span>
<span id="cb30-667"><a href="#cb30-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-668"><a href="#cb30-668" aria-hidden="true" tabindex="-1"></a><span class="co"># Features: all columns except target</span></span>
<span id="cb30-669"><a href="#cb30-669" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ml_data.drop(columns<span class="op">=</span>[<span class="st">"target"</span>])</span>
<span id="cb30-670"><a href="#cb30-670" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ml_data[<span class="st">"target"</span>]</span>
<span id="cb30-671"><a href="#cb30-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-672"><a href="#cb30-672" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split: 80% train, 20% test (chronological)</span></span>
<span id="cb30-673"><a href="#cb30-673" aria-hidden="true" tabindex="-1"></a>split_idx <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(X) <span class="op">*</span> <span class="fl">0.8</span>)</span>
<span id="cb30-674"><a href="#cb30-674" aria-hidden="true" tabindex="-1"></a>X_train, X_test <span class="op">=</span> X.iloc[:split_idx], X.iloc[split_idx:]</span>
<span id="cb30-675"><a href="#cb30-675" aria-hidden="true" tabindex="-1"></a>y_train, y_test <span class="op">=</span> y.iloc[:split_idx], y.iloc[split_idx:]</span>
<span id="cb30-676"><a href="#cb30-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-677"><a href="#cb30-677" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Training set  : </span><span class="sc">{</span><span class="bu">len</span>(X_train)<span class="sc">}</span><span class="ss"> observations"</span>)</span>
<span id="cb30-678"><a href="#cb30-678" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Test set      : </span><span class="sc">{</span><span class="bu">len</span>(X_test)<span class="sc">}</span><span class="ss"> observations"</span>)</span>
<span id="cb30-679"><a href="#cb30-679" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Features used : </span><span class="sc">{</span>X<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb30-680"><a href="#cb30-680" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-681"><a href="#cb30-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-684"><a href="#cb30-684" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-685"><a href="#cb30-685" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Random Forest</span></span>
<span id="cb30-686"><a href="#cb30-686" aria-hidden="true" tabindex="-1"></a>rf <span class="op">=</span> RandomForestRegressor(</span>
<span id="cb30-687"><a href="#cb30-687" aria-hidden="true" tabindex="-1"></a>    n_estimators<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb30-688"><a href="#cb30-688" aria-hidden="true" tabindex="-1"></a>    max_depth<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb30-689"><a href="#cb30-689" aria-hidden="true" tabindex="-1"></a>    min_samples_split<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb30-690"><a href="#cb30-690" aria-hidden="true" tabindex="-1"></a>    random_state<span class="op">=</span><span class="dv">42</span>,</span>
<span id="cb30-691"><a href="#cb30-691" aria-hidden="true" tabindex="-1"></a>    n_jobs<span class="op">=-</span><span class="dv">1</span></span>
<span id="cb30-692"><a href="#cb30-692" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-693"><a href="#cb30-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-694"><a href="#cb30-694" aria-hidden="true" tabindex="-1"></a>rf.fit(X_train, y_train)</span>
<span id="cb30-695"><a href="#cb30-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-696"><a href="#cb30-696" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions</span></span>
<span id="cb30-697"><a href="#cb30-697" aria-hidden="true" tabindex="-1"></a>y_pred_train <span class="op">=</span> rf.predict(X_train)</span>
<span id="cb30-698"><a href="#cb30-698" aria-hidden="true" tabindex="-1"></a>y_pred_test <span class="op">=</span> rf.predict(X_test)</span>
<span id="cb30-699"><a href="#cb30-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-700"><a href="#cb30-700" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluation metrics</span></span>
<span id="cb30-701"><a href="#cb30-701" aria-hidden="true" tabindex="-1"></a>mae_train <span class="op">=</span> mean_absolute_error(y_train, y_pred_train)</span>
<span id="cb30-702"><a href="#cb30-702" aria-hidden="true" tabindex="-1"></a>mae_test <span class="op">=</span> mean_absolute_error(y_test, y_pred_test)</span>
<span id="cb30-703"><a href="#cb30-703" aria-hidden="true" tabindex="-1"></a>r2_train <span class="op">=</span> r2_score(y_train, y_pred_train)</span>
<span id="cb30-704"><a href="#cb30-704" aria-hidden="true" tabindex="-1"></a>r2_test <span class="op">=</span> r2_score(y_test, y_pred_test)</span>
<span id="cb30-705"><a href="#cb30-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-706"><a href="#cb30-706" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Model Performance:"</span>)</span>
<span id="cb30-707"><a href="#cb30-707" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Train MAE : </span><span class="sc">{</span>mae_train<span class="op">*</span><span class="dv">10000</span><span class="sc">:.2f}</span><span class="ss"> bps"</span>)</span>
<span id="cb30-708"><a href="#cb30-708" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Test MAE  : </span><span class="sc">{</span>mae_test<span class="op">*</span><span class="dv">10000</span><span class="sc">:.2f}</span><span class="ss"> bps"</span>)</span>
<span id="cb30-709"><a href="#cb30-709" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Train R¬≤  : </span><span class="sc">{</span>r2_train<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb30-710"><a href="#cb30-710" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Test R¬≤   : </span><span class="sc">{</span>r2_test<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb30-711"><a href="#cb30-711" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-712"><a href="#cb30-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-715"><a href="#cb30-715" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-716"><a href="#cb30-716" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature importance</span></span>
<span id="cb30-717"><a href="#cb30-717" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb30-718"><a href="#cb30-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-719"><a href="#cb30-719" aria-hidden="true" tabindex="-1"></a>importances <span class="op">=</span> pd.DataFrame({</span>
<span id="cb30-720"><a href="#cb30-720" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Feature"</span>: X.columns,</span>
<span id="cb30-721"><a href="#cb30-721" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Importance"</span>: rf.feature_importances_</span>
<span id="cb30-722"><a href="#cb30-722" aria-hidden="true" tabindex="-1"></a>}).sort_values(<span class="st">"Importance"</span>, ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span>
<span id="cb30-723"><a href="#cb30-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-724"><a href="#cb30-724" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Top 10 Most Important Features:"</span>)</span>
<span id="cb30-725"><a href="#cb30-725" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(importances.to_string(index<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb30-726"><a href="#cb30-726" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-727"><a href="#cb30-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-730"><a href="#cb30-730" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb30-731"><a href="#cb30-731" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize: Actual vs Predicted on test set</span></span>
<span id="cb30-732"><a href="#cb30-732" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb30-733"><a href="#cb30-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-734"><a href="#cb30-734" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb30-735"><a href="#cb30-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-736"><a href="#cb30-736" aria-hidden="true" tabindex="-1"></a>test_dates <span class="op">=</span> ml_data.index[split_idx:]</span>
<span id="cb30-737"><a href="#cb30-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-738"><a href="#cb30-738" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb30-739"><a href="#cb30-739" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>test_dates,</span>
<span id="cb30-740"><a href="#cb30-740" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>y_test <span class="op">*</span> <span class="dv">10000</span>,</span>
<span id="cb30-741"><a href="#cb30-741" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb30-742"><a href="#cb30-742" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Actual 1M Œî (10Y)"</span>,</span>
<span id="cb30-743"><a href="#cb30-743" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"#457B9D"</span>, width<span class="op">=</span><span class="fl">1.5</span>),</span>
<span id="cb30-744"><a href="#cb30-744" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb30-745"><a href="#cb30-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-746"><a href="#cb30-746" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb30-747"><a href="#cb30-747" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>test_dates,</span>
<span id="cb30-748"><a href="#cb30-748" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>y_pred_test <span class="op">*</span> <span class="dv">10000</span>,</span>
<span id="cb30-749"><a href="#cb30-749" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb30-750"><a href="#cb30-750" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"Predicted 1M Œî (10Y)"</span>,</span>
<span id="cb30-751"><a href="#cb30-751" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"#E63946"</span>, width<span class="op">=</span><span class="fl">1.5</span>, dash<span class="op">=</span><span class="st">"dot"</span>),</span>
<span id="cb30-752"><a href="#cb30-752" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb30-753"><a href="#cb30-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-754"><a href="#cb30-754" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb30-755"><a href="#cb30-755" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb30-756"><a href="#cb30-756" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="st">"ML Forecast: 1-Month Forward Change in 10Y Rate"</span>,</span>
<span id="cb30-757"><a href="#cb30-757" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">16</span>),</span>
<span id="cb30-758"><a href="#cb30-758" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb30-759"><a href="#cb30-759" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb30-760"><a href="#cb30-760" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">'center'</span>,</span>
<span id="cb30-761"><a href="#cb30-761" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">'top'</span></span>
<span id="cb30-762"><a href="#cb30-762" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb30-763"><a href="#cb30-763" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Date"</span>,</span>
<span id="cb30-764"><a href="#cb30-764" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Rate Change (bps)"</span>,</span>
<span id="cb30-765"><a href="#cb30-765" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">"plotly_white"</span>,</span>
<span id="cb30-766"><a href="#cb30-766" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb30-767"><a href="#cb30-767" aria-hidden="true" tabindex="-1"></a>    hovermode<span class="op">=</span><span class="st">"x unified"</span>,</span>
<span id="cb30-768"><a href="#cb30-768" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">80</span>, b<span class="op">=</span><span class="dv">80</span>, l<span class="op">=</span><span class="dv">60</span>, r<span class="op">=</span><span class="dv">40</span>),</span>
<span id="cb30-769"><a href="#cb30-769" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(orientation<span class="op">=</span><span class="st">"h"</span>, yanchor<span class="op">=</span><span class="st">"bottom"</span>, y<span class="op">=-</span><span class="fl">0.2</span>, xanchor<span class="op">=</span><span class="st">"center"</span>, x<span class="op">=</span><span class="fl">0.5</span>),</span>
<span id="cb30-770"><a href="#cb30-770" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-771"><a href="#cb30-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-772"><a href="#cb30-772" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb30-773"><a href="#cb30-773" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-774"><a href="#cb30-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-775"><a href="#cb30-775" aria-hidden="true" tabindex="-1"></a>The results reveal an important lesson about machine learning in finance. On the test set, we achieve a Mean Absolute Error (MAE) of roughly 4 basis points, which sounds excellent. However, the R¬≤ score is **negative** (around -0.07), meaning the model performs **worse than a naive baseline** that simply predicts zero change every day.</span>
<span id="cb30-776"><a href="#cb30-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-777"><a href="#cb30-777" aria-hidden="true" tabindex="-1"></a>What went wrong? The test period likely contains structural breaks or regime shifts that didn't exist in the training data. Interest rate movements from 2021‚Äì2024 (our training set) were dominated by the Fed's unprecedented hiking cycle. The test period (late 2024‚Äì2026) represents a different regime: rates stabilizing, inflation moderating, policy uncertainty. The model learned patterns that don't generalize.</span>
<span id="cb30-778"><a href="#cb30-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-779"><a href="#cb30-779" aria-hidden="true" tabindex="-1"></a>This is a **classic overfitting problem** in financial forecasting. The Random Forest captured noise rather than signal. The feature importances show that volatility measures (rolling 20-day standard deviations) rank highest, but these are inherently unstable and regime-dependent.</span>
<span id="cb30-780"><a href="#cb30-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-781"><a href="#cb30-781" aria-hidden="true" tabindex="-1"></a>**What we learn from this failure:**</span>
<span id="cb30-782"><a href="#cb30-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-783"><a href="#cb30-783" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Time series forecasting is hard.** Unlike image classification or NLP, financial markets are non-stationary. Patterns that worked yesterday can fail tomorrow when the macroeconomic regime shifts.</span>
<span id="cb30-784"><a href="#cb30-784" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Out-of-sample testing is critical.** In-sample performance (Train R¬≤ = 0.34) looked respectable, but it was meaningless. Only the test set revealed the truth.</span>
<span id="cb30-785"><a href="#cb30-785" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Simple models can outperform complex ones.** A naive "no-change" forecast beats our Random Forest here. Sometimes the best prediction is humility.</span>
<span id="cb30-786"><a href="#cb30-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-787"><a href="#cb30-787" aria-hidden="true" tabindex="-1"></a>**How to improve:**</span>
<span id="cb30-788"><a href="#cb30-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-789"><a href="#cb30-789" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Incorporate macro features: Fed Funds futures, CPI expectations, unemployment rates ‚Äî variables that capture regime shifts.</span>
<span id="cb30-790"><a href="#cb30-790" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use regime-switching models (Markov-switching, HMM) that explicitly model structural breaks.</span>
<span id="cb30-791"><a href="#cb30-791" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Shorten the forecast horizon: predicting 1-week changes instead of 1-month might work better.</span>
<span id="cb30-792"><a href="#cb30-792" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ensemble with economic models: blend ML forecasts with term structure models (Vasicek, CIR).</span>
<span id="cb30-793"><a href="#cb30-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-794"><a href="#cb30-794" aria-hidden="true" tabindex="-1"></a>This extension demonstrates both the **potential and the limits** of machine learning in finance. The infrastructure is there (PCA time series, clean data, feature engineering), but prediction requires more than just throwing algorithms at historical patterns. It requires understanding the economic drivers and respecting the non-stationarity of markets.</span>
<span id="cb30-795"><a href="#cb30-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-796"><a href="#cb30-796" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-797"><a href="#cb30-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-798"><a href="#cb30-798" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb30-799"><a href="#cb30-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-800"><a href="#cb30-800" aria-hidden="true" tabindex="-1"></a>This project delivers a complete, reproducible framework for interest rate curve modelling and risk analysis. Starting from four observable Treasury yields published daily by FRED, we've built a zero-coupon curve, stress-tested it under extreme scenarios, decomposed historical movements into fundamental risk factors, and extended the toolkit with machine learning forecasting.</span>
<span id="cb30-801"><a href="#cb30-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-802"><a href="#cb30-802" aria-hidden="true" tabindex="-1"></a>The results reveal several key insights. First, the current U.S. yield curve is upward sloping (3.40% at 1Y, 4.16% at 10Y), reflecting a 76 basis point term premium, the market's compensation for inflation risk and uncertainty about future Fed policy. Second, our PCA analysis shows that 99.3% of yield curve variation over five years is explained by just three factors: level shifts, slope changes, and curvature adjustments. This is why professional risk managers focus on "level-duration" and "slope-duration", it's not simplification, it's empirical reality.</span>
<span id="cb30-803"><a href="#cb30-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-804"><a href="#cb30-804" aria-hidden="true" tabindex="-1"></a>Third, duration is the primary risk driver: a +100 bp parallel shock drops our portfolio value by roughly 4.5%, consistent with modified duration. But convexity matters too, the price-yield relationship is curved, not linear, meaning gains from rate falls exceed losses from rate rises by a margin that can be worth millions at institutional scale. Fourth, Monte Carlo VaR gives us the full loss distribution, not just a single number. We see the clustering around small moves, the fat left tail of severe downside scenarios, and the symmetric shape that validates our normal shock assumption.</span>
<span id="cb30-805"><a href="#cb30-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-806"><a href="#cb30-806" aria-hidden="true" tabindex="-1"></a>Finally, the Random Forest forecasting module reveals an important lesson about machine learning in finance. Despite having proper infrastructure (PCA time series, clean data, feature engineering), the model failed to generalize to the test period (R¬≤ = -0.068), performing worse than a naive baseline. This failure demonstrates that historical patterns alone cannot capture regime shifts in non-stationary markets. The extension highlights both the potential of ML tools and the critical need to combine them with economic understanding and respect for structural breaks.</span>
<span id="cb30-807"><a href="#cb30-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-808"><a href="#cb30-808" aria-hidden="true" tabindex="-1"></a>The framework is extensible. Natural next steps include adding more maturities (3M bills, 30Y bonds), incorporating credit spreads, building full term structure models (Vasicek, CIR, Hull-White), and feeding macro indicators into the ML module. But even as it stands, this is a production-ready toolkit. The code runs. The data is real. The methods are industry-standard.</span>
<span id="cb30-809"><a href="#cb30-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-810"><a href="#cb30-810" aria-hidden="true" tabindex="-1"></a>That's the goal of quantitative finance: turning abstract concepts, discount factors, eigenvalues, convexity, into tools that make better decisions. This project bridges that gap.</span>
<span id="cb30-811"><a href="#cb30-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-812"><a href="#cb30-812" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-813"><a href="#cb30-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-814"><a href="#cb30-814" aria-hidden="true" tabindex="-1"></a>*Code and data available on GitHub. Built with Python, Quarto, NumPy, pandas, scikit-learn, and Plotly.*</span>
<span id="cb30-815"><a href="#cb30-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-816"><a href="#cb30-816" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb30-817"><a href="#cb30-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-818"><a href="#cb30-818" aria-hidden="true" tabindex="-1"></a><span class="fu"># Bibliography</span></span>
<span id="cb30-819"><a href="#cb30-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-820"><a href="#cb30-820" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ang, A., &amp; Piazzesi, M. (2003). A no-arbitrage vector autoregression of term structure dynamics with macroeconomic and latent variables. *Journal of Monetary Economics*, 50(4), 745‚Äì787.</span>
<span id="cb30-821"><a href="#cb30-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-822"><a href="#cb30-822" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bianchi, D., B√ºchner, M., &amp; Tamoni, A. (2021). Bond risk premiums with machine learning. *Review of Financial Studies*, 34(2), 1046‚Äì1089.</span>
<span id="cb30-823"><a href="#cb30-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-824"><a href="#cb30-824" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Diebold, F. X., &amp; Li, C. (2006). Forecasting the term structure of government bond yields. *Journal of Econometrics*, 130(2), 337‚Äì364.</span>
<span id="cb30-825"><a href="#cb30-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-826"><a href="#cb30-826" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Fabozzi, F. J. (2007). *Fixed Income Analysis* (2nd ed.). John Wiley &amp; Sons.</span>
<span id="cb30-827"><a href="#cb30-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-828"><a href="#cb30-828" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Hicks, J. R. (1939). *Value and Capital*. Oxford University Press.</span>
<span id="cb30-829"><a href="#cb30-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-830"><a href="#cb30-830" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jarrow, R. A. (2009). The term structure of interest rates. *Annual Review of Financial Economics*, 1(1), 69‚Äì96.</span>
<span id="cb30-831"><a href="#cb30-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-832"><a href="#cb30-832" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Litterman, R., &amp; Scheinkman, J. (1991). Common factors affecting bond returns. *Journal of Fixed Income*, 1(1), 54‚Äì61.</span>
<span id="cb30-833"><a href="#cb30-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-834"><a href="#cb30-834" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Macaulay, F. R. (1938). *The Movements of Interest Rates, Bond Yields and Stock Prices in the United States Since 1856*. National Bureau of Economic Research.</span>
<span id="cb30-835"><a href="#cb30-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-836"><a href="#cb30-836" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>McCulloch, J. H. (1971). Measuring the term structure of interest rates. *Journal of Business*, 44(1), 19‚Äì31.</span>
<span id="cb30-837"><a href="#cb30-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-838"><a href="#cb30-838" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Nelson, C. R., &amp; Siegel, A. F. (1987). Parsimonious modeling of yield curves. *Journal of Business*, 60(4), 473‚Äì489.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>